(function(a){a.fn.__append__=a.fn.append;a.fn.__prepend__=a.fn.prepend;a.fn.__useTr=true;a.fn.append=function(){var b=this.__append__.apply(this,arguments);if(a.fn.__useTr&&WiziCore!=undefined&&typeof WiziCore.lang=="function"&&typeof WiziCore.lang().trElement=="function"){WiziCore.lang().trElement(b)}return b};a.fn.prepend=function(){var b=this.__prepend__.apply(this,arguments);if(a.fn.__useTr&&WiziCore!=undefined&&typeof WiziCore.lang=="function"&&typeof WiziCore.lang().trElement=="function"){WiziCore.lang().trElement(b)}return b};a.fn.langtext=function(d){if(a.isFunction(d)){return this.each(function(g){var f=a(this);f.text(d.call(this,g,f.text()))})}if(typeof d!=="object"&&d!==undefined){var b=this.children();var e=b.length;var c=this.empty().domManip([(this[0]&&this[0].ownerDocument||document).createTextNode(d)],true,function(f){if(this.nodeType===1){this.appendChild(f)}});if(e>0){b.each(function(f){c.append(this)})}return c}return a.getText(this)};return a})(jQuery);(function(a){a.topZIndex=function(b){return Math.max(0,Math.max.apply(null,a.map(a(b||"body *"),function(c){return parseInt(a(c).css("z-index"))||null})))};a.fn.topZIndex=function(b){if(this.length===0){return this}b=a.extend({increment:1,selector:"body *"},b);var d=a.topZIndex(b.selector),c=b.increment;return this.each(function(){a(this).css("z-index",d+=c)})}})(jQuery);(function(b){b.hotkeys={version:"0.8",specialKeys:{8:"backspace",9:"tab",13:"return",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",191:"/",224:"meta"},shiftNums:{"`":"~","1":"!","2":"@","3":"#","4":"$","5":"%","6":"^","7":"&","8":"*","9":"(","0":")","-":"_","=":"+",";":": ","'":'"',",":"<",".":">","/":"?","\\":"|"}};function a(d){if(typeof d.data!=="string"){return}var c=d.handler,e=d.data.toLowerCase().split(" ");d.handler=function(n){if(this!==n.target&&(/textarea|select/i.test(n.target.nodeName)||n.target.type==="text")){return}var h=n.type!=="keypress"&&b.hotkeys.specialKeys[n.which],o=String.fromCharCode(n.which).toLowerCase(),k,m="",g={};if(n.altKey&&h!=="alt"){m+="alt+"}if(n.ctrlKey&&h!=="ctrl"){m+="ctrl+"}if(n.metaKey&&!n.ctrlKey&&h!=="meta"){m+="meta+"}if(n.shiftKey&&h!=="shift"){m+="shift+"}if(h){g[m+h]=true}else{g[m+o]=true;g[m+b.hotkeys.shiftNums[o]]=true;if(m==="shift+"){g[b.hotkeys.shiftNums[o]]=true}}for(var j=0,f=e.length;j<f;j++){if(g[e[j]]){return c.apply(this,arguments)}}}}b.each(["keydown","keyup","keypress"],function(){b.event.special[this]={add:a}})})(jQuery);var WiziCore_AppContext=jQuery.Class.create({_config:null,_dataObject:null,_session:null,_api:null,_forms:null,_folders:null,_userSettings:null,_accounts:null,_users:null,_groups:null,_resources:null,_formThemeManager:null,_dataIntegration:null,_dataAgents:null,_connections:null,_queries:null,_formInstances:null,_webClient:null,_formRunTime:null,_inputParameters:null,_instanceStatusRequester:null,_widgetScripts:null,_isDevelop:false,init:function(){this._inputParameters={};this._formRunTime={};this.widgetScripts().initList();this.dataObject()},config:function(){if(this._config==null){this._config=new WiziCore_Api_Config()}return this._config},dataObject:function(){if(this._dataObject==null){this._dataObject=new WiziCore_DataObject()}return this._dataObject},getSession:function(){if(this._session==null){this._session=new WiziCore_Api_SessionRequester()}return this._session},isDevelop:function(){return this._isDevelop},api:function(){if(this._api==null){this._api=new WiziCore_Api_Server_Api(this.config())}return this._api},forms:function(){if(this._forms==null){this._forms=new WiziCore_Api_FormRequester()}return this._forms},folders:function(){if(this._folders==null){this._folders=new WiziCore_Api_FoldersRequester()}return this._folders},userSettings:function(){if(this._userSettings==null){this._userSettings=new WiziCore_Api_UserSettingsRequester()}return this._userSettings},accounts:function(){if(this._accounts==null){this._accounts=new WiziCore_Api_AccountRequester()}return this._accounts},users:function(){if(this._users==null){this._users=new WiziCore_Api_UserRequester()}return this._users},groups:function(){if(this._groups==null){this._groups=new WiziCore_Api_GroupRequester()}return this._groups},resources:function(){if(this._resources==null){this._resources=new WiziCore_Api_ResourceRequester()}return this._resources},formThemeManager:function(){if(this._formThemeManager==null){this._formThemeManager=new WiziCore_Api_ThemeRequester(this.config().themes().form);this._formThemeManager.enviroment(WiziCore_Api_ThemeRequester.FORM)}return this._formThemeManager},dataIntegration:function(){if(this._dataIntegration==null){this._dataIntegration=new WiziCore_Api_DataIntegrationRequester()}return this._dataIntegration},dataAgents:function(){if(this._dataAgents==null){this._dataAgents=new WiziCore_Api_DataAgentRequester()}return this._dataAgents},connections:function(){if(this._connections==null){this._connections=new WiziCore_Api_ConnectionRequester()}return this._connections},queries:function(){if(this._queries==null){this._queries=new WiziCore_Api_QueryRequester()}return this._queries},formInstances:function(){if(this._formInstances==null){this._formInstances=new WiziCore_Api_FormInstanceRequester()}return this._formInstances},instanceStatusRequester:function(){if(this._instanceStatusRequester==null){this._instanceStatusRequester=new WiziCore_Api_InstanceStatusRequester()}return this._instanceStatusRequester},webClient:function(){if(this._webClient==null){this._webClient=new WiziCore_Api_Server_WebAdapter(this.config())}return this._webClient},formRunTime:function(b,a){if(a!==undefined){this._formRunTime[b]=a}return(b==undefined)?this._formRunTime:this._formRunTime[b]},dropFormRunTime:function(a){delete this._formRunTime[a]},inputParameters:function(a){if(a!==undefined){this._inputParameters=a}return this._inputParameters},widgetScripts:function(){if(this._widgetScripts==null){this._widgetScripts=WiziCore_WidgetScripts}return this._widgetScripts},dropRequesters:function(){if(this._dataObject!=null){delete this._dataObject}if(this._forms!=null){delete this._forms}if(this._folders!=null){delete this._folders}if(this._userSettings!=null){delete this._userSettings}if(this._accounts!=null){delete this._accounts}if(this._users!=null){delete this._users}if(this._groups!=null){delete this._groups}if(this._resources!=null){delete this._resources}if(this._formThemeManager!=null){delete this._formThemeManager}if(this._dataIntegration!=null){delete this._dataIntegration}if(this._dataAgents!=null){delete this._dataAgents}if(this._connections!=null){delete this._connections}if(this._queries!=null){delete this._queries}if(this._formInstances!=null){delete this._formInstances}if(this._webClient!=null){delete this._webClient}if(this._formRunTime!=null){delete this._formRunTime}if(this._instanceStatusRequester!=null){delete this._instanceStatusRequester}}});WiziCore_AppContext.getInstance=function(){if(WiziCore_AppContext.instance==undefined){WiziCore_AppContext.instance=new WiziCore_AppContext()}return WiziCore_AppContext.instance};var WiziCore_ManagerContext=jQuery.Class.create({_wfApp:null,init:function(){var a={};a.UI={};a.editor=null;if(window.WiziForms_UI_Manager!=undefined){a.UI.Manager=new WiziForms_UI_Manager()}a.Session=WiziCore_AppContext.getInstance().getSession();if(window.WiziCore_Api_ThemeRequester!=undefined){a.appThemeManager=new WiziCore_Api_ThemeRequester(WiziCore_AppContext.getInstance().config().themes().app)}if(SwirlLangObjectEn!=undefined){WiziCore.lang(SwirlLangTr.ENGLISH).lang(SwirlLangObjectEn)}this._wfApp=a},getWFApp:function(){return this._wfApp}});WiziCore_ManagerContext.getInstance=function(){if(WiziCore_ManagerContext.instance==undefined){WiziCore_ManagerContext.instance=new WiziCore_ManagerContext()}return WiziCore_ManagerContext.instance.getWFApp()};function WiziCore_Api_Error(b,a){this.message=b;this.code=a}WiziCore_Api_Error.ERR_NEED_CONTEXT=-1000000;WiziCore_Api_Error.ERR_NEED_OBJECT=-1000001;WiziCore_Api_Error.ERR_NOT_UBDOBLE_FN=-1000002;WiziCore_Api_Error.ERR_NOW_EXECUTED=-1000003;WiziCore_Api_Error.ERR_NOT_EXECUTED=-1000004;WiziCore_Api_Error.ERR_CREATE_ADAPTER=-1000005;WiziCore_Api_Error.ERR_PREPARE_ADAPTER=-1000006;WiziCore_Api_Error.ERR_NEED_REGUEST_ADAPTER=-1000007;WiziCore_Api_Error.ERR_NEED_PARENT_OBJECT=-1000008;WiziCore_Api_Error.ERR_WRONG_OBJECT_TYPE=-1000009;WiziCore_Api_Error.ERR_DIFFERENT_PARENT_LEVEL=101;WiziCore_Api_Error.ERR_NOT_HAVE_ACTIVE_CONTAINER=102;WiziCore_Api_Error.ERR_TOO_MANY_SELCONTAINERS=103;WiziCore_Api_Error.prototype=new Error();WiziCore_Api_Error.prototype.constructor=WiziCore_Api_Error;WiziCore_Api_Error.superclass=Error.prototype;var WiziCore_Api_Base=jQuery.Class.create({init:function(){},context:function(){return WiziCore_AppContext.getInstance()},managerContext:function(){return WiziCore_ManagerContext.getInstance()},apiRequest:function(a,d,c){if(d!=undefined&&jQuery.isArray(d)){var b=this.context().getSession().token();d.splice(0,0,b)}this.apiRequestPlain(a,d,c)},apiRequestPlain:function(b,f,d){var e=this.context().api();var c=e.createRequest(b,f);var a=this;e.sendRequest(c,function(g){var h={data:{self:a}};d(h,g)})},apiRequestNorm:function(a,c,b){this.apiRequest(a,c,function(f,g){var i=g.error;var e=g.object;var h=(i)?e:null;var d=(i)?null:e.result;if(typeof b=="function"){b(h,d)}})}});var WiziCore_Api_Server_Api=jQuery.Class.create({_baseServer:"",_type:"json",_adapterClass:"Flash",_adapter:null,_adapterReady:false,_apiAdapterError:false,_queue:null,_sequense:0,_params:null,_createdRequest:null,init:function(a){if(a!=undefined){if(a.apiAdapter!=undefined){this._adapterClass=a.apiAdapter()}if(a.formatApi!=undefined){this.type(a.formatApi())}if(a.serverApi!=undefined){this.baseServer(a.serverApi())}this._params=a}else{this._params={}}this._queue={};this._createdRequest={};if(this._adapter==null){this.RequiresLoaded()}},RequiresLoaded:function(){try{this._adapter=new window["WiziCore_Api_Server_"+this._adapterClass+"Adapter"](this._params)}catch(b){$(this).trigger(WiziCore_Api_Server_Api.onErrorCreate);this._apiAdapterError="Adapter create error"}var a=this;$(this._adapter).unbind(WiziCore_Api_Server_Api.onAdapterStateChange);$(this._adapter).bind(WiziCore_Api_Server_Api.onAdapterStateChange,function(c,d){if(d=="ready"){a.AdapterReady()}else{$(a).trigger(WiziCore_Api_Server_Api.onErrorPrepare);a._apiAdapterError="Adapter error prepare"}})},onResponse:function(a,g){var e=a.state;var d=a.data;var c=a.uid;if(g==null){acDebugger.systemLog("WiziCore_Api_Server_Api :: onResponce | callback for onResponce is NULL");return}if(e=="good"){var b=null;try{b=JSON.parse(d)}catch(f){acDebugger.systemLog1("api:adapterReady",f)}if(b!=null){if(b.error!=undefined){g({error:true,object:b.error})}else{g({error:false,object:b})}}else{g({error:true,object:"Error json parse"})}swirlDebugger.traceRequest(null,{uid:c,data:b},"answer")}else{g({error:true,object:d});swirlDebugger.traceRequest(null,{uid:c,data:d},"answer")}},createRequest:function(c,b){WiziCore_Api_Server_Api.sequense++;var a=WiziCore_Api_Server_Api.sequense;this._createdRequest[a]={method:c,data:b,sequense:a};return a},AdapterReady:function(){this._adapterReady=true;var a=this._queue;for(var c in a){var b=a[c];this.sendRequest(b.uid,b.callback)}},sendRequest:function(g,j){if(g==undefined||this._createdRequest[g]==undefined){throw new WiziCore_Api_Error("Need created request",WiziCore_Api_Error.ERR_NEED_REGUEST_ADAPTER)}j=(j==undefined)?null:j;if(!this._adapter.isAdapterReady()&&(this._apiAdapterError==false)){var h={uid:g,callback:j};this._queue[g]=h;return}else{if(this._apiAdapterError!=false){$(this).trigger(WiziCore_Api_Server_Api.onError,[this._apiAdapterError]);return}}var l=this;var k=this._createdRequest[g];var a=k.method;var f=k.data;if(this.type()=="json"){var d=new Array();for(var e=0;e<f.length;e++){d[e]=f[e]}var c=JSON.stringify({jsonrpc:"2.0",method:a,params:d,id:g});var b=this.loadPath();swirlDebugger.traceRequest(b,k,"send");this._adapter.sendRequest(b,c,g,function(i){delete l._createdRequest[g];delete l._queue[g];l.onResponse(i,j)})}},sendPostRequest:function(f,h){if(f==undefined||this._createdRequest[f]==undefined){throw new WiziCore_Api_Error("Need created request",WiziCore_Api_Error.ERR_NEED_REGUEST_ADAPTER)}h=(h==undefined)?null:h;if(!this._adapterReady&&(this._apiAdapterError==false)){var g={uid:f,callback:h};this._queue[f]=g;return}else{if(this._apiAdapterError!=false){$(this).trigger(WiziCore_Api_Server_Api.onError,[this._apiAdapterError]);return}}var k=this;var j=this._createdRequest[f];var a=j.method;var e=j.data;if(this.type()=="json"){var c={method:a};for(var d=0;d<e.length;d++){c[d]=e[d]}var b=this.loadPath();this._adapter.sendPostRequest(b,c,f,function(i){delete k._createdRequest[f];k.onResponse(i)})}},loadPath:function(){var a=this._baseServer;var b=a+"/";if(a.toLowerCase().indexOf("http://")==-1){b="http://"+this._type+"_api."+a+"/"}return b},baseServer:function(a){if(a!=undefined){this._baseServer=a}return this._baseServer},type:function(a){if(a!=undefined){this._type=a}return this._type},method:function(a){if(a!=undefined){this._method=a}return this._method}});WiziCore_Api_Server_Api.sequense=0;WiziCore_Api_Server_Api.onErrorCreate="Event#WiziCore_Api_Server_Api#onErrorCreate";WiziCore_Api_Server_Api.onErrorPrepare="Event#WiziCore_Api_Server_Api#onErrorPrepare";WiziCore_Api_Server_Api.onError="Event#WiziCore_Api_Server_Api#onError";WiziCore_Api_Server_Api.onAdapterStateChange="Events#WiziCore_Api_Server_Api#AdapterStateChange";WiziCore_Api_Server_Api.onAdapterResponseReady="Events#WiziCore_Api_Server_Api#AdapterResponseReady";WiziCore_Api_Server_Api.POST="POST";WiziCore_Api_Server_Api.GET="GET";var WiziCore_Api_Server_FlashAdapter=jQuery.Class.create({_adapterId:"WiziFlashAdapterId",_adapterIdTrigger:"WiziFlashAdapterIdTrigger",_adapter:null,_adapterUrl:"http://wizi.azazello.ipshps.local/wiziCore/api/server/adapter/WiziSendRequest.swf",_timer:null,_isAdapterWasReady:null,_flashVersion:"9.0.0",_requestCallbacks:null,init:function(b){if(b!=undefined){if(b.needFlashVersion!=undefined){this._flashVersion=b.needFlashVersion()}if(b.flashAdapterUrl!=undefined){this._adapterUrl=b.flashAdapterUrl()}}this._requestCallbacks={};if($("#"+this._adapterId).length==0){var a="<div style=\"width : 1px; height: 1px; font-size: 0px; position: absolute; left: -1px; top : -1px;\">\r\n    <div id=\"WiziFlashAdapterIdTrigger\" \/>\r\n<\/div>";var c=$(a);$(document.body).append(c);this._adapter=$("<div>");c.append(this._adapter);this._adapter.attr("id",this._adapterId)}this.createSwfObject(this._adapterId)},createSwfObject:function(b){$(b).empty();swfobject.embedSWF(this._adapterUrl,this._adapterId,"1","1",this._flashVersion,"","",{allowScriptAccess:"always",flashvars:"id="+this._adapterId});var a=this;this._timer=new WiziCore_Api_Timer(200,300);$(this._timer).bind(WiziCore_Api_Timer.TimerTick,function(d,c){a.isAdapterReady()});$(this._timer).one(WiziCore_Api_Timer.TimerComplete,function(d,c){$(a).trigger(WiziCore_Api_Server_Api.onAdapterStateChange,"error")});this._timer.start()},isAdapterReady:function(){this._adapter=document.getElementById(this._adapterId);if(this._adapter==null){return false}var b=false;try{if(typeof this._adapter.isReady!="function"){if(this._isAdapterWasReady==true){this.createSwfObject(this._adapterId);this._isAdapterWasReady=false}return false}b=this._adapter.isReady()}catch(c){acDebugger.systemLog1("flash:isAdapterReady",c)}if(b&&this._timer!=null){this._timer.stop();this._timer=null;var a=this;$("#"+this._adapterIdTrigger).bind("ResponseFromFlashAdapter",function(e,d){if(d.uid!=undefined){a._requestCallbacks[d.uid](d);delete a._requestCallbacks[d.uid]}$(a).trigger(WiziCore_Api_Server_Api.onAdapterResponseReady,d)});$(this).trigger(WiziCore_Api_Server_Api.onAdapterStateChange,"ready");this._isAdapterWasReady=true}return b},sendRequest:function(a,c,b,d){this._requestCallbacks[b]=d;this._adapter.sendRequest(a,c,b)},sendPostRequest:function(a,c,b,d){if(!this.isAdapterReady()){return}this._requestCallbacks[b]=d;this._adapter.sendPostRequest(a,c,b)}});function ResponseFromFlashAdapter(c,b,a){$("#WiziFlashAdapterIdTrigger").trigger("ResponseFromFlashAdapter",[{state:c,data:b,uid:a}])};var WiziCore_Api_Server_WebAdapter=jQuery.Class.create({_testedDomain:null,_clientApi:"",_timeout:40000,_defaultTimeout:40000,init:function(a){this._testedDomain={};if(a!=undefined&&a.clientApi!=undefined){this._clientApi=a.clientApi()}$(this).trigger(WiziCore_Api_Server_Api.onAdapterStateChange,"ready");this._defaultTimeout=this._timeout},timeout:function(a){if(a!==undefined){this._timeout=(a=="default")?this._defaultTimeout:a}return this._timeout},isAdapterReady:function(){$(this).trigger(WiziCore_Api_Server_Api.onAdapterStateChange,"ready");return true},sendRequest:function(a,c,b,d){this.httpRequest(a,"POST",function(e,f){var g=(f==false)?"good":"error";d({state:g,data:e,uid:b})},c,"html")},sendPostRequest:function(b,d,c,e){if(!this.isAdapterReady()){return}var a=this;$.post(b,d,function(f,h,g){e({state:h,data:f,uid:c})})},getDomain:function(c){if(typeof c!="string"){return c}var b=c.indexOf("//");if(b==-1){b=0}var a=c.indexOf("/",b+2);if(a==-1){a=c.length}return c.substring(b+2,a)},_validateNetworkState:function(a){if(!WiziCore_Helper.isPhoneGapOnline()){this.httpResponse(a,"offline",true);return false}return true},sendSimpleRequest:function(a,e,g,b,f,c,i){var h=this;if(this._validateNetworkState(g)===false){return}i=(i!=undefined)?i:{};var d={type:e,url:a,dataType:f,data:b,cache:false,timeout:i.timeout?i.timeout:this._timeout,success:function(k,l,j){h.httpResponse(g,k,false,j)},error:function(j,l,k){h.httpResponse(g,l,true,j)},beforeSend:function(k){if(c!=undefined){for(var j in c){k.setRequestHeader(j,c[j])}}}};d=jQuery.extend(i,d);$.ajax(d)},httpRequest:function(a,f,j,c,g,d,l){var b=this.getDomain(a);var e=this.getDomain(window.location.href);if(this._testedDomain[b]==undefined){this._testedDomain[b]={}}if(b!=e&&window.location.href.indexOf("file://")==-1){this._testedDomain[b].proxy=true}var i=(this._testedDomain[b]!=undefined&&this._testedDomain[b].proxy);if(f==undefined){f=WiziCore_Api_Server_Api.GET}if(g=="undefined"){g="html"}if(typeof j!="function"){return false}var k=this;if(i){a=this._clientApi+"proxy.php?swirlDestUrl="+escape(a)}try{this.sendSimpleRequest(a,f,function(m,n,o){if(!n&&o.status!=0){if(i!=true){k._testedDomain[b].direct=true}k.httpResponse(j,m,false,o)}else{k._testedDomain[b].direct=false;if(i==true){k.httpResponse(j,m,true,o)}else{a=k._clientApi+"proxy.php?swirlDestUrl="+escape(a);k.sendSimpleRequest(a,f,function(p,q,r){if(q==false){k._testedDomain[b].proxy=true;k.httpResponse(j,p,false,r)}else{k.httpResponse(j,p,true,r)}},c,g,d,l)}}},c,g,d,l)}catch(h){this._testedDomain[b].direct=false;a=k._clientApi+"proxy.php?swirlDestUrl="+escape(a);k.sendSimpleRequest(a,f,function(m,n,o){if(n==false){k._testedDomain[b].proxy=true;k.httpResponse(j,m,false,o)}else{k.httpResponse(j,m,true,o)}},c,g,d,l)}return true},httpResponse:function(f,a,b,c){try{f.call(this,a,b,c)}catch(d){WiziCore_OnErrorEvent.showError(d)}},soapRequest:function(e,f,b,a){if(window.SOAPClient!=undefined){var d=new SOAPClientParameters();for(var c in b){d.add(c,b[c])}SOAPClient.invoke(e,f,d,a,this)}},XML2JSON:function(a){var b={};try{b=$.xml2json(a)}catch(c){}return b},JSON2XML:function(b){var c=this.JSON2TEXT(b);var a=this.TEXT2XML(c);return a},TEXT2XML:function(b){var a={};try{a=$.text2xml(b)}catch(c){}return a},TEXT2JSON:function(b){var a={};try{a=JSON.parse(b)}catch(c){}return a},JSON2TEXT:function(a){var b={};try{b=JSON.stringify(a)}catch(c){}return b}});var WiziCore_Api_ClientBase=WiziCore_Api_Base.extend({_parent:null,_project:null,_id:null,_name:null,_children:null,_widget:null,_ap:null,_ep:null,_form:null,_parentLevel:null,_valName:"__value",_dataPropName:"text",_eventsHandles:null,init:function(b,c,a,e,f,d){this._super(b);if(c==undefined){if(c!=null){throw new WiziCore_Api_Error("Need parent",WiziCore_Api_Error.ERR_NEED_PARENT_OBJECT)}}if(a==undefined){throw new WiziCore_Api_Error("Need json for project",WiziCore_Api_Error.ERR_NEED_OBJECT)}this._parent=c;this.form(e);this.page(f);this.buildProjectFromJSON(a,d);if(this._project.repeat==undefined){this._project.repeat=false}this._eventsHandles={}},checkWidgetName:function(h,c){var b=h.name;if(c!=null&&typeof c.findName=="function"){var f=c.findName(b);var d=new RegExp("\\d+$");var j=b.search(d);var a=b;if(j!=-1){a=a.substring(0,j)}else{}if((f!=null)&&(f.id()!=h.id)){for(var e=1;e<999999;e++){var g=a+e;if(c.findName(g)==null){b=g;break}}}}return b},buildProjectFromJSON:function(m,f){try{this._children=null;if(m==undefined){throw new WiziCore_Api_Error("Need json for project",WiziCore_Api_Error.ERR_NEED_OBJECT)}this._project=m;if(this._project.id==undefined){this._project.id=WiziCore_Helper.generateUniqueId(36,"w")}if(this._project.name==undefined){this._project.name="widget"}if(this._project._dataPropName!=undefined){this._dataPropName=this._project._dataPropName}this._project.name=this.checkWidgetName(this._project,this.form());if(this._project.widgetClass==undefined){this._project.widgetClass="WiziCore_UI_BaseWidget"}if(this._project.actions!=undefined){if(this._project.actions instanceof Array){this._project.actions={}}else{this._actions=this._project.actions}}else{this._project.actions={}}if(this._project.items!=undefined){var g=this._project.items;var h={show:false,msg:""};for(var b in g){var c;var a=g[b].widgetClass;try{if(window[a]!=undefined){c=window[a]}else{if(h.show==false){h.show=true;h.msg=WiziCore.lang().trText("swirl_widget_base_invalid_widget")}acDebugger.systemLog("no current widget in system",g[b].widgetClass);break}}catch(d){acDebugger.systemLog1("buildProjectFromJSON::check widget class",a,d)}var l=this.createItem(g[b],f);if(c!=undefined){this.addItem(l)}}if(h.show==true){}}if(this._project.realId==undefined||(f!==true)){this._project.realId=this._project.id}var k=this.getClassProperty("valuePropName");if(k!=undefined){this._project.defaultValue=this._project[k]}}catch(j){acDebugger.systemLog1("base:buildProjectFromJSON",j)}},createItem:function(c,b){var a=new WiziCore_Api_ClientBase(this.context(),this,c,this.form(),this.page(),b);return a},clone:function(j,h){var k=jQuery.extend(false,this.project(),{});k.id=WiziCore_Widget_Base.generateUniqueId();if(j!=true){k.name=this.checkWidgetName(k,this.form())}var l=new WiziCore_Api_ClientBase(this.context(),this.parent(),k,undefined,undefined,h);if(j==true){var d=WiziCore_Helper.cloneAction(this.form(),this,l);if(d!=null){this.form().executeActions([d],l)}}var b=l.children();var f=[];var c=[];for(var e in b){var a=b[e];f.push(a);var g=a.clone(j,h);c.push(g)}for(var e in f){l.deleteItem(f[e])}for(var e in c){l.addItem(c[e])}if(b!=undefined){l.project(l.project())}return l},addItem:function(b){b.form(this.parent().form());b.page(this.parent().page());var a=this;this.children().push(b);var c=this.children().length-1;$(b).bind(WiziCore_Api_ClientBase.ADD_ITEM_EVENT,function(e,d,f){});$(b).bind(WiziCore_Api_ClientBase.DELETE_ITEM_EVENT,function(e,d,f){});$(this).trigger(WiziCore_Api_ClientBase.ADD_ITEM_EVENT,[b,c]);$(this).trigger(WiziCore_Api_ClientBase.onChangePage,[new jQuery.Event(WiziCore_Api_ClientBase.ADD_WIDGET_EVENT),b,c])},deleteItem:function(k){var e=k.prop("id");var g=-1;var a=this._children;for(var d=0,b=a.length;d<b;++d){if(a[d].prop("id")==e){g=d;break}}if(g!=-1){this._children.splice(g,1)}else{for(var c=0,h=a.length;c<h;++c){var f=a[c].deleteItem(k);if(f!=-1){g=f;break}}}$(k).unbind(WiziCore_Api_ClientBase.ADD_ITEM_EVENT);$(k).unbind(WiziCore_Api_ClientBase.DELETE_ITEM_EVENT);$(k).unbind(WiziCore_Api_ClientBase.onChangePage);$(this).trigger(WiziCore_Api_ClientBase.DELETE_ITEM_EVENT,[k,g]);$(this).trigger(WiziCore_Api_ClientBase.onChangePage,[undefined,k,g]);return g},getPropNameByLowerCase:function(a){var b=this.getPropsNames();var c=a.toLowerCase();if(b[c]!==undefined){a=b[c]}return a},getPropsNames:function(){if(this._propsNames==undefined){var f=this.getAvailableProps();var e={};for(var d in f){if(f[d].props!=undefined){var b=f[d].props}for(var a in b){var c=b[a]["name"];if(c!=undefined){e[c.toLowerCase()]=c}}}this._propsNames=e}return this._propsNames},prop:function(c,m,g){c=this.getPropNameByLowerCase(c);if(m!==undefined){if(c=="name"){if(typeof this.form=="function"&&typeof this.form().updateCodeAfterWidgetChangeName=="function"){acDebugger.systemLog("updateCodeAfterWidgetChangeName",this.id(),m);this.form().updateCodeAfterWidgetChangeName(this,m,this._project[c])}}var l=this.getPropsNames();if(l[c.toLowerCase()]!=undefined){this._project[c]=m;var e=(g==undefined||g.disableTrigger==undefined||g.disableTrigger!==true);if(e){$(this).trigger(WiziCore_Api_ClientBase.PROPERTY_CHANGE_EVENT,[c,m])}}else{this._project[c]=m}}if(this._project[c]===undefined||this._project[c]===""){var k=false;if(this.context!=undefined&&(typeof this.context=="function")){var b=this._project.widgetStyle;if(this.context().formThemeManager!=undefined&&b!=undefined){var p=this.context().formThemeManager();var f=this._project.widgetClass;var a=WiziCore_Api_ClientBase._WIZI_USE_STYLE_CONSTANT;var o=p.themeContent(this.prop("theme"))[f];if(o==undefined){o=p.themeContent(this.prop("theme"))["WiziCore_Api_Page"];if(this.page!=undefined&&this.page()!==null&&this.page().prop!=undefined){b=this.page().prop("widgetStyle")}}if(o!=undefined){var i=p.themeContent(this.prop("theme"))[f];if(i!=undefined&&i[b]!=undefined){var n=i[b]}if(n!=undefined){if(n[c]!=undefined){a=n[c]}}if((a!==WiziCore_Api_ClientBase._WIZI_USE_STYLE_CONSTANT&&(c=="font"||c=="fontColor"))){if(f!="WiziCore_Api_Page"){var d=p.themeContent(this.prop("theme"))["WiziCore_Api_Page"];if(d!=undefined&&this.page!=undefined&&this.page()!==undefined&&this.page()!==null&&this.page().prop!=undefined){b=this.page().prop("widgetStyle");if(a===""){a=this.page().prop(c);k=true}if(d[b]!=undefined){var h=d[b];if((h[c]!==undefined||h[c]!=="")&&a===""){a=h[c];k=true}}}}}if(a==undefined||a==""){if(i!=undefined&&i[b]!=undefined){var n=i[b]}if(n!=undefined){if(n[c]!=undefined){a=n[c]}}}}if(a===WiziCore_Api_ClientBase._WIZI_USE_STYLE_CONSTANT||a==""){var j=this.getEmptyProps();if(j!=undefined){if(j[c]!=undefined){a=j[c]}}}if(a!==WiziCore_Api_ClientBase._WIZI_USE_STYLE_CONSTANT){if(g!=undefined){if(typeof g=="object"){g.compute=true;if(k&&g.usePage!=undefined){g.usePage=true}}}return a}}}}if(this._project[c]===undefined){return undefined}return this._project[c]},value:function(b,c){var a=this.prop(this._valName,b);if(b!==undefined&&c!==false){$(this).trigger(WiziCore_Api_ClientBase.onChangeBaseValue,[b])}return a},valueFromWidget:function(a){return this.value(a,false)},offset:function(){var b={x:parseInt(this.prop("x")),y:parseInt(this.prop("y"))};var a=this.parent().offset();b.x=b.x+a.x;b.y=b.y+a.y;return b},traverseChildren:function(c){var d=c(this);if(d){return true}var b=this.children();for(var a=0;a<b.length;++a){var e=b[a];d=e.traverseChildren(c);if(d){return true}}return false},find:function(b){var a=null;this.traverseChildren(function(d){var c=(d.prop("id")==b);if(c){a=d}return c});return a},findName:function(b){if(this.prop("name").toUpperCase()==b.toUpperCase()){return this}else{for(var d in this.children()){var c=this.children()[d];if(c!=undefined&&typeof c.findName=="function"){var a=c.findName(b);if(a!=null){return a}}}}return null},getAvailableProps:function(){if(this._ap==null){this._ap=WiziCore.Widgets().getAvailableWidgetProperties(this.widgetClass())}return this._ap},getEmptyProps:function(){if(this._ep==null){this._ep=WiziCore.Widgets().getEmptyWidgetProperties(this.widgetClass())}return this._ep},parent:function(a){if(a!=undefined){this._parent=a;$(this).trigger(WiziCore_Api_ClientBase.onChangeParent,[a])}return this._parent},project:function(c){var a=(c!=undefined)?c:jQuery.extend(true,{},this._project);if(c==undefined){a.items=[];for(var b in this.children()){a.items.push(this.children()[b].project())}if(a.items.length==0){delete a.items}delete a[this._valName]}else{this._project=c}if(a.complexType==null){delete a.complexType}return a},id:function(){return this._project.id},realId:function(){return this._project.realId},name:function(){return this._project.name},isIncludedInSchema:function(){return this._project.isIncludedInSchema},dataType:function(){return this._project.dataType},widgetClass:function(){var a="WiziCore_UI_BaseWidget";if(this._project!=null){a=this._project.widgetClass}return a},children:function(){if(this._children==null){this._children=new Array()}return this._children},childrencount:function(){var a=0;for(var b in this.children()){a++}return a},form:function(a){if(a!=undefined){this._form=a}return this._form},page:function(a){if(a!=undefined){this._page=a}return this._page},fullNamePath:function(){return this.fullPath(this,"")},fullPath:function(d,c){var a=(typeof d.name=="function")?d.name():"";var b=(typeof d.parent=="function")?d.parent():null;if(c!=""){c="."+c}c=a+c;if(b!=null&&b.id()!=this.form().id()){c=this.fullPath(b,c)}return c},repeat:function(a){if(a!=undefined){this._project.repeat=a}return this._project.repeat},isRepeatShowOn:function(c){var f=this.repeat();if(f==false){return false}var b=f.include;var e=true;if(b!="all"){var a=f.pages;e=!b;for(var d in a){if(c==a[d]){e=b;break}}}return e},wiziHandlerAddEvent:function(a){var b=a;if(typeof a=="object"&&a.type!=undefined){b=a.type}if(this._eventsHandles[b]==undefined){this._eventsHandles[b]=0}this._eventsHandles[b]++;var c=(b!=WiziCore_Api_ClientBase.onAddEventHandler&&b!=WiziCore_Api_ClientBase.onRemoveEventHandler);if(c==true){$(this).trigger(WiziCore_Api_ClientBase.onAddEventHandler,b)}},wiziHandlerRemoveEvent:function(a){var b=a;if(typeof a=="object"&&a.type!=undefined){b=a.type}if(this._eventsHandles[b]==undefined){this._eventsHandles[b]=1}this._eventsHandles[b]--;if(this._eventsHandles[b]<0){this._eventsHandles[b]=0}var c=(b!=WiziCore_Api_ClientBase.onAddEventHandler&&b!=WiziCore_Api_ClientBase.onRemoveEventHandler);if(c==true){$(this).trigger(WiziCore_Api_ClientBase.onRemoveEventHandler,b)}},eventsHandles:function(){return this._eventsHandles},getDataModel:function(){var a=WiziCore.Widgets().getWidgetDataModel(this.widgetClass(),this);return a},getClassMethod:function(a){return this.getClassMethodExt(a,false)},getClassMethodExt:function(b,a){var c=this.widgetClass();var d=WiziCore.Widgets().getClassProperty(c,b);if(typeof d=="function"){return d}else{var f=function(){};if(a!==false){var e=WiziCore.Widgets().getClassProperty("WiziCore_UI_BaseWidget",b);if(typeof e=="function"){f=e}}return f}},hasClassMethod:function(a){return this.hasClassMethodExt(a,false)},hasClassMethodExt:function(b,a){var c=this.widgetClass();var d=WiziCore.Widgets().getClassProperty(c,b);if(typeof d=="function"){return true}else{if(a!==false){var e=WiziCore.Widgets().getClassProperty("WiziCore_UI_BaseWidget",b);if(typeof e=="function"){return true}}}return false},getClassProperty:function(b){var a=this.widgetClass();var c=WiziCore.Widgets().getClassProperty(a,b);return c},getData:function(){return this.getClassMethodExt("getData")(this)},setData:function(a){return this.getClassMethodExt("setData")(this,a)},sectionsOpeningModes:function(a){return this.getClassMethod("sectionsOpeningModes")(this,a)},collectDataSchema:function(a){return this.getClassMethod("collectDataSchema")(this,a)},appendValueToDataObject:function(a,b){return this.getClassMethod("appendValueToDataObject")(this,a,b)},setValueFromDataObject:function(a){return this.getClassMethod("setValueFromDataObject")(this,a)},getDataObjectValue:function(){var a=this.value();var b=this.getClassMethod("getDataObjectValue")(this,a);b=(b===undefined)?a:b;return b},setDataObjectValue:function(c){if(c===undefined){return}var b=this.getClassMethod("setDataObjectValue")(this,c);var a=(b===undefined)?c:b;this.value(a)},dataPropName:function(){return this._dataPropName}});WiziCore_Api_ClientBase._WIZI_USE_STYLE_CONSTANT="@#!!!WIZI_asdlkfj adsfq2df a#$%!@$%!%$Dfdagh dopidasfgf;;[[23/.,ZXCV><><?/!#@@@";WiziCore_Api_ClientBase.PROPERTY_CHANGE_EVENT="Event#ClientApi#PropertyChanghed";WiziCore_Api_ClientBase.ADD_ITEM_EVENT="Event#ClientApi#AddItem";WiziCore_Api_ClientBase.ADD_WIDGET_EVENT="Event#ClientApi#addWidgetEvent";WiziCore_Api_ClientBase.DELETE_WIDGET_EVENT="Event#ClientApi#deleteWidgetEvent";WiziCore_Api_ClientBase.DELETE_ITEM_EVENT="Event#ClientApi#DeleteItem";WiziCore_Api_ClientBase.onChangePage="Event#ClientApi#ChangePage";WiziCore_Api_ClientBase.onChangeParent="Event#ClientApi#ChangeParent";WiziCore_Api_ClientBase.onChangeBaseValue="Event#ClientApi#onChangeBaseValue";WiziCore_Api_ClientBase.onAddEventHandler="Event#ClientApi#onAddEventhandler";WiziCore_Api_ClientBase.onRemoveEventHandler="Event#ClientApi#onRemoveEventhandler";WiziCore_Api_ClientBase.onSelectValue="Event#WiziCore_Api_ClientBase#onSelectValue";WiziCore_Api_ClientBase.onSetValue="Event#WiziCore_Api_ClientBase#onSetValue";WiziCore_Api_ClientBase.simpleConstDataSchema=function(c,a,d){if(!c.isIncludedInSchema()){return undefined}var b={label:c.name(),type:WiziCore_Api_ClientForm.Kind.SIMPLE,structure:a};d[c.realId()]=b;return b};WiziCore_Api_ClientBase.simpleDataSchema=function(b,c){var a=b.dataType()||WiziCore_Api_ClientForm.Type.STRING;return WiziCore_Api_ClientBase.simpleConstDataSchema(b,a,c)};WiziCore_Api_ClientBase.simpleDataObjectValue=function(c,a,b){if(!b&&!c.isIncludedInSchema()){return undefined}a[c.realId()]=c.value();return true};WiziCore_Api_ClientBase.getValueFromDataObject=function(b,a){var c=(typeof a=="object")&&a!=null;return(c)?a[b.realId()]:null};WiziCore_Api_ClientBase.setDataObjectValueSimple=function(d,b,a){if(!d.isIncludedInSchema()){return}var c=WiziCore_Api_ClientBase.getValueFromDataObject(d,b);if(c===null){var e=d.prop("defaultValue");if(e!==undefined){c=e}else{if(a!==undefined){c=a}}}if(c!==undefined){d.value(c)}};var WiziCore_Api_ClientForm={};WiziCore_Api_ClientForm.ADD_PAGE_EVENT="Event#WiziCore_Api_ClientForm#AddPage";WiziCore_Api_ClientForm.DELETE_PAGE_EVENT="Event#WiziCore_Api_ClientForm#DeletePage";WiziCore_Api_ClientForm.ADD_REPEATE_EVENT="Event#WiziCore_Api_ClientForm#AddRepeate";WiziCore_Api_ClientForm.DELETE_REPEATE_EVENT="Event#WiziCore_Api_ClientForm#DeleteRepeate";WiziCore_Api_ClientForm.SHOW_PAGE="Event#WiziCore_Api_ClientForm#ShowPage";WiziCore_Api_ClientForm.onChangeTheme="Event#WiziCore_Api_ClientForm#onChangeTheme";WiziCore_Api_ClientForm.onShowNextPage="Event#WiziCore_Api_ClientForm#onShowNextPage";WiziCore_Api_ClientForm.onShowPrevPage="Event#WiziCore_Api_ClientForm#onShowPrevPage";WiziCore_Api_ClientForm.onShowPageByNum="Event#WiziCore_Api_ClientForm#onShowPageByNum";WiziCore_Api_ClientForm.onShowPage="Event#WiziCore_Api_ClientForm#onShowPage";WiziCore_Api_ClientForm.onShowCallingPage="Event#WiziCore_Api_ClientForm#onShowCallingPage";WiziCore_Api_ClientForm.onClosing="Event#WiziCore_Api_ClientForm#onClosing";WiziCore_Api_ClientForm.onClose="Event#WiziCore_Api_ClientForm#onClose";WiziCore_Api_ClientForm.onSubmit="Event#WiziCore_Api_ClientForm#onSubmit";WiziCore_Api_ClientForm.onStorageChanged="Event#WiziCore_Api_ClientForm#onStorageChanged";WiziCore_Api_ClientForm.onPageStackClear="Event#WiziCore_Api_ClientForm#onPageStackClear";WiziCore_Api_ClientForm.onPageStackBack="Event#WiziCore_Api_ClientForm#onPageStackBack";WiziCore_Api_ClientForm.onPageStackForward="Event#WiziCore_Api_ClientForm#onPageStackForward";WiziCore_Api_ClientForm.Type={STRING:"String",INTEGER:"Integer",REAL:"Real",BOOLEAN:"Boolean",DATE:"Date"};WiziCore_Api_ClientForm.Kind={SIMPLE:"Simple",OBJECT:"Object",LIST:"List",OBJECT_LIST:"ObjectList"};WiziCore_Api_ClientForm.DEFAULT_LIST_KEY="_";WiziCore_Api_ClientForm.MANDATORY_FORM_WIDGETS=1;WiziCore_Api_ClientForm.MANDATORY_ARRAY_WIDGETS=2;WiziCore_Api_ClientForm.MANDATORY_BOTH=3;WiziCore_Api_ClientForm.ACTION_CODE_TYPE_AE="ActionEditor";WiziCore_Api_ClientForm.ACTION_CODE_TYPE_JS="Javascript";WiziCore_Api_ClientForm.ACTION_CODE_TYPE_EMPTY="No Handler";WiziCore_Form=function(){this.id_form=null;this.id_user=null;this.version=null;this.name=null;this.pages=null;this.id_folder=null;this.repeates=null;this.children=null;this.queries=null;this.theme="_default";this.actions={userCode:"",genCode:"",system:[]};this.pageTarget=null;this.redirectUrl=null;this.defaultPage=0;this.backgroundImage=null;this.backgroundColor=null;this.backgroundRformMepeat=null;this.facebookName=null;this.hasStorage="None";this.instanceTitleTemplate="";this.dataSchema=null;this.applicationRelationships=null;this.integrityHandling="message";this.uniquenessMessage="";this.mandatoryMessage="";this.views=[];this.loginFormId=null;this.renderCharts=null;this.highlightOpacity=20;this.highlightColor=null;this.validateMessage=null;this.liveName=null;this.workflow=null;this.shortUrl=null;this.gaAccountId=null;this.mobileSplash=null;this.desktopSplash=null;this.twirlyThingOptions=null};WiziCore_ApplicationRelationship=function(){this.id_relation=null;this.name=null;this.type=null;this.toApplication=null};WiziApp_InstanceRelationData=function(){this.relationName=null;this.removed=null;this.added=null};WiziApp_ForeignAppChange=function(){this.action=null;this.key=null;this.data=null;this.tempKey=null};WiziApp_FormInstance=function(){this.id_content=null;this.id_form_instance=null;this.title=null;this.base_id_content=null;this.form_version=null;this.action=null;this.content=null;this.widget_state=null;this.time_created=null;this.id_user=null;this.id_form=null;this.status=null;this.lock_id_user=null;this.lock_until=null};WiziCore_Folder=function(){this.id_folder=null;this.title=null;this.parent=null;this.id_user=null};WiziCore_User=function(){this.username=null;this.password=null;this.id=null;this.login=null;this.type=null;this.role=null;this.group=null;this.removed=null};WiziCore_Identifier=function(){this.id_identifier=null;this.name=null;this.params=null};WiziCore_Widget=function(){this.id=null;this.name=null;this.state=false;this.section=null;this.icon=null;this.code=null};WiziCore_Page=function(){this.id=null;this.name=null;this.childrens=new Array();this.width=null;this.height=null;this.bgColor=null;this.shadow=null;this.font=null;this.centered=false;this.widgetStyle="default"};WiziCore_Resource=function(){this.id_resource=null;this.id_user=null;this.id_folder=null;this.name=null;this.url=null;this.original=null;this.filename=null;this.ticket=null;this.type=null};WiziCore_Theme=function(){this.id_theme=null;this.id_user=null;this.name=null;this.id_folder=null};WiziReport_Connection=function(){this.id_connection=null;this.name=null;this.params=null;this.id_user=null;this.id_folder=null;this.type=null;this.id_data_agent=null};WiziReport_View=function(){this.filter=[];this.name="";this.queryId=null;this.viewId=null;this.enable=true;this.inputs={};this.outputs={}};WiziCore_Group=function(){this.id_group=null;this.name=null};WiziReport_Query_Join=function(){this.tableLeft=null;this.tableRight=null;this.joinExpression=null;this.joinType=null;this.table=null;this.alias=null;this.inputs=[];this.outputs=[]};WiziReport_Query_Table=function(){this.table=null;this.alias=null;this.inputs=[];this.outputs=[]};WiziReport_Query=function(){this.id_query=null;this.id_folder=null;this.name=null;this.type="Select";this.join=null};WiziReport_Request=function(){this.viewId=null;this.queryId=null;this.inputs=null;this.outputs=null;this.groupBy=null;this.orderBy=null;this.interval=null;this.params=null};WiziReport_Query_Field=function(a,b){this.name=a;this.value=b};WiziReport_DataAgent=function(){this.id_data_agent=null;this.name=null;this.id_user=null;this.id_folder=null;this.type=null;this.params=null};var WiziCore_Api_Connection=WiziCore_Api_Base.extend({_connectionType:"Database",_connectionName:"Connection",_connectionId:"Connection",_userId:null,_folderId:null,_params:null,_idDataAgent:null,init:function(a){this._super(a);this._params={};this._dataSources=[]},connectionType:function(a){if(a!=undefined){this._connectionType=a}return this._connectionType},connectionName:function(a){if(a!=undefined){this._connectionName=a}return this._connectionName},connectionId:function(a){if(a!=undefined){this._connectionId=a}return this._connectionId},userId:function(a){if(a!==undefined){this._userId=a}return this._userId},folderId:function(a){if(a!==undefined){this._folderId=a}return this._folderId},idDataAgent:function(a){if(a!=undefined){this._idDataAgent=a}return this._idDataAgent},xml:function(c){c=$(c)[0];var a=c.nodeName.toLowerCase();if(a!="connection"){return}for(var d in c.attributes){var f=c.attributes[d];var b=f.nodeName;var e=f.nodeValue;switch(b){case"id":this.connectionId(e);break;case"type":this.connectionType(e);break;case"name":this.connectionName(e);break;default:this._params[b]=e;break}}},json:function(d){if(d!=undefined){for(var b in d){var g=d[b];switch(b){case"id_connection":this.connectionId(g);break;case"id_data_agent":this.idDataAgent(g);break;case"type":this.connectionType(g);break;case"name":this.connectionName(g);break;case"id_user":this.userId(g);break;case"id_folder":this.folderId(g);break;case"params":for(var c in g){this._params[c]=g[c]}break;case"data_sources":var a=[];for(var c in g){var f=new WiziCore_Api_Query(this.context(),this,g[c].name);f.inputs(g[c].input);f.outputs(g[c].output);f.params(g[c].params);a.push(f)}this.dataSources(a);break;default:this._params[b]=g;break}}}var e=new WiziReport_Connection();e.id_connection=this.connectionId();e.id_folder=this.folderId();e.id_user=this.userId();e.name=this.connectionName();e.params=this._params;e.type=this.connectionType();e.id_data_agent=this.idDataAgent();return e},param:function(a,b){if(b!=undefined){this._params[a]=b}return this._params[a]},params:function(a){if(a!==undefined){this._params=a}return this._params}});WiziCore_Api_Connection.Database="Database";WiziCore_Api_Connection.WebService="WebService";var WiziCore_Api_Query=WiziCore_Api_Base.extend({_id_query:null,_id_folder:null,_name:null,_mainTable:null,_type:null,init:function(){this._super()},json:function(b){if(b!=undefined){this.name(b.name);this.queryId(b.id_query);this.folderId(b.id_folder);this.join(b.join);this.type(b.type)}var a={};a.name=this.name();a.id_query=this.queryId();a.id_folder=this.folderId();a.type=this.type();a.join=this.join();return a},name:function(a){if(a!==undefined){this._name=a}return this._name},type:function(a){if(a!==undefined){this._type=a}return this._type},queryId:function(a){if(a!==undefined){this._id_query=a}return this._id_query},folderId:function(a){if(a!==undefined){this._id_folder=a}return this._id_folder},join:function(a){if(a!==undefined){this._join=a}return this._join}});var WiziCore_Api_ClientView=WiziCore_Api_Base.extend({_form:null,_project:null,_filters:null,_binds:null,_loads:null,init:function(a,b){this._binds=[];this._loads=[];this._project=b;this._form=a;this._filters={}},project:function(){return this._project},queryId:function(){return this._project.queryId},enable:function(a){if(a!=undefined){this._project.enable=a}if(this._project.enable===undefined){this._project.enable=true}return this._project.enable},_callCallbacks:function(c,d){for(var b=0,a=this._binds.length;b<a;b++){this._binds[b]["callback"].call(this._binds[b]["obj"],c,d)}},removeCallback:function(c,d){var e=false;for(var b=0,a=this._binds.length;b<a;b++){if(this._binds[b]["callback"]==c&&this._binds[b]["obj"]==d){e=b;break}}if(e!==false){this._binds.splice(b,1)}},isLoadCallbackExist:function(b,d){for(var c=0,a=this._loads.length;c<a;c++){if(this._loads[c]["callback"]==b&&d==this._loads[c]["obj"]){return true}}return false},loadData:function(s,g,b,d,e){if(typeof e=="function"){this._binds.push({callback:e,obj:g})}if(typeof d=="function"&&!this.isLoadCallbackExist(d,g)){this._loads.push({callback:d,obj:g})}if(!this.enable()){b.call(g,true);return}var a=s;for(var r in a){if(!(a[r] instanceof Array)){continue}for(var o=0,n=a[r].length;o<n;o++){var m=(a[r][o]!=undefined&&a[r][o]["value"]!=undefined)?a[r][o]["value"]:a[r][o];if(typeof m!="string"){continue}var t=this._form.getTimeZone();var q=(new Date()).getTimezoneOffset();var u=(q<=0)?" + ":" - ";var p=(t<=0)?" + ":" - ";var j=(q<=0)?" - ":" + ";if(m.match(/datetolocale/i)){if(m.match(/interval/i)==null){a[r][o].value=m.replace(/((datetolocale)\([\w\W]*)(\))/i,"$1"+u+"interval '"+Math.abs(q)+"' minute)")}}if(m.match(/datetortz/i)){if(m.match(/interval/i)==null){a[r][o].value=m.replace(/((datetortz)\([\w\W]*)(\))/i,"$1"+p+"interval '"+Math.abs(t)+"' minute)")}}if(m.match(/datetoutc/i)){if(m.match(/interval/i)==null){a[r][o].value=m.replace(/((datetoutc)\([\w\W]*)(\))/i,"$1"+j+"interval '"+Math.abs(q)+"' minute)")}}}}var f=this._buildRequest(a);var a=f[0];if(a.outputs.length<1){b.call(g,true);return}var c=this.context().dataIntegration();var h=this;this._traceData(g,a,undefined,"send");c.loadData(a,undefined,true,function(l,k,i){h._traceData(g,{object:k,error:l},undefined,"answer");h._onDataReceived(l,k,f[1],b,g)})},_onDataReceived:function(h,e,a,j,d){if(h==false){var c=e.result.data;if(e&&typeof e.result=="object"&&e.result.data instanceof Array&&e.result.data.length>0){var g=c[0];for(var f=0,b=g.length;f<b;++f){if(g[f] in a){g[f]=a[g[f]]}}}j.call(d,false,c,e.result.rowsCount)}else{j.call(d,true)}},_processOutputs:function(f){var d=this.context().dataObject();var c=[];var e=[];var a={};for(var b in f){if(!f[b].value||f[b].value.length==0){continue}var g=d.processString(this._form,f[b].value);if(a[g]==undefined){c.push(g);e[g]=f[b].value;a[g]=true}}return[c,e]},_processInputs:function(a,c,d){var b=[];this._addInputs(b,this.getGeneralFilter());if(c){this._addInputs(b,this.getFilters([d]))}this._addInputs(b,a);return b},_addInputs:function(e,b){if(b==undefined){return}var d=this.context().dataObject();for(var c=0,a=b.length;c<a;c++){e.push(d.processString(this._form,b[c]))}},_processGroupBy:function(e){var d=this.context().dataObject();var c=[];if(e!=undefined){for(var b=0,a=e.length;b<a;b++){if(e[b]!=""){c.push(d.processString(this._form,e[b]))}}}return c},_processOrderBy:function(e){var d=this.context().dataObject();var c=[];if(e!=undefined){for(var b=0,a=e.length;b<a;b++){if(e[b].value!=""){c.push({direction:((e[b].asc)?"asc":"desc"),field:d.processString(this._form,e[b].value)})}}}return c},_getGlobalParams:function(){return this.context().getSession().getDataAgentParams()},params:function(a){if(a!=undefined){this._project.params=a}return this._project.params},_buildRequest:function(e){var c=new WiziReport_Request();c.queryId=this._project.queryId;outputRes=this._processOutputs(e.outputs);c.outputs=outputRes[0];c.interval=e.interval;c.inputs=this._processInputs(e.inputs,e.listen,e.id);c.groupBy=this._processGroupBy(e.groupBy);c.orderBy=this._processOrderBy(e.orderBy);var d=this.params();var b=this._getGlobalParams();c.params=[];if(d!==undefined){for(var a in d){c.params.push(d[a])}}if(b!==undefined){for(var a in b){c.params.push(b[a])}}return[c,outputRes[1]]},_addBindCallback:function(c){var d=false;for(var b=0,a=this._binds.length;b<a;b++){if(this._binds[b]==c){d=true;break}}if(!d){this._binds.push(c)}},_loadCallback:function(){},applyDrillDown:function(a,b,c){if(c==true){this._filters={}}if(typeof b=="string"){b=[b]}this._filters[a]=b;this._form.onDrillDown(this._project.name,a,b,((c)?true:false));this._callCallbacks(a,c)},resetFilter:function(){this._filters={};this._callCallbacks(undefined,true)},getGeneralFilter:function(b){var e=[];if(this._project.filter instanceof Array){var a=this._project.filter.length;for(var c=0;c<a;c++){var d=this._project.filter[c];if(d==""){continue}e.push(d)}}return e},getFilters:function(a){var e=[];for(var c in this._filters){if(WiziCore_Helper.inArray(c,a)){continue}if(this._filters[c] instanceof Array){var f=true;for(var b in this._filters[c]){var d=this._filters[c][b];if(d==""){continue}e.push(d);f=false}}}return e},reload:function(){this._callLoadCallbacks()},_callLoadCallbacks:function(){for(var b=0,a=this._loads.length;b<a;b++){this._loads[b]["callback"].call(this._loads[b]["obj"])}},_traceData:function(a,c,b,d){swirlDebugger.traceLoadDataRequest(a,c,b,d)},loadQueryAndExtractAppId:function(e){var d=this.queryId();var b=this.context().queries();var a=this;if(b.queries()[d]==undefined){b.loadQuery(d,function(f,g){var h=null;if(!f){h=a.extractAppIdFromQuery(g)}WiziCore_Helper.callCallback(e,[h])})}else{var c=b.queries()[d];appId=this.extractAppIdFromQuery(c);WiziCore_Helper.callCallback(e,[appId])}},extractAppIdFromQuery:function(c){var d=null;if(c.join().joinType=="table"){var a=c.join().table;var b=a.split(".");if(b.length==2&&b[0]==WiziCore_Api_ConnectionRequester.RDB_CONNECTION_ID){d=b[1]}}return d}});WiziCore_Api_ClientView.onFilterUpdated="Events#WiziCore_Api_ClientView#onFilterUpdated";WiziCore_Api_ClientView.onReload="Events#WiziCore_Api_ClientView#onReload";WiziCore_Api_ClientView.CRUD={DB:1,RDB:2};var WiziCore_Api_ClientFormInstance=WiziCore_Api_Base.extend({_project:null,init:function(a,b){this._project=a;if(b!=undefined){this._project.id_form=b}},id:function(){return this._project.id_form_instance},formId:function(){return this._project.id_form},project:function(){var c=this.formId();var b=this.context().forms().forms()[c];var a=b.version();this._project.form_version=a||0;this._project.content=this.collectDataObject();this._project.title=this.generateTitle(this._project.content);this._project.widgets_state=this.collectWidgetsState();this._project.status=WiziCore_Api_ClientFormInstance.STATUS_NORMAL;return this._project},collectWidgetsState:function(){var c=this.formId();var a=this.context().forms().forms()[c];var b={};a.traverseAll(function(l){var j=l.getAvailableProps();var f=l.realId();b[f]={};for(var h in j){if(j[h].props!=undefined){var e=j[h].props;for(var d in e){var k=e[d];var g=e[d]["name"];if(g!=undefined){if(k.persistent!=undefined&&k.persistent==true){b[f][g]=l.prop(g)}}}}}});return b},restoreWidgetsState:function(b){var a=this._project.widgets_state;if(typeof a!="object"){return}b.traverseAll(function(k){var e=k.realId();var j=a[e];var h=k.getAvailableProps();for(var g in h){if(h[g].props!=undefined){var d=h[g].props;for(var c in d){var f=d[c]["name"];if(f!=undefined){k.prop(f,j[f])}}}}})},collectDataObject:function(){var m=this.formId();var b=this.context().forms().forms()[m];var d={};var c=b.pages();for(var f=0;f<c.length;++f){var k=c[f];var l=k.widgets();for(var e=0;e<l.length;++e){var h=l[e];h.appendValueToDataObject(d)}}var g=b.repeates();for(var f=0;f<g.length;++f){var a=g[f];a.appendValueToDataObject(d)}return d},applyDataObject:function(b){var d=this._project.content;var c=b.pages();for(var f=0;f<c.length;++f){var k=c[f];var l=k.widgets();for(var e=0;e<l.length;++e){var h=l[e];h.setValueFromDataObject(d)}}var g=b.repeates();for(var f=0;f<g.length;++f){var a=g[f];a.setValueFromDataObject(d)}},generateTitle:function(b){var i=this.formId();var a=this.context().forms().forms()[i];var l=a.instanceTitleTemplate();var k=[];var g=/\{.*?\}/;var h={};a.traverseAll(function(n){var m=n.realId();if(b[m]!=undefined){h[n.name()]=m}});while(true){var d=g.exec(l);if(d==null){k.push(l);break}else{var c=l.search(g);var e=l.substring(0,c);k.push(e);var j=d[0].substring(1,d[0].length-1);var f=h[j];if(f!=undefined){k.push(b[f])}l=l.slice(c+d[0].length)}}return k.join("")},submit:function(a,g,b){acDebugger.systemLog("submitting",a);var f=this.context().formInstances();var e=this.project();var c=e.id_form_instance;var d=(a||(c==null));if(d){e.id_form_instance=null}acDebugger.systemLog("data to submit: ",e);f.submitFormInstance(d,e,g,b)},saveDraft:function(){}});WiziCore_Api_ClientFormInstance.createNewInstance=function(b){var a=new WiziApp_FormInstance();return new WiziCore_Api_ClientFormInstance(a,b.id())};WiziCore_Api_ClientFormInstance.STATUS_NORMAL=1;WiziCore_Api_ClientFormInstance.STATUS_DELETED=2;var WiziCore_Api_FormInstanceInfo=WiziCore_Api_Base.extend({_id:null,_version:null,_contentId:null,_stageId:null,init:function(a){if(a!=undefined){this._id=a.id_form_instance;this._version=a.version;this._contentId=a.id_content;this._stageId=a.stage}},id:function(){return this._id},version:function(){return this._version},contentId:function(){return this._contentId},stageId:function(){return this._stageId}});WiziCore_Api_FormInstanceInfo.Status={NORMAL:1,DELETED:2};var WiziCore_ObjectChooserTypes={WIDGET:"widget_type",PAGE:"page_type",MYDETAILS:"mydetails_type",VIEW:"view_type",QUERY:"query_type",APP:"application_type",CONNECTION:"connection_type",THEME:"theme_type",RESOURCE:"resource_type",USER:"user_type",ENVIRONMENT:"environment_type",SIMPLE_EXPRESSION:"simple_Expression",WIDGET_ARRAY:"widget_array",APP_INSTANCE:"app_instance"};var WiziCore_UI_FormRuntime=WiziCore_Api_Base.extend({_form:null,_mode:null,_wnd:null,_session:null,_pageId:null,_visualizer:null,_vuid:null,_interval:null,_firstStateProject:null,_embedRunTimes:null,_id:null,init:function(b,a){this._super.apply(this,arguments);this._mode=b;this._embedRunTimes=[];if(a){this.wnd(a)}},beforeSwitchShow:function(){this.stop();this.pageId(null)},switchShow:function(b,a,c){if(this.wnd()!=null){this.wnd().empty()}this.show(b,a,this.wnd(),c)},loadMode:function(c,b){if(this.wnd()){if(c==true){b=(b==undefined)?{}:b;var a=(b.mode!=undefined)?b.mode:"transparent";WiziCore_Helper.loadMode(this.wnd(),a,b.text,b.color,b.bgColor,b.opacity,b.over,b.image)}else{WiziCore_Helper.loadMode(this.wnd(),false)}}},reOpen:function(){this.stop();var a=this._firstStateProject;var c=this.context().forms();var b=this;var d=WiziCore_Helper.clone(a.formProject);var e=WiziCore_Helper.clone(a.instanceProj);c._populateCurrentFormResult(d,e,function(f,i,g,h){if(f==false){b.show(g,h,b.wnd(),a.param,false)}})},addEmbedRuntime:function(a){this._embedRunTimes.push(a)},isRunning:function(c){var a=this.context().formRunTime(),b=false;for(var d in a){if(a[d].id()==c){b=true;break}}return b},show:function(f,c,e,g,d){var b=this;if(f==null||f==undefined){throw new WiziCore_Api_Error("Need form",WiziCore_Api_Error.ERR_NEED_OBJECT)}this._id=f.runTimeId();this.loadMode(false);if(d!==false){var h={};h.formProject=f.clone();h.instanceProj=WiziCore_Helper.clone(c);h.param=g;this._firstStateProject=h}this.form(f);this.form().runtimeMode(this._mode);if(e==null||e==undefined){throw new WiziCore_Api_Error("Need object",WiziCore_Api_Error.ERR_NEED_OBJECT)}this.wnd(e);if(this._mode==WiziCore_UI_FormRuntime.PREVIEW_MODE){if(g.visualizer!==undefined){this.visualizer(g.visualizer)}else{throw new WiziCore_Api_Error("Need visualizer",WiziCore_Api_Error.ERR_NEED_OBJECT)}if(g.pageId!==undefined){this.pageId(g.pageId)}else{throw new WiziCore_Api_Error("Need pageId",WiziCore_Api_Error.ERR_NEED_OBJECT)}this.context().formRunTime(this.id(),this)}else{if(g.pageId!==undefined){this.pageId(g.pageId)}if(g.session!==undefined){this.session(g.session);this.context().formRunTime(this.id(),this);this.visualizer(new WiziCore_Visualizer(this.session()))}else{throw new WiziCore_Api_Error("Need session",WiziCore_Api_Error.ERR_NEED_OBJECT)}}if(f.prop("hasStorage")!="None"){if(c!=null){this.form().applyInstance(c)}}var a=this.vuid();if(a==null){a=this.visualizer().startVisualize(this.form(),this.wnd(),WiziCore_Visualizer.RUN_MODE);this.vuid(a)}this.visualizer().showPage(this.vuid(),this.pageId());if(f.parentApp()==null){WiziCore_Address_History.clearCache();$(WiziCore_Address_History).bind(WiziCore_Address_History.onChanged+"."+this.id(),function(i,j){b.onHistoryChanged(i,j)})}switch(this._mode){case WiziCore_UI_FormRuntime.PREVIEW_MODE:e.focus();break;case WiziCore_UI_FormRuntime.LIVE_MODE:break}$(f).trigger(WiziCore_Api_Form.onAppStarted);$(f.parentApp()).trigger(WiziCore_Api_Form.onEmbedAppStarted);this.setIntervalSaveDraft()},onHistoryChanged:function(g,f){var l=f.pathNames;var j=(l[0]!=undefined)?l[0]:null,c=this.form(),k=null;if(l.length==2){var a=(l[0]!=undefined)?l[0]:null;j=(l[1]!=undefined)?l[1]:null;var b=this.context().forms().forms();for(var e in b){var h=b[e];if(h.id()==a||h.liveName()==a){k=h.id();break}}}if(k!=null&&(c.id()!=k)){var d={appId:k};(j!=null)?d.pageName=j:null;c.switchApp(d)}else{if(j!=null){c.pageJump(j)}}},vuid:function(a){if(a!==undefined){this._vuid=a}return this._vuid},setIntervalSaveDraft:function(){var a=this;var b=this.form().prop("hasStorage");b=(typeof b=="string")?(b!="None"):b;if(b){acDebugger.systemLog("storage = TRUE")}},clearIntervalSaveDraft:function(){clearInterval(this._interval)},stop:function(){var c=this._embedRunTimes,b=(this.form()&&this.form().parentApp()==null);for(var d=0,a=c.length;d<a;d++){c[d].stop()}if(this.visualizer()){this.visualizer().stopVisualize(this.vuid());this.clearIntervalSaveDraft()}this.context().dropFormRunTime(this.id());this.vuid(null);if(!b){$(WiziCore_Address_History).unbind(WiziCore_Address_History.onChanged+"."+this.id())}},visualizer:function(a){if(a!=undefined){this._visualizer=a}return this._visualizer},wnd:function(a){if(a!=undefined){this._wnd=a}return this._wnd},form:function(a){if(a!=undefined){this._form=a}return this._form},session:function(a){if(a!=undefined){this._session=a}return this._session},pageId:function(b){if(b!==undefined){this._pageId=b}else{if(this._mode==WiziCore_UI_FormRuntime.LIVE_MODE&&this._pageId==null){var a=this.form().pages();acDebugger.systemLog("pages.length ",a.length);var c=this.form().prop("defaultPage");if(a[c]!=undefined){this._pageId=a[c].id()}else{if(a.length>0){this._pageId=a[0].id()}}}}return this._pageId},id:function(){return this._id}});WiziCore_UI_FormRuntime.PREVIEW_MODE="preview";WiziCore_UI_FormRuntime.LIVE_MODE="live";WiziCore_UI_FormRuntime.onFormShow="Events#WiziCore_UI_FormRuntime#FormShow";var TZDate=jQuery.Class.create({_isUTC:false,_isRTZ:false,init:function(b){var a=this;this._base=new Date();this._localZone=this._base.getTimezoneOffset();this._timeZone=this._base.getTimezoneOffset();this._type="locale";if(b!=undefined&&$.isArray(b)){a._type=b[0];b.splice(0,1);this.initialDate(b)}},toString:function(){var a="";if(this._type=="utc"){a=this.dtDateToString("UTCDateTime","DOW Month D Y HH:MM:SS TX",this._base,"utc")}else{if(this._type=="rtz"){a=this.dtDateToString("RTZDateTime","DOW Month D Y HH:MM:SS TX",this._base,"rtz")}else{if(this._type=="locale"){a=this.dtDateToString("localeDateTime","DOW Month D Y HH:MM:SS TX",this._base,"locale")}}}return a},toLocaleString:function(){ret=this.dtDateToString("localeDateTime","DOW Month D Y HH:MM:SS TX",this._base,"locale");return ret},dtAdjust:function(b){var a=this;if(b==null){return a}if(typeof b=="string"){if(b=="locale"){if(a._type=="utc"){a._base.setMinutes(a._base.getMinutes()-a._localZone)}else{if(a._type=="rtz"){a._base.setMinutes(a._base.getMinutes()-a._localZone+a._timeZone)}}a._timeZone=x.getTimezoneOffset();a._type="locale"}else{if(b=="utc"){if(a._type=="locale"){a._base.setMinutes(a._base.getMinutes()+a._localZone)}else{if(a._type=="rtz"){a._base.setMinutes(a._base.getMinutes()+a._timeZone)}}a._timeZone=0;a._type="utc"}else{if(b=="rtz"){if(a._type=="locale"){a._base.setMinutes(a._base.getMinutes()+a._localZone-a._timeZone)}else{if(a._type=="utc"){a._base.setMinutes(a._base.getMinutes()-a._timeZone)}}a._type="rtz"}}}}else{if(a._type=="rtz"){a._base.setMinutes(a._base.getMinutes()+a._timeZone-parseInt(b))}a._timeZone=parseInt(b)}},dtAdd:function(c,e){var a=this;if(c==null){return a}e=parseInt(e);if(c=="Y"){a._base.setFullYear(a._base.getFullYear()+e)}else{if(c=="M"){a._base.setMonth(a._base.getMonth()+e)}else{if(c=="W"){a._base.setDate(a._base.getDate()+e*7)}else{if(c=="D"){a._base.setDate(a._base.getDate()+e)}else{if(c=="H"){a._base.setHours(a._base.getHours()+e)}else{if(c=="m"){a._base.setMinutes(a._base.getMinutes()+e)}else{if(c=="S"){a._base.setSeconds(a._base.getSeconds()+e)}else{if(c=="X"){var d=parseInt(e/5);var b=e-5*d;a._base.setDate(a._base.getDate()+7*d);if(b+a._base.getDay()>5){a._base.setDate(a._base.getDate()+(b+2))}else{a._base.setDate(a._base.getDate()+b)}}}}}}}}}return a},dtDifference:function(c,e){var d=0;var f=this._base-c._base;var b=1000;if(e==null){return d}if(e=="Y"){d=parseInt(this._base.getFullYear()-c._base.getFullYear())}else{if(e=="M"){var i=this._base.getMonth();var h=c._base.getMonth();var a=parseInt(this._base.getFullYear()-c._base.getFullYear());d=a*12-(i-h)}else{if(e=="W"){d=f.valueOf()/(b*60*60*24*7)}else{if(e=="D"){d=f.valueOf()/(b*60*60*24)}else{if(e=="H"){d=f.valueOf()/(b*60*60)}else{if(e=="m"){d=f.valueOf()/(b*60)}else{if(e=="S"){d=f.valueOf()/b}else{if(e=="X"){var g=this.dtDifference(c,"D");d=Math.round(g)-7*Math.round(g/7)+Math.round(g/7)*5}}}}}}}}return d},dtDateToString:function(m,f,d,l){var n=m.match(/(locale)*(RTZ)*(UTC)*(Date)*(Time)*/);var a=(n[1]!==undefined)?true:false;var i=(n[2]!==undefined)?true:false;var c=(n[3]!==undefined)?true:false;var h=(n[4]!==undefined)?true:false;var g=(n[5]!==undefined)?true:false;var e=new Date(this._base);var b=new Date(this._base);var k=this._type;if(d!=undefined){e=new Date(d)}if(l!=undefined){k=l}if(k=="utc"){e.setMinutes(e.getMinutes()-this._localZone);b.setMinutes(b.getMinutes()-this._localZone)}else{if(k=="rtz"){b.setMinutes(b.getMinutes()+this._timeZone-this._localZone)}else{if(k=="locale"){}}}var j=f.replace(/SS/g,(g)?((c)?this.pad(e.getUTCSeconds()):this.pad(e.getSeconds())):"00");j=j.replace(/(?=\b)MM\b/g,(g)?((c)?this.pad(e.getUTCMinutes()):this.pad(e.getMinutes())):"00");j=j.replace(/(?=\b)HH\b/g,(g)?((c)?this.pad(e.getUTCHours()):this.pad(e.getHours())):"00");j=j.replace(/(?=\b)Y\b/g,(h)?((c)?e.getUTCFullYear():e.getFullYear()):"0000");j=j.replace(/(?=\b)DOW\b/g,(h)?((c)?this.getDayOfWeek(e.getUTCDay()):this.getDayOfWeek(e.getDay())):"DOW");j=j.replace(/(?=\b)Month\b/g,(h)?((c)?this.getMonthName(e.getUTCMonth()+1):this.getMonthName(e.getMonth()+1)):"Month");j=j.replace(/(?=\b)M\b/g,(h)?((c)?this.pad(e.getUTCMonth()+1):this.pad(e.getMonth()+1)):"00");j=j.replace(/(?=\b)D\b/g,(h)?((c)?this.pad(e.getUTCDate()):this.pad(e.getDate())):"00");j=j.replace(/(?=\b)TZ\b/g,(c)?this.getTimeZoneString(0):(a)?this.getTimeZoneString(this._localZone):this.getTimeZoneString(this._timeZone));j=j.replace(/(?=\b)TX\b/g,(c)?this.getTimeZoneGMTString(0):(a)?this.getTimeZoneGMTString(this._localZone):this.getTimeZoneGMTString(this._timeZone));j=j.replace(/(?=\b)LOCALE\b/g,b.toLocaleString());return j},toLocaleString:function(){return this.dtDateToString("localDateTime","LOCALE")},pad:function(a){return(a<10)?"0"+a:a},getTimeZoneString:function(c){var b="";if(c>0){b+="-"}else{b+="+"}var a=Math.abs(c);b+=this.pad(Math.ceil(a/60));b+=this.pad(a-(Math.ceil(a/60)*60));return b},getTimeZoneGMTString:function(c){var b="GMT";if(c>0){b+="-"}else{b+="+"}var a=Math.abs(c);b+=this.pad(Math.ceil(a/60));b+=this.pad(a-(Math.ceil(a/60)*60));return b},getDayOfWeek:function(b){var a=["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"];return a[b]},getMonthName:function(b){var a=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];return a[b-1]},initialDate:function(c){var b=this;var a=c;b._base=(c.length==7)?new Date(a[0],a[1],a[2],a[3],a[4],a[5],a[6]):(c.length==6)?new Date(a[0],a[1],a[2],a[3],a[4],a[5]):(c.length==5)?new Date(a[0],a[1],a[2],a[3],a[4]):(c.length==4)?new Date(a[0],a[1],a[2],a[3]):(c.length==3)?new Date(a[0],a[1],a[2]):(c.length==2)?new Date(a[0],a[1]):(c.length==1)?new Date(a[0]):(c.length==0)?new Date():null;b._localZone=b._base.getTimezoneOffset();b._timeZone=this.getTimeZone();if(b._type=="locale"){b._isUTC=false;b._isRTZ=false}else{if(b._type=="rtz"){b._isUTC=false;b._isRTZ=true;b._base.setMinutes(b._base.getMinutes()-b._timeZone+b._localZone)}else{if(b._type=="utc"){b._isUTC=true;b._isRTZ=false;b._base.setMinutes(b._base.getMinutes()+b._localZone)}}}},getTimeZone:function(){return this._timeZone},setTimeZone:function(a){if(a!=undefined){this._timeZone=a}}});var WiziCore_Api_Timer=jQuery.Class.create({_currentCount:0,_delay:0,_repeatCount:0,_running:false,_timerHandler:null,init:function(b,a){if(b!=undefined){this._delay=b;if(a!=undefined){this._repeatCount=a}}},stop:function(){if(this._timerHandler!=null){clearInterval(this._timerHandler);this._timerHandler=null;this._running=false}},reset:function(){this.stop();this._currentCount=0},start:function(){if(this.running()){this.stop()}var a=this;this._timerHandler=setInterval(function(){a._currentCount++;$(a).trigger(WiziCore_Api_Timer.TimerTick,a.currentCount());if(a.repeatCount()!=0&&a.currentCount()==a.repeatCount()){a.stop();$(a).trigger(WiziCore_Api_Timer.TimerComplete,a.currentCount())}},this.delay())},currentCount:function(){return this._currentCount},running:function(){return this._running},delay:function(a){if(this.running()){return this._delay}if(a!=undefined){this._delay=a}return this._delay},repeatCount:function(a){if(this.running()){return this._repeatCount}if(a!=undefined){this._repeatCount=a}return this._repeatCount}});WiziCore_Api_Timer.TimerTick="Events#WiziCore_Api_Timer#Tick";WiziCore_Api_Timer.TimerComplete="Events#WiziCore_Api_Timer#Complete";var WiziCore_WidgetScripts={_scriptList:null,_reg:"([^/]+\\.js)",initList:function(){this._scriptList={};var a=this;$("script").each(function(d,c){var e=$(c);var b=new RegExp(a._reg,"ig");var f=b.exec(e.attr("src"));if(f!=null){a._scriptList[f[0]]=true}})},getScripts:function(g,h){if(g&&!WiziCore_AppContext.getInstance().isDevelop()){var f=this._scriptList;var j=this;var e=true;for(var d=0,b=g.length;d<b;d++){var a=new RegExp(j._reg,"ig");var c=a.exec(g[d]);if(c!=null){c=c[0];if(f[c]==undefined){e=false;f[c]=false;this._getScript(g[d],c,h)}else{}}else{}}if(e){h(true)}}else{h(false)}},_getScript:function(a,c,d){var b=this._scriptList;a=WiziCore_AppContext.getInstance().config().clientApi()+a;$.getScript(a,function(h,e){if(e=="success"){b[c]=true}else{b[c]="error"}var g=0;for(var f in b){if(b[f]==false&&g==0){g=1;break}if(b[f]=="error"){g=2;break}}if(g==0){d(true)}else{if(g==1){}else{if(g==2){d(false)}}}})}};var WiziCore_Api_Color=jQuery.Class.create({ok:false,r:0,g:0,b:0,_transparent:false,_isNone:false,simple_colors:{aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"},init:function(g){if(g==undefined){g="#000000";this._isNone=true}if(typeof g!="string"){g="#000000";this._isNone=true}g=g.replace(/ /g,"");g=g.toLowerCase();if(g=="transparent"){this._transparent=true;g="#000000"}if(g.charAt(0)=="#"){g=g.substr(1,6)}for(var c in this.simple_colors){if(g==c){g=this.simple_colors[c]}}var h=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(i){return[parseInt(i[1]),parseInt(i[2]),parseInt(i[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(i){return[parseInt(i[1],16),parseInt(i[2],16),parseInt(i[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(i){return[parseInt(i[1]+i[1],16),parseInt(i[2]+i[2],16),parseInt(i[3]+i[3],16)]}}];for(var b=0;b<h.length;b++){var e=h[b].re;var d=h[b].process;var f=e.exec(g);if(f){var a=d(f);this.r=a[0];this.g=a[1];this.b=a[2];this.ok=true}}this.r=(this.r<0||isNaN(this.r))?0:((this.r>255)?255:this.r);this.g=(this.g<0||isNaN(this.g))?0:((this.g>255)?255:this.g);this.b=(this.b<0||isNaN(this.b))?0:((this.b>255)?255:this.b)},toInt:function(){return this.getReturnVal((256*256*this.r+256*this.g+this.b))},toRGB:function(){return this.getReturnVal("rgb("+this.r+", "+this.g+", "+this.b+")")},toHex:function(){var d=this.r.toString(16);var c=this.g.toString(16);var a=this.b.toString(16);if(d.length==1){d="0"+d}if(c.length==1){c="0"+c}if(a.length==1){a="0"+a}return this.getReturnVal("#"+d+c+a)},getInvertHex:function(){var a=this.toHex().slice(1);this.r=255-parseInt(a.slice(0,2),16),this.g=255-parseInt(a.slice(2,4),16),this.b=255-parseInt(a.slice(4,6),16);return this.toHex()},rgbToGray:function(){var a=Math.round((0.3*this.r)+(0.59*this.g)+(0.11*this.b));this.r=a;this.g=a;this.b=a;return this.toHex()},redValue:function(){return this.r},greenValue:function(){return this.g},blueValue:function(){return this.b},transparent:function(){return this._transparent},isNone:function(){return this._isNone},getReturnVal:function(a){if(this.transparent()){a="transparent"}if(this.isNone()){a=null}return a}});var WiziCore_Api_Debugger=jQuery.Class.create({_debug:true,_open:false,_chashed:false,_timeDebug:{},_requests:{},_requestsData:{},_openMode:0,_dlg:null,_debugContent:null,_template:"<div>\n    <div id=\"deBugsDlg\">\n        <ul>\n            <li><a href=\"#deBugsDlgerror\">Debug info<\/a><\/li>\n            <li><a href=\"#deBugsDlgdatarequest\">Data request<\/a><\/li>\n            <li><a href=\"#deBugsDlgallrequest\">All request<\/a><\/li>\n        <\/ul>\n\n        <div id=\"deBugsDlgerror\" style=\"width: 100%; height: 100%; overflow: auto;\">\n            \n        <\/div>\n\n        <div id=\"deBugsDlgdatarequest\" style=\"width: 100%; height: 100%; overflow: auto;\">\n            <table style=\"width: 100%; vertical-align: top;\" border=\"1\">\n                <tr id=\"deBugsDlgdatarequesttable\">\n                    <td>Base info<\/td>\n                    <td>Request<\/td>\n                    <td>Response<\/td>\n                    <td>Debug<\/td>\n                <\/tr>\n            <\/table>\n        <\/div>\n\n        <div id=\"deBugsDlgallrequest\" style=\"width: 100%; height: 100%; overflow: auto;\">\n            \n        <\/div>\n    <\/div>\n<\/div>",_systemLogMode:false,_profiling:false,init:function(){if(this._debug){var a=this;this.initDebugContent();this.initTimeDebug()}},initDebugContent:function(){var a=$(this._template);this._debugContent=a},openMode:function(a){if(a!=undefined){this._openMode=a}return this._openMode},openDebugWindow:function(a){this._open=true;var b=this._dlg;var c=this._debugContent;if(b!=null){b.dialog("open")}else{this.debugWindow();b=this._dlg;b.append(c);c.find("#deBugsDlg").tabs().css({width:c.parent().find(".ui-dialog-content").width(),height:c.parent().find(".ui-dialog-content").height()-50})}if(a!=undefined){c.find("#deBugsDlg").tabs("select",a)}},hideDebugWindow:function(){if(this._dlg!=null){this._dlg.dialog("close")}},debugWindow:function(){var c=$("<div>");this._dlg=c;var a=this;var b=jQuery.extend({modal:false,height:500,width:600,title:"Debugger",resizable:true,zIndex:2000,resize:function(d,e){c.find("#deBugsDlg").css({width:c.parent().find(".ui-dialog-content").width(),height:c.parent().find(".ui-dialog-content").height()-50})},close:function(d,e){a._open=false},buttons:{Close:function(){c.dialog("close")},Clear:function(){if(!c.find("#deBugsDlgerror").hasClass("ui-tabs-hide")){c.find("#deBugsDlgerror").empty()}if(!c.find("#deBugsDlgallrequest").hasClass("ui-tabs-hide")){c.find("#deBugsDlgallrequest").empty()}if(!c.find("#deBugsDlgdatarequest").hasClass("ui-tabs-hide")){c.find("#deBugsDlgdatarequest").find("tr:gt(0)").remove()}}},dialogClass:"wa-system-dialog wa-system-style"},{});$(document.body).append(c);c.dialog(b);c.parent().find(".ui-icon-closethick").css({height:15,width:15})},logTime:function(b,e){var a=new Date();var c=a.getTime();if(e!=undefined){var d=c-e;this.log("message",b,"time",c,"delta",d)}else{this.log("message",b,"start time",c)}return c},traceLoadDataRequest:function(d,e,k,o){var f=d.id();var c=d.name();var m=d.widgetClass();var p=this;if(o=="send"){var l=$("<tr>");l.attr("id","db_"+f+k);var q=$("<td>");var j=$("<td>");var b=$("<td>");var n=$("<td>");l.append(q);l.append(j);l.append(b);l.append(n);q.append($("<p>").text("Object name: "+c));q.append($("<p>").text("Object id: "+f));q.append($("<p>").text("Object class: "+m));q.append($("<p>").text("Date and time: "+(new Date()).format("isoDateTime")));j.append(p.getHtmlFromObject(e));var h=$("<div>");h.html("<font color='red'>Wait response</font>");h.attr("id","db_"+f+"_answ_"+k);b.append(h);h.toggle();l.insertAfter("#deBugsDlgdatarequesttable")}else{var i=$("#db_"+f+k);var a=$("#db_"+f+"_answ_"+k);if(e.error==true){i.find("td:first").css({"border-color":"red","background-color":"red",color:"white"});a.html(p.getHtmlFromObject(e.object.result));if(this.openMode()==WiziCore_Api_Debugger.MODE_AUTO_OPEN){this.openDebugWindow(1)}}else{if(e.object.result.debug!=undefined){i.find("td:eq(3)").text(e.object.result.debug.toString())}var g=e.object.result.data;a.html($("<p>").click(function(){$(this).parent().html(p.getHtmlFromObject(g))}).text("Click for show responce"))}}},traceRequest:function(b,d,j,i){if(i==undefined){i="system"}var h=d.sequense;if(j=="answer"){h=d.uid}if(this._requests[h]==undefined){this._requests[h]={}}var k=this;this._requests[h][j]={data:d,url:b};if(this._debugContent!=null){var c=this._debugContent.find("#deBugsDlgallrequest");if(j=="send"){var a=$("<div style='border : 1px solid black; margin-bottom : 1px;'>");a.attr("id","deBugsDlgallrequest"+h);var g=$("<div>");g.attr("id","deBugsDlgallrequest"+h+"send");var f=$("<div>");f.attr("id","deBugsDlgallrequest"+h+"answer");f.hide();a.append($("<a href='#' style='margin-right : 10px;'>").click(function(){$(this).parent();g.show();f.hide()}).text("Send"));a.append($("<a href='#'>").click(function(){if($(this).attr("init")==undefined){if(k._requests[h]["answer"]!=undefined){var l=this;setTimeout(function(){$(l).attr("init",true)},1);f.html("Initing...")}else{f.html("<font color='red'>No answer</font>")}}f.show();g.hide()}).text("Answer"));a.append($("<p>").text(b));var e="";g.append(e);a.append(g);a.append(f);c.append(a)}else{if(j=="answer"){}}}},getHtmlFromObject:function(b){var d=typeof b;var a=$("<span>");switch(d){case"object":for(var c in b){var f=this.getHtmlFromObject(b[c]);var e=$("<div style='margin-left : 5px;'>");e.click(function(g){$(this).children("span").toggle();g.preventDefault();g.stopPropagation()});a.append(e.text(c+" : ").append(f))}break;case"function":break;default:a.html(b);break}return a},reloadCss:function(){var a=$("link.wiziapp");var b=a.attr("href");a.attr("href",b+"?1")},assert:function(){if(this.consoleSupport()){try{if(console!=undefined){console.assert.apply(console,arguments)}}catch(a){this._chashed=true}}},consoleSupport:function(){return(jQuery.browser.mozilla||jQuery.browser.webkit)},log:function(){if(this._debug){var g=this.consoleSupport();var d=arguments;if(!g){var a=arguments.length;d="";try{for(var b=0;b<a;b++){d+=JSON.stringify(arguments[b])+";"}}catch(c){d+="Debugger error :: too much recursion"}}try{if(console!=undefined){console.log(d)}}catch(f){this._chashed=true}}},log1:function(){if(this._debug){var a=this.consoleSupport();var c=[];for(var e=0,b=arguments.length;e<b;++e){if(arguments[e] instanceof TypeError||arguments[e] instanceof ReferenceError){c.push(arguments[e].stack)}c.push(arguments[e])}var c=[];if(!a){var f=arguments.length;var g="";for(var e=0;e<f;e++){var h=typeof arguments[e];if(h=="object"){for(var d in arguments[e]){g+=d+" : "+arguments[e][d]+","}}else{g+=arguments[e]}g+=";"}c=g}else{for(var e=0,b=arguments.length;e<b;++e){if(arguments[e] instanceof TypeError||arguments[e] instanceof ReferenceError){c.push(arguments[e].stack)}c.push(arguments[e])}}try{if(console!=undefined){console.log(c)}}catch(j){this._chashed=true}}},log2helper:function(h){var a=arguments.length;var g="";for(var d=1;d<a;d++){var e=typeof arguments[d];switch(e){case"function":case"number":case"boolean":g+=arguments[d];break;case"string":g+='"'+arguments[d]+'"';break;case"object":if(arguments[d]==null){g+="null";break}if(arguments[d]==undefined){g+="undefined";break}var b=(arguments[d] instanceof Array);var c=false;if(b==true){g+="["}else{g+="{"}for(var f in arguments[d]){if(h>2){g+=f+" : "+arguments[d][f]+", "}else{g+=f+" : "+this.log2helper(h+1,arguments[d][f])+", "}c=true}if(c==true){g=g.substring(0,g.length-2)}if(b==true){g+="]"}else{g+="}"}break;default:break}g+=";"}return g},initTimeDebug:function(){this._timeDebug=[];this.timeDebug("timeDebug.initialized")},timeDebug:function(c){var a=new Date();var b=a.getTime();var e=0;if(this._timeDebug[this._timeDebug.length-1]!=undefined){var d=this._timeDebug[this._timeDebug.length-1].time;if(d!=undefined){e=b-d}}this._timeDebug.push({message:c,time:b,delta:e})},showTimeDebug:function(){for(var a in this._timeDebug){debuger.log(this._timeDebug[a])}},getTimeDebug:function(){return this._timeDebug},systemLog:function(){if(this.systemLogMode()){this.log.apply(this,arguments)}},systemLog1:function(){if(this.systemLogMode()){this.log1.apply(this,arguments)}},dir:function(){if(console&&console.dir){console.dir(arguments)}},profile:function(){if(this._profiling==false&&console){this._profiling=true;console.profile()}},profileEnd:function(){if(console){this._profiling=false;console.profileEnd()}},systemLogMode:function(a){if(a!=undefined){this._systemLogMode=a}return this._systemLogMode},_getSystemLogModeFromUrl:function(a){var d=a.parent;var b=null;try{b=d.location.href}catch(c){d=null;b=null}if(d!=undefined&&b!=undefined&&d!=a){return this._getSystemLogModeFromUrl(d)}if(a.location!=undefined&&a.location.href!=undefined){return(a.location.href.search("[?&]?"+WiziCore_Api_Debugger.SYSTEM_LOG_MODE+"[#=&]?\\b")!=-1)?true:false}else{return this.systemLogMode()}}});WiziCore_Api_Debugger.MODE_AUTO_OPEN=0;WiziCore_Api_Debugger.MODE_USER_OPEN=1;WiziCore_Api_Debugger.SYSTEM_LOG_MODE="debug";$(document).ready(function(){debuger=new WiziCore_Api_Debugger();acDebugger=debuger;swirlDebugger=debuger;acDebugger.systemLogMode(acDebugger._getSystemLogModeFromUrl(window))});var Error=new function(a){var b=(window.console&&a&&(new a).stack)?function(f){var h=new a(f);var g=function(k,j,i){d();if(c&&c.apply(this,arguments)){return true}if((h.message!=k)||(h.fileName!=j)||(h.lineNumber!=i)){return}var e=h.stack.split("\n");e=e.slice(2,e.length-1);e[0].replace(/^.*\(.+?\)@(.+):(\d+)$/,function(n,m,l){h.fileName=m;h.lineNumber=Number(l)});e[e.length-1]=e[e.length-1].replace(/^@.+:\d+$/,function(l){return"source file()"+l});h.stack=e.join("\n");if(console!=undefined){console.error(h)}if(debuger!=undefined&&typeof debuger.log1=="function"){debuger.log1(h)}return true};var c=window.onerror;var d=function(){if(window.onerror===g){window.onerror=c}};window.onerror=g;setTimeout(d,1);return h}:a;Export:return b;Usage:throw new b("custom error")}(window.Error);var WiziCore_Api_DataIntegrationRequester=WiziCore_Api_Base.extend({init:function(a){this._super(a)},getDBListTables:function(a){},onGetDBListTables:function(a){var c=a.error;var b=a.object;$(this).trigger(WiziCore_Api_DataIntegrationRequester.getDBListTables,[c,b])},onLoadConnectionSchema:function(a,d){var c=a.error;var b=a.object;$(this).trigger(WiziCore_Api_DataIntegrationRequester.onLoadConnectionSchema,[c,b]);if(d!=undefined){d(c,b.result)}},loadConnectionSchema:function(b,c,d){var a=this;this.apiRequest("getConnectionSchema",[b,c],function(f,e){a.onLoadConnectionSchema(e,d)})},testConnection:function(b,c){var a=this;this.apiRequest("testConnection",[b],function(e,d){a.onTestConnection(d,c)})},onTestConnection:function(a,d){var c=a.error;var b=a.object;if(typeof d=="function"){d(c,b)}$(this).trigger(WiziCore_Api_DataIntegrationRequester.onTestConnection,[c,b])},loadConnectionTypes:function(){var a=this;this.apiRequest("getConnectionTypes",[],function(c,b){a.onLoadConnectionTypes(b)})},onLoadConnectionTypes:function(a){var c=a.error;var b=a.object;$(this).trigger(WiziCore_Api_DataIntegrationRequester.onLoadConnectionTypes,[c,b])},loadConnectionTypeParameters:function(b){var a=this;this.apiRequest("getConnectionTypeParameters",[b],function(d,c){a.onLoadConnectionTypeParameters(c)})},onLoadConnectionTypeParameters:function(a){var c=a.error;var b=a.object;$(this).trigger(WiziCore_Api_DataIntegrationRequester.onLoadConnectionTypeParameters,[c,b])},loadData:function(d,c,b,e){var a=this;this.apiRequest("getData",[d,b],function(g,f){a.onLoadData(f,c,e)})},onLoadData:function(a,d,e){var c=a.error;var b=a.object;if(e!=undefined){e(c,b,d)}$(this).trigger(WiziCore_Api_DataIntegrationRequester.onLoadData,[c,b,d])},loadDataPreview:function(c,d,b,e){var a=this;this.apiRequest("getDataPreview",[c,d],function(g,f){a.onLoadDataPreview(f,b,e)})},onLoadDataPreview:function(a,c,f){var e=a.error;var b=a.object;var d=(e==true)?b:null;$(this).trigger(WiziCore_Api_DataIntegrationRequester.onLoadDataPreview,[e,b,c]);b=(d==null)?b.result:null;if(f!=undefined){f(d,b,c)}},lookupDatabases:function(b,c){var a=this;this.apiRequest("lookupDatabases",[b],function(e,d){a.onLookupDatabases(d,c)})},onLookupDatabases:function(a,d){var c=a.error;var b=a.object;if(typeof d=="function"){d(c,b)}$(this).trigger(WiziCore_Api_DataIntegrationRequester.onLookupDatabases,[c,b])}});WiziCore_Api_DataIntegrationRequester.onLoadConnectionTypes="Events#WiziCore_Api_DataIntegrationRequester#LoadConnectionTypes";WiziCore_Api_DataIntegrationRequester.onLoadConnectionTypeParameters="Events#WiziCore_Api_ConnectionRequester#onLoadConnectionTypeParameters";WiziCore_Api_DataIntegrationRequester.onTestConnection="Events#WiziCore_Api_DataIntegrationRequester#onTestConnection";WiziCore_Api_DataIntegrationRequester.onLoadConnectionSchema="Events#WiziCore_Api_DataIntegrationRequester#onLoadConnectionSchema";WiziCore_Api_DataIntegrationRequester.getDBListTables="Events#WiziCore_Api_DataIntegrationRequester#getDBListTables";WiziCore_Api_DataIntegrationRequester.onLoadData="Events#WiziCore_Api_DataIntegrationRequester#onLoadData";WiziCore_Api_DataIntegrationRequester.onLookupDatabases="Events#WiziCore_Api_DataIntegrationRequester#onLookupDatabases";WiziCore_Api_DataIntegrationRequester.onLoadDataPreview="Events#WiziCore_Api_DataIntegrationRequester#onLoadDataPreview";var WiziCore_Api_FormRequester=WiziCore_Api_Base.extend({_forms:null,_formFolders:null,init:function(){this._super.apply(this,arguments);this._forms={}},createForm:function(b,c){var a=this;this.apiRequest("createForm",[b],function(e,d){a.onFormCreated(d,c)})},buildMobileApp:function(c,b,d){var a=this;this.apiRequest("buildMobileApp",[c,b],function(f,e){a.onBuildMobileApp(e,d)})},onBuildMobileApp:function(a,d){var c=a.error;var b=a.object;if(typeof d=="function"){d(c,b)}},getMobileAppBuildStatus:function(b,c){var a=this;this.apiRequest("getMobileAppBuildStatus",[b],function(e,d){a.onGetMobileAppBuildStatus(d,c)})},onGetMobileAppBuildStatus:function(a,d){var c=a.error;var b=a.object;if(typeof d=="function"){d(c,b)}},onFormCreated:function(a,f){var c=a.error;var b=a.object;if(a.error){}else{var e={project:b.result,level:2};var d=new WiziCore_Api_Form(e);this.forms()[d.id()]=d}if(typeof f=="function"){f(c,b)}$(this).trigger(WiziCore_Api_FormRequester.onCreated,[c,b])},openForm:function(b,d,e,c){var a=this;this.apiRequest("getForm",[b],function(i,f){var h=f.object;var g=f.error;if(!g){a.addLoginFormToForms(h.result.loginFormId,function(){if(d){a.onFormOpened(f,b,e,c)}else{a.loadTheme(f,b,e,c)}})}else{$(a).trigger(WiziCore_Api_FormRequester.onOpen,[g,f]);if(typeof e=="function"){e(g,f)}}})},openFormVersionInEditor:function(d,a,c,e){var b=this;this.loadFormVersion(d,a,function(g,f){if(!g){if(c){b.onFormOpened(f,d,e,WiziCore_Visualizer.EDITOR_MODE)}else{b.loadTheme(f,d,e,WiziCore_Visualizer.EDITOR_MODE)}}else{$(b).trigger(WiziCore_Api_FormRequester.onOpen,[g,f]);if(typeof e=="function"){e(g,f)}}})},loadFormVersion:function(b,a,c){this.apiRequest("getFormRevision",[b,a],function(f,d){var e=d.error;if(typeof c=="function"){c(e,d)}})},loadTheme:function(j,f,d,e){var g=j.error;var c=j.object;var h=this;if(!g){var i=0;var a=this.context().formThemeManager();$(a).one(WiziCore_Api_ThemeRequester.onLoaded,function(m,l,k){i++;if(!l){if(i==2){i=3;h.onFormOpened(j,f,d,e)}}else{$(h).trigger(WiziCore_Api_FormRequester.onOpen,[l,j]);if(typeof d=="function"){d(l,j)}}});var b=c.result.theme;if(typeof b=="object"&&b.id!=undefined){b=b.id}a.loadTheme(b);a.loadThemeContent(b,function(k,l){i++;if(i==2){i=3;h.onFormOpened(j,f,d,e)}if(k){$(h).trigger(WiziCore_Api_FormRequester.onThemeContextLoadError)}})}else{$(this).trigger(WiziCore_Api_FormRequester.onOpen,[g,j]);if(typeof d=="function"){d(g,j)}}},onFormOpened:function(a,d,h,g){var c=a.error;var b=a.object;if(!c){var e=this.forms()[d];if(e==undefined||g==WiziCore_Visualizer.RUN_MODE){var f={project:b.result,level:0,mode:g};var e=new WiziCore_Api_Form(f);this.forms()[d]=e}else{e.level(0);if(g!=undefined){e.mode(g)}e.project(b.result)}$(this).trigger(WiziCore_Api_FormRequester.onOpen,[c,e]);if(typeof h=="function"){h(c,e)}}else{$(this).trigger(WiziCore_Api_FormRequester.onOpen,[c,a]);if(typeof h=="function"){h(c,a)}}},addLoginFormToForms:function(b,c){var a=this;if(b===undefined||a.forms()[b]!==undefined){c()}else{this.apiRequest("getForm",[b],function(g,d){var f=d.error;var e=d.object;if(!f){a.addForms([e.result])}c()})}},deleteForm:function(b){var a=this;this.apiRequest("deleteForm",[b],function(d,c){a.onFormDeleted(c,b)})},onFormDeleted:function(a,e){var d=a.error;var c=a.object;if(d==false){var b=this.forms();if(b[e]!=undefined){b[e].destroy();delete b[e]}}$(this).trigger(WiziCore_Api_FormRequester.onDeleted,[d,c])},saveForm:function(a,c){if(this.forms()[a]!=undefined){var b=this.forms()[a].project();this.saveFormJson(b,c)}else{this.onFormSaved({error:true,object:{message:"Form not found"}})}},saveFormJson:function(b,c){var a=this;this.apiRequest("saveForm",[b],function(e,d){a.onFormSaved(d,c)})},onFormSaved:function(a,d){var c=a.error;var b=a.object;$(this).trigger(WiziCore_Api_FormRequester.onSaved,[c,b]);if(d!=undefined){d(c,b)}},loadFormList:function(){var a=this;this.apiRequest("getUserForms",[],function(c,b){a.onFormListLoaded(b)})},onFormListLoaded:function(l){var b=l.object;if(l.error==true||b.result==null){$(this).trigger(WiziCore_Api_FormRequester.onError,[b])}else{this.addForms(b.result);var a=this.forms();var c=b.result;var h=[];var g=this.context().dataObject().getValue("User.Id");for(var e in a){var k=((a[e].level()==2)||(a[e].userId()!=g));for(var d in c){var f=c[d];if(typeof(f)=="object"&&e==f.id_form){k=false}}if(k&&e!=undefined){h.push(e)}}for(var e in h){delete this._forms[h[e]]}}$(this).trigger(WiziCore_Api_FormRequester.onListLoaded,[this._forms])},addForms:function(d){for(var b=0,a=d.length;b<a;b++){if(typeof(d[b])=="object"&&this.forms()[d[b].id_form]==undefined){var c=new WiziCore_Api_Form({project:d[b],level:2});this.forms()[c.id()]=c}}},getLoginFormId:function(b){try{var a=this;this.apiRequest("getLoginFormId",[b],function(g,d){var f=d.object;var e=d.error;$(a).trigger(WiziCore_Api_FormRequester.onGetLoginFormId,[e,f])})}catch(c){acDebugger.systemLog1("session:getLoginFormId",c)}},loadFormFolderList:function(){var a=this;var b=this.context().folders();$(b).one(WiziCore_Api_FoldersRequester.onFoldersLoaded+WiziCore_Api_FoldersRequester.FORM,function(c,d){a.onFormFolderListLoaded(d)});b.loadFolderList(WiziCore_Api_FoldersRequester.FORM)},onFormFolderListLoaded:function(a){this._formFolders=a;$(this).trigger(WiziCore_Api_FormRequester.onFolderListLoaded,[a])},createFormFolder:function(c,b){var a=this;var d=this.context().folders();if(b){$(d).one(WiziCore_Api_FoldersRequester.onCreatePublicFolder+WiziCore_Api_FoldersRequester.FORM,function(g,f,e){a.onFormFolderCreated(f,e)});d.createPublicFolder(WiziCore_Api_FoldersRequester.FORM,c)}else{$(d).one(WiziCore_Api_FoldersRequester.onCreated+WiziCore_Api_FoldersRequester.FORM,function(g,f,e){a.onFormFolderCreated(f,e)});d.createFolder(WiziCore_Api_FoldersRequester.FORM,c)}},onFormFolderCreated:function(b,a){$(this).trigger(WiziCore_Api_FormRequester.onFolderCreated,[b,a])},deleteFormFolder:function(c,b,d){var a=this;var e=this.context().folders();if(d){$(e).one(WiziCore_Api_FoldersRequester.onDeleted+WiziCore_Api_FoldersRequester.FORM,function(h,g,f){a.onFormFolderDeleted(g,f)});e.deletePublicFolder(WiziCore_Api_FoldersRequester.FORM,c,b)}else{$(e).one(WiziCore_Api_FoldersRequester.onDeleted+WiziCore_Api_FoldersRequester.FORM,function(h,g,f){a.onFormFolderDeleted(g,f)});e.deleteFolder(WiziCore_Api_FoldersRequester.FORM,c,b)}},onFormFolderDeleted:function(b,a){$(this).trigger(WiziCore_Api_FormRequester.onFolderDeleted,[b,a])},saveFormFolder:function(b){var a=this;var c=this.context().folders();$(c).one(WiziCore_Api_FoldersRequester.onSaved+WiziCore_Api_FoldersRequester.FORM,function(f,e,d){a.onFormFolderSaved(e,d)});c.saveFolder(WiziCore_Api_FoldersRequester.FORM,b)},onFormFolderSaved:function(b,a){$(this).trigger(WiziCore_Api_FormRequester.onFolderSaved,[b,a])},forms:function(){if(this._forms==null){this._forms={}}return this._forms},_populateFormResult:function(a,b){if(a.form!==null&&typeof a.form=="object"){this.populateCurrentFormResult(a,a.form,b)}else{if(a.loginForm!==null&&typeof a.loginForm=="object"){this.populateCurrentFormResult(a,a.loginForm,b)}}},populateCurrentFormResult:function(e,c,f){var b=this.context();var a=b.formThemeManager();var d=e.instance;a.onThemeLoaded({error:false,object:{result:e.theme}},e.theme.id_theme);a.onThemeContentLoaded(e.theme.id_theme,false,e.themeContent);this._populateCurrentFormResult(c,d,f)},_populateCurrentFormResult:function(c,d,e){var a=this;var b=this.context();a.onFormOpened({error:false,object:{result:c}},c.id_form,function(g,i){var h=i.prop("hasStorage");h=(typeof h=="string")?(h!="None"):h;if(!h||d==null){e(false,"",i,null)}else{if(d!=null){var f=b.formInstances();try{f.onFormInstanceLoaded({error:false,object:{result:d}},d.id_form_instance,function(n,l,k){if(n==true){var m=(k.object!=undefined)?k.object.message:WiziCore.lang().tr("swirl_live_load_inst_error");e(true,m,i,k)}else{e(false,"",i,k)}})}catch(j){acDebugger.systemLog1("live::formLoaded",j)}}}},WiziCore_Visualizer.RUN_MODE)},getFormIdByLiveName:function(b,c){var a=this;this.apiRequest("getFormIdByLiveName",[b],function(e,d){a.onGetFormIdByLiveName(d,c)})},onGetFormIdByLiveName:function(a,d){var c=a.error;var b=a.object;if(typeof d=="function"){d(c,b)}},openFormInLiveMode:function(e,c){var b="liveMode_"+WiziCore_Helper.generateUniqueId();var d="live.php?";if(c!=undefined&&c!=""&&c!=null){d=c}else{d+="formId="+e}var a=open(d,b,"status=0,toolbar=0,resizable=1,menubar=0,location=0,directories=0,scrollbars=1");acDebugger.systemLog("window.parent",window.parent);a.focus();return a},getFormRevisionsList:function(a,b){this.apiRequestNorm("getFormRevisionsList",[a],function(d,c){if(typeof b=="function"){b(d,c)}})}});WiziCore_Api_FormRequester.onSaved="Events#WiziCore_Api_FormClient#FormSaved";WiziCore_Api_FormRequester.onListLoaded="Events#WiziCore_Api_FormClient#ListLoaded";WiziCore_Api_FormRequester.onCreated="Events#WiziCore_Api_FormClient#Form#Created";WiziCore_Api_FormRequester.onDeleted="Events#WiziCore_Api_FormClient#Form#Deleted";WiziCore_Api_FormRequester.onOpen="Events#WiziCore_Api_FormClient#Form#Opened";WiziCore_Api_FormRequester.onFolderListLoaded="Events#WiziCore_Api_FormClient#Folder#ListLoaded";WiziCore_Api_FormRequester.onFolderCreated="Events#WiziCore_Api_FormClient#Folder#Created";WiziCore_Api_FormRequester.onFolderDeleted="Events#WiziCore_Api_FormClient#Folder#Deleted";WiziCore_Api_FormRequester.onFolderSaved="Events#WiziCore_Api_FormClient#Folder#Saved";WiziCore_Api_FormRequester.onError="Events#WiziCore_Api_FormClient#Error";WiziCore_Api_FormRequester.onGetLoginFormId="Events#WiziCore_Api_FormClient#onGetLoginFormId";WiziCore_Api_FormRequester.onThemeContextLoadError="Events#WiziCore_Api_FormClient#onThemeContextLoadError";var WiziCore_Api_SessionRequester=WiziCore_Api_Base.extend({_token:null,_error:"",_dataAgentParams:[],init:function(){this._super(this);WiziCore.registerExtendsObject(this,this)},onSessionCreated:function(d,a,g){var c=a.error;var e=a.object;var b=d.data.self;if(c){b._token=null;WiziCore.cookie().cookie("swirlSession",null);b._error=e}else{if(e.result!=null){b._token=e.result}else{c=true;b._error={message:"Error autentification",code:-1}}}if(c==true){if(typeof g=="function"){g(b._token,c)}$(b).trigger(WiziCore_Api_SessionRequester.onCreated,[b._token,c])}else{var f=b.context().userSettings();f.loadSettings(function(){var h=b.context().users();h.loadUserBySession(function(j,i){b.context().dataObject().setUserDetails(i);$(b).trigger(WiziCore_Api_SessionRequester.onCreated,[b._token,c]);if(typeof g=="function"){g(b._token,j)}})});b.context().accounts().loadIdentsParams()}},createSession:function(b,c,e){var a=this;try{this.apiRequestPlain("createSession",[b,c],function(g,f){a.onSessionCreated(g,f,e)})}catch(d){acDebugger.systemLog1("session:createSession",d)}},createGuestSession:function(c){var a=this;try{this.apiRequestPlain("createGuestSession",[],function(e,d){a.onSessionCreated(e,d,c)})}catch(b){acDebugger.systemLog1("session:CreateGuestSession",b)}},sessionLogout:function(b){if(this.token()==null){return}var a=this;this.apiRequest("closeSession",[],function(d,c){a.onSessionLogout(d,c,b)})},onSessionLogout:function(c,a,d){var b=c.data.self;b._token=null;if(typeof d=="function"){d(a)}},loginAndLoadForm:function(b,d,e,c,f){var a=this;this.apiRequestPlain("loginAndLoadForm",[b,d,e,c],function(h,g){if(g.error==false){a.context().widgetScripts().getScripts(g.object.result.formResult.widgetScripts,function(){f(g)})}else{f(g)}})},loginAndLoadFormWithSession:function(b,d,c,e){var a=this;this.apiRequestPlain("loginAndLoadFormWithSessionId",[b,d,c],function(g,f){if(f.error==false){a.context().widgetScripts().getScripts(f.object.result.formResult.widgetScripts,function(){e(f)})}else{e(f)}})},loadFullForm:function(b,d,c,e){var a=this;this.apiRequestPlain("loadFullForm",[b,d,c],function(g,f){if(f.error==false){a.context().widgetScripts().getScripts(f.object.result.widgetScripts,function(){e(f)})}else{e(f)}})},loginFull:function(b,c,d){var a=this;this.apiRequestPlain("loginFull",[b,c],function(g,e){var f=e.object.result;a._populateLoginResult(f);d(e)})},_populateLoginResult:function(a){try{this.setToken(a.sessionId,undefined,false);var f=this.context().userSettings();var b=this.context().users();var c=this.context().accounts();if(a.userParameters!=undefined){c.onIdentsParamsLoaded({error:false,object:{result:a.userParameters}})}if(a.userSettings!=undefined){f.onSettingsLoaded({error:false,object:{result:a.userSettings}})}if(a.user!=undefined){b.onUserLoaded({error:false,object:{result:a.user}})}if(a.user!=undefined){this.context().dataObject().setUserDetails(a.user)}}catch(d){acDebugger.systemLog1(d)}},token:function(){return this._token},setToken:function(c,e,a){var b=this;this._token=c;if(a==undefined||a==true){var d=b.context().userSettings();d.loadSettings(function(){var f=b.context().users();f.loadUserBySession(function(h,g){var h=(h||g==null);if(!h){b.context().dataObject().setUserDetails(g)}if(e!==undefined){e(h)}})});b.context().accounts().loadIdentsParams()}},getToken:function(){return this._token},error:function(){return this._error},setDataAgentParam:function(c,d,e){var b=false;for(var a in this._dataAgentParams){if(this._dataAgentParams[a].dataAgent==c&&this._dataAgentParams[a].name==d){this._dataAgentParams[a].value=e;b=true}}if(!b){this._dataAgentParams.push({dataAgent:c,name:d,value:e})}},getDataAgentParams:function(){return this._dataAgentParams},clearSession:function(){if(this._token!=null){delete this._token}if(this._error!=null){delete this._error}if(this._dataAgentParams!=null){this._dataAgentParams=[]}this.context().dropRequesters()},sendEmail:function(b,c){var a=this;this.apiRequest("sendEmail",[b],function(e,d){a.onEmailSent(d,c)})},onEmailSent:function(b,e){var d=b.error;var a=b.object;var c=(d==true)?a:null;if(c&&c.message=="SMTP settings are not set"){throw"SMTP isn't configured. Please go to the Console Accounts and configure SMTP."}WiziCore_Helper.callCallback(e,[c])},getAccountFeatures:function(b){var a=this;this.apiRequestPlain("getAccountFeatures",[],function(d,c){if(b){a.onDataRecived(c,b)}})},onDataRecived:function(a,d){var c=a.object.result,b=a.error;WiziCore_Helper.callCallback(d,[b,c])}});WiziCore_Api_SessionRequester.onCreated="Events#WiziCore_Api_SessionRequester#Created";WiziCore_Api_SessionRequester.onLiveLogin="Events#WiziCore_Api_SessionRequester#onLiveLogin";var WiziCore_Api_UserRequester=WiziCore_Api_Base.extend({_users:null,_userGroups:null,_currUser:null,init:function(a){this._super(a);this._users={};this._context=a},createUser:function(b,c){var a=this;this.apiRequest("createUser",[b],function(e,d){a.onUserCreated(d,c)})},onUserCreated:function(a,d){var c=a.error;var b=a.object;if(typeof d=="function"){d(c,b)}$(this).trigger(WiziCore_Api_UserRequester.onCreated,[c,b])},setPassword:function(b,c,d){var a=this;this.apiRequest("setPassword",[b,c],function(f,e){a.onPasswordSets(e,d)})},onPasswordSets:function(a,d){var c=a.error;var b=a.object;if(d!=undefined&&typeof d=="function"){d(c,b)}},setMyPassword:function(a,c,d){var b=this;this.apiRequest("setMyPassword",[a,c],function(f,e){b.onMyPasswordSets(e,d)})},onMyPasswordSets:function(a,d){var c=a.error;var b=a.object;if(d!=undefined&&typeof d=="function"){d(c,b)}},registerUser:function(b,c,d,e){var a=this;this.apiRequest("registerUser",[b,c,d],function(g,f){a.onUserRegister(f,e)})},onUserRegister:function(a,d){var c=a.error;var b=a.object;if(typeof d=="function"){d(c,b)}$(this).trigger(WiziCore_Api_UserRequester.onUserRegister,[c,b])},deleteUser:function(b,c){var a=this;this.apiRequest("deleteUser",[b],function(e,d){a.onUserDeleted(d,c)})},onUserDeleted:function(a,d){var c=a.error;var b=a.object;if(typeof d=="function"){d(c,b)}$(this).trigger(WiziCore_Api_UserRequester.onDeleted,[c,b])},saveUser:function(b,c){var a=this;this.apiRequest("saveUser",[b],function(e,d){a.onUserSaved(d,c)})},onUserSaved:function(a,d){var c=a.error;var b=a.object;if(typeof d=="function"){d(c,b)}$(this).trigger(WiziCore_Api_UserRequester.onSaved,[c,b])},loadUserList:function(b,c){var a=this;this.apiRequest("getUsers",[b],function(e,d){a.onUserListLoaded(d,(b==undefined),c)})},onUserListLoaded:function(a,e,d){var b=a.object;var c=[];if(e){this._users=[]}if(a.error==true||b.result==null){acDebugger.systemLog("users::here")}else{if(e){this._users=b.result}c=b.result}if(typeof d=="function"){d(c)}$(this).trigger(WiziCore_Api_UserRequester.onListLoaded,[c])},loadUser:function(b){var a=this;this.apiRequest("getUser",[b],function(d,c){a.onUserLoaded(c)})},loadUserBySession:function(b){var a=this;this.apiRequest("getUserBySessionId",[],function(d,c){a.onUserLoaded(c,b)})},onUserLoaded:function(a,d){var c=a.object;this._users=[];if(a.error==true||c.result==null){acDebugger.systemLog("users::here")}else{this._currUser=c.result}var b=(a.error==true||c.error!=null);if(typeof d=="function"){d(b,this._currUser)}$(this).trigger(WiziCore_Api_UserRequester.onLoaded,[b,this._currUser])},getMemberOf:function(a){var b=this;this.apiRequest("getMemberOf",[a],function(d,c){b.onGetMemberOf(c)})},onGetMemberOf:function(a){$(this).trigger(WiziCore_Api_UserRequester.onGetMemberOf,[a.error,a.object])},getCaptcha:function(d,b,e,a,g,f){var c=this;this.apiRequest("getCaptcha",[d,b,e,a,g],function(i,h){c.onGetCaptcha(h,f)})},onGetCaptcha:function(a,b){if(typeof b=="function"){b(a.error,a.object)}},userList:function(){if(this._users==null){this._users={}}return this._users},currUser:function(){if(this._currUser==null){this._currUser={}}return this._currUser},isUserLoaded:function(d){var b=false;var e=this.userList();for(var c=0,a=e.length;c<a;c++){if(e[c].id==d){b=true;break}}return b},getUserById:function(d){var e=this.userList();var b=null;for(var c=0,a=e.length;c<a;c++){if(e[c].id==d){b=e[c];break}}return b}});WiziCore_Api_UserRequester.onListLoaded="Events#WiziCore_Api_UserRequester#ListLoaded";WiziCore_Api_UserRequester.onCreated="Events#WiziCore_Api_UserRequester#User#Created";WiziCore_Api_UserRequester.onDeleted="Events#WiziCore_Api_UserRequester#User#Deleted";WiziCore_Api_UserRequester.onSaved="Events#WiziCore_Api_UserRequester#User#Saved";WiziCore_Api_UserRequester.onLoaded="Events#WiziCore_Api_UserRequester#User#Loaded";WiziCore_Api_UserRequester.onGetMemberOf="Events#WiziCore_Api_UserRequester#User#onGetMemberOf";WiziCore_Api_UserRequester.onUserRegister="Events#WiziCore_Api_UserRequester#User#onUserRegister";WiziCore_Api_UserRequester.USER="u";WiziCore_Api_UserRequester.SYSTEM_USER_TYPE="system";var WiziCore_Api_UserSettingsRequester=WiziCore_Api_Base.extend({_settings:null,_isLoad:false,init:function(a){this._super(a);this._settings={}},loadSettings:function(c){var b=this;var a=this.context().getSession().token();this.apiRequest("getUserSettings",[],function(e,d){b.onSettingsLoaded(d,c)})},onSettingsLoaded:function(a,d){var c=a.error;var b=a.object;if(a.error==true){}else{this._settings=b.result;this._isLoad=true}if(typeof d=="function"){d(c,this._settings)}$(this).trigger(WiziCore_Api_UserSettingsRequester.onLoad,[c,this._settings])},saveSettings:function(){var a=this;this.apiRequest("saveUserSettings",[this._settings],function(c,b){a.onSettingsSaveded(b)})},onSettingsSaveded:function(a){var c=a.error;var b=a.object;if(a.error==true){}else{this._settings=b.result}$(this).trigger(WiziCore_Api_UserSettingsRequester.onSave,[c,this._settings])},settings:function(a){if(a!=undefined){this._settings=a}return this._settings},settingsSection:function(b,a){if(a!==undefined){this._settings[b]=a}if(this._settings[b]==undefined){this._settings[b]={}}return this._settings[b]},settingsSectionParam:function(d,c,a){var b=this.settingsSection(d);if(a!=undefined){b[c]=a}return b[c]},isLoad:function(){return this._isLoad}});WiziCore_Api_UserSettingsRequester.onLoad="Events#WiziCore_Api_UserSettingsRequester#Load";WiziCore_Api_UserSettingsRequester.onSave="Events#WiziCore_Api_UserSettingsRequester#Save";var WiziCore_Api_QueryRequester=WiziCore_Api_Base.extend({_queries:null,_connFolders:null,init:function(a){this._super(a);this._queries={}},createQuery:function(b){if(b===undefined){throw new WiziCore_Api_Error("Need query",WiziCore_Api_Error.ERR_NEED_OBJECT)}var a=this;this.apiRequest("createQuery",[b],function(d,c){a.onQueryCreated(c)})},onQueryCreated:function(a){var b=a.object;var c=null;if(a.error==true){}else{c=new WiziCore_Api_Query();c.json(b.result);this.queries()[c.queryId()]=c}$(this).trigger(WiziCore_Api_QueryRequester.onCreated,[a.error,c])},saveQuery:function(a,c){if(this.queries()[a]===undefined){throw new WiziCore_Api_Error("Need query",WiziCore_Api_Error.ERR_NEED_OBJECT)}var b=this.queries()[a].json();this.saveQueryJson(b,c)},saveQueryJson:function(b,c){var a=this;this.apiRequest("saveQuery",[b],function(e,d){a.onQuerySaved(d,c)})},onQuerySaved:function(a,e){var d=null;var c=a.object;var b=a.error;if(b==true){d=a}else{d=new WiziCore_Api_Query();d.json(c.result);if(this.queries()[d.queryId()]!==undefined){d=this.queries()[d.queryId()]}else{this.queries()[d.queryId()]=d}}if(typeof e=="function"){e(b,d)}$(this).trigger(WiziCore_Api_QueryRequester.onSaved,[b,d])},deleteQuery:function(b){if(this.queries()[b]===undefined){throw new WiziCore_Api_Error("Need query",WiziCore_Api_Error.ERR_NEED_OBJECT)}var a=this;this.apiRequest("deleteQuery",[b],function(d,c){if(c.error!=true){delete a.queries()[b]}a.onQueryDeleted(c)})},onQueryDeleted:function(a){$(this).trigger(WiziCore_Api_QueryRequester.onDeleted,[a.error])},loadQueryList:function(){var a=this;this.apiRequest("getUserQueries",[],function(c,b){a.onQueryListLoaded(b)})},onQueryListLoaded:function(a){var b=a.object;if(a.error==true){}else{delete this._queries;this._queries={};for(var c in b.result){var d=new WiziCore_Api_Query();d.json(b.result[c]);this.queries()[d.queryId()]=d}}$(this).trigger(WiziCore_Api_QueryRequester.onListLoaded,[this.queries()])},loadQuery:function(b,c){if(b===undefined){throw new WiziCore_Api_Error("Need query identificator",WiziCore_Api_Error.ERR_NEED_OBJECT)}var a=this;this.apiRequest("getQuery",[b],function(e,d){a.onQueryLoaded(d,c)})},onQueryLoaded:function(a,h){var c=a.object;var g=a.error;var d=null;if(g){}else{d=new WiziCore_Api_Query();d.json(c.result);this.queries()[d.queryId()]=d}$(this).trigger(WiziCore_Api_QueryRequester.onLoaded,[g,d]);try{var b=g;if(!g){b=(c.error!=undefined&&c.error!=null)?true:false}if(h!=undefined){h(b,d)}}catch(f){}},loadQueryFolderList:function(){var a=this;var b=this.context().folders();$(b).one(WiziCore_Api_FoldersRequester.onFoldersLoaded+WiziCore_Api_FoldersRequester.QUERY,function(c,d){a.onQueryFolderListLoaded(d)});b.loadFolderList(WiziCore_Api_FoldersRequester.QUERY)},onQueryFolderListLoaded:function(a){this._connFolders=a;$(this).trigger(WiziCore_Api_QueryRequester.onFolderListLoaded,[this._connFolders])},createQueryFolder:function(b){var a=this;var c=this.context().folders();$(c).one(WiziCore_Api_FoldersRequester.onCreated+WiziCore_Api_FoldersRequester.QUERY,function(f,e,d){a.onQueryFolderCreated(e,d)});c.createFolder(WiziCore_Api_FoldersRequester.QUERY,b)},onQueryFolderCreated:function(b,a){$(this).trigger(WiziCore_Api_QueryRequester.onFolderCreated,[b,a])},deleteQueryFolder:function(c,b){var a=this;var d=this.context().folders();$(d).one(WiziCore_Api_FoldersRequester.onDeleted+WiziCore_Api_FoldersRequester.QUERY,function(g,f,e){a.onQueryFolderDeleted(f,e)});d.deleteFolder(WiziCore_Api_FoldersRequester.QUERY,c,b)},onQueryFolderDeleted:function(b,a){$(this).trigger(WiziCore_Api_QueryRequester.onFolderDeleted,[b,a])},saveQueryFolder:function(b){var a=this;var c=this.context().folders();$(c).one(WiziCore_Api_FoldersRequester.onSaved+WiziCore_Api_FoldersRequester.QUERY,function(f,e,d){a.onFormFolderSaved(e,d)});c.saveFolder(WiziCore_Api_FoldersRequester.QUERY,b)},onFormFolderSaved:function(b,a){$(this).trigger(WiziCore_Api_QueryRequester.onFolderSaved,[b,a])},queries:function(){if(this._queries==null){this._queries={}}return this._queries},getDatasourceByName:function(a){for(var b in this.queries()){var c=this.queries()[b].getDatasource(a);if(c!==null){return c}}return null}});WiziCore_Api_QueryRequester.onListLoaded="Events#WiziCore_Api_QueryRequester#onListLoaded";WiziCore_Api_QueryRequester.onLoaded="Events#WiziCore_Api_QueryRequester#onLoaded";WiziCore_Api_QueryRequester.onSaved="Events#WiziCore_Api_QueryRequester#onSaved";WiziCore_Api_QueryRequester.onCreated="Events#WiziCore_Api_QueryRequester#onCreated";WiziCore_Api_QueryRequester.onDeleted="Events#WiziCore_Api_QueryRequester#onDeleted";WiziCore_Api_QueryRequester.onFolderListLoaded="Events#WiziCore_Api_QueryRequester#Folder#ListLoaded";WiziCore_Api_QueryRequester.onFolderCreated="Events#WiziCore_Api_QueryRequester#Folder#Created";WiziCore_Api_QueryRequester.onFolderDeleted="Events#WiziCore_Api_QueryRequester#Folder#Deleted";WiziCore_Api_QueryRequester.onFolderSaved="Events#WiziCore_Api_QueryRequester#Folder#Saved";var WiziCore_WidgetPluginManager=WiziCore_Api_Base.extend({_widgetsGroup:null,_widgets:null,_exWidgets:null,_baseClasses:null,init:function(){this._widgets={};this._widgetsGroup={};this._baseClasses={}},createWidget:function(b,a,h,d,f){var c=null;try{if(window[b]!=undefined){c=new window[b]({project:a,mode:h,form:d,page:f})}else{acDebugger.systemLog("widgetPluginManager:createWidget:no widget class",ClassName)}}catch(g){acDebugger.systemLog1("widgetPluginManager:createWidget",g);c=null}if(c!=null){}return c},createWidgetWithDefaultProps:function(b,d,a,c){return this.createWidget(b,this.getDefaultWidgetProperties(b),d,a,c)},getByClassName:function(h,k,b,j){var f={},i=this._baseClasses,a={},g={};j=(j==undefined)?false:j;if(i[h]===undefined||i[h][k]===undefined){if(i[h]==undefined){i[h]={}}if(window[h]!=undefined){try{var c=window[h];if(c!=null&&c!=undefined){if(typeof c[k]=="function"){if(!j){f=c[k](b)}else{f=c[k]}}else{if(typeof c.capabilities=="function"&&c.capabilities()[k]!==undefined){if(typeof c.capabilities()[k]=="function"){if(!j){f=c.capabilities()[k](b)}else{f=c.capabilities()[k]}}else{f=c.capabilities()[k]}}}this._baseClasses[h][k]=f}}catch(d){acDebugger.systemLog1("widgetPluginManager :: "+h+" :: "+k+" :: "+b,d);g=undefined}}else{acDebugger.systemLog1("widgetPluginManager :: "+h+" :: "+k+" :: "+b);g=undefined}}if(i[h]!==undefined&&i[h][k]!==undefined){if(typeof i[h][k]=="function"&&!j){g=i[h][k](b)}else{g=i[h][k]}}switch(typeof g){case"object":a=jQuery.extend(true,{},g);break;case"function":default:a=g;break}return a},getClassProperty:function(d,a){var c=this._baseClasses;if(c[d]==undefined){return}var f=undefined;try{var b=window[d];f=b[a]}catch(g){acDebugger.systemLog1("widgetPluginManager :: "+d+" :: "+a,g);s}return f},getAvailableWidgetProperties:function(a){return this.getByClassName(a,"props")},getWidgetDataModel:function(c,b){var a=this.getByClassName(c,"widgetDataModel",undefined,true);if(typeof a=="function"){a=a(b)}return a},getEmptyWidgetProperties:function(a){return this.getByClassName(a,"emptyProps")},getDefaultWidgetProperties:function(c,b){var a=this.getByClassName(c,"defaultProps",undefined,true);if(typeof a=="function"){a=a(b)}return a},getWidgetActions:function(a){return this.getByClassName(a,"actions")},getWidgetLangs:function(a){return this.getByClassName(a,"langs")},getInlineEditPropName:function(a){return this.getByClassName(a,"inlineEditPropName")},getSelectionArea:function(c,b){var a=this.getByClassName(c,"selectionArea",undefined,true);if(typeof a=="function"){a=a(b)}return a},getContainerType:function(d){var a=this.getByClassName(d,"containerType");if(typeof a=="object"){var c=0;for(var b in a){if(c==0){a=WiziCore_Widget_Base.CASE_TYPE_ITEM}break}}return a},getWidgetResizeProperties:function(a){return this.getByClassName(a,"resizeProperties")},calculateWidgetProperties:function(c,d,b){var a=this.getByClassName(c,"calculateProps",undefined,true);if(typeof a=="function"){b=a(d,b)}return b},registerWidget:function(h,j,i,f,k,a,b){if(this._widgetsGroup[j]==undefined){this._widgetsGroup[j]=new Array()}var g=this._widgets.length;var e=(b!==false);var d={className:h,icon:i,descr:f,uid:g,section:j,cssClass:k,toolIcon:a,visible:e};this._widgets[h]=d;this._widgetsGroup[j].push(d);var c=this.getWidgetLangs(h);WiziCore.lang().registerWidgetLang(c)},registerExWidgets:function(){var a=this._exWidgets;if(a!=null){for(var b in a){this.registerWidget(a[b].className,a[b].section,a[b].icon,a[b].descr,a[b].cssClass,a[b].toolIcon,a[b].visible)}}},registerExWidget:function(c,f,b,e,d){var a=this._exWidgets;if(a==null){a=[]}a.push({className:c,section:f,icon:b,descr:e,cssClass:null,toolIcon:d});this._exWidgets=a},widgets:function(){return this._widgetsGroup},widgetClasses:function(){return this._widgets}});var WiziCore_Api_ResourceRequester=WiziCore_Api_Base.extend({_resources:null,_resourceFolders:null,init:function(a){this._super(a);this._resources=null;this._context=a},createResourceByTicket:function(b){var a=this;this.apiRequest("uploadResourceByTicket",[b],function(d,c){a.onResourceCreated(c,WiziCore_Api_ResourceRequester.onCreatedByTicket)})},createResourceByUrl:function(b){var a=this;this.apiRequest("uploadResourceByUrl",[b],function(d,c){a.onResourceCreated(c,WiziCore_Api_ResourceRequester.onCreatedByUrl)})},createResourceClone:function(b){var a=this;this.apiRequest("uploadResourceClone",[b],function(d,c){a.onResourceCreated(c,WiziCore_Api_ResourceRequester.onCloneCreated)})},onResourceCreated:function(a,d){var c=a.error;var b=a.object;$(this).trigger(d,[c,b])},loadResourceList:function(){var a=this;this.apiRequest("getUserResources",[],function(c,b){a.onResourceListLoaded(b)})},onResourceListLoaded:function(a){var b=a.object;if(a.error==true||b.result==null){}else{this._resources={};for(var c in b.result){var d=b.result[c];this._resources[d.id_resource]=d}}$(this).trigger(WiziCore_Api_ResourceRequester.onListLoad,[this._resources])},loadResourceFolderList:function(){var a=this;var b=this.context().folders();$(b).one(WiziCore_Api_FoldersRequester.onFoldersLoaded+WiziCore_Api_FoldersRequester.RESOURCE,function(c,d){a.onResourceFolderListLoaded(d)});b.loadFolderList(WiziCore_Api_FoldersRequester.RESOURCE)},onResourceFolderListLoaded:function(a){this._resourceFolders=a;$(this).trigger(WiziCore_Api_ResourceRequester.onFolderListLoaded,[a])},createResourceFolder:function(b){var a=this;var c=this.context().folders();$(c).one(WiziCore_Api_FoldersRequester.onCreated+WiziCore_Api_FoldersRequester.RESOURCE,function(f,e,d){a.onResourceFolderCreated(e,d)});c.createFolder(WiziCore_Api_FoldersRequester.RESOURCE,b)},onResourceFolderCreated:function(b,a){$(this).trigger(WiziCore_Api_ResourceRequester.onFolderCreated,[b,a])},deleteResourceFolder:function(c,b){var a=this;var d=this.context().folders();$(d).one(WiziCore_Api_FoldersRequester.onDeleted+WiziCore_Api_FoldersRequester.RESOURCE,function(g,f,e){a.onResourceFolderDeleted(f,e)});d.deleteFolder(WiziCore_Api_FoldersRequester.RESOURCE,c,b)},onResourceFolderDeleted:function(b,a){$(this).trigger(WiziCore_Api_ResourceRequester.onFolderDeleted,[b,a])},saveResourceFolder:function(b){var a=this;var c=this.context().folders();$(c).one(WiziCore_Api_FoldersRequester.onSaved+WiziCore_Api_FoldersRequester.RESOURCE,function(f,e,d){a.onResourceFolderSaved(e,d)});c.saveFolder(WiziCore_Api_FoldersRequester.RESOURCE,b)},onResourceFolderSaved:function(b,a){$(this).trigger(WiziCore_Api_ResourceRequester.onFolderSaved,[b,a])},deleteResource:function(b,c){var a=this;this.apiRequest("deleteResource",[b],function(e,d){a.onResourceDeleted(d,c)})},onResourceDeleted:function(a,d){var c=a.error;var b=a.object;if(typeof d=="function"){d(c,b)}$(this).trigger(WiziCore_Api_ResourceRequester.onDelete,[c,b])},loadResource:function(b,c){var a=this;this.apiRequest("getResource",[b],function(e,d){a.onResourceLoaded(d,c)})},onResourceLoaded:function(a,d){var c=a.error;var b=a.object;if(c==false){if(this._resources==undefined){this._resources={}}this._resources[b.result.id_resource]=b.result}if(typeof d=="function"){d(c,b)}$(this).trigger(WiziCore_Api_ResourceRequester.onLoaded,[c,b])},saveResource:function(b,c){var a=this;this.apiRequest("saveResource",[b],function(e,d){a.onResourceSaved(d,c)})},onResourceSaved:function(a,d){var c=a.error;var b=a.object;if(typeof d=="function"){d(c,b.result)}$(this).trigger(WiziCore_Api_ResourceRequester.onSaved,[c,b.result])},parseResource:function(d,b,c){var a=this;this.apiRequest("parseResource",[d,b],function(f,e){a.onResourceParsed(e,c)})},onResourceParsed:function(a,d){var c=a.error;var b=a.object;if(typeof d=="function"){d(c,b)}},resourceList:function(){if(this._resources===null){this._resources={}}return this._resources}});WiziCore_Api_ResourceRequester.ErrorFolderEmpty="folder is not empty";WiziCore_Api_ResourceRequester.onListLoad="Event#Resources#ResourceListLoaded";WiziCore_Api_ResourceRequester.onCloneCreated="Event#Resources#CloneCreated";WiziCore_Api_ResourceRequester.onCreatedByUrl="Event#Resources#CreatedByUrl";WiziCore_Api_ResourceRequester.onCreatedByTicket="Event#Resources#CreatedByTicket";WiziCore_Api_ResourceRequester.onDelete="Event#Resources#Deleted";WiziCore_Api_ResourceRequester.onLoaded="Event#Resources#Resource#Loaded";WiziCore_Api_ResourceRequester.onSaved="Event#Resources#Saved";WiziCore_Api_ResourceRequester.onFolderCreated="Event#Resources#Folder#Create";WiziCore_Api_ResourceRequester.onFolderSaved="Event#Resources#Folder#Save";WiziCore_Api_ResourceRequester.onFolderDeleted="Event#Resources#Folder#Delete";WiziCore_Api_ResourceRequester.onFolderOrItemMoved="Event#Resources#FolderOrItem#Moved";WiziCore_Api_ResourceRequester.onFolderListLoaded="Event#Resources#Folder#ListLoaded";WiziCore_Api_ResourceRequester.FILETYPE_IMAGE="image";WiziCore_Api_ResourceRequester.FILETYPE_VIDEO="video";WiziCore_Api_ResourceRequester.FILETYPE_AUDIO="audio";WiziCore_Api_ResourceRequester.FILETYPE_DOCUMENT="doc";WiziCore_Api_ResourceRequester.FILETYPE_TABLE="table";WiziCore_Api_ResourceRequester.FILETYPE_DATA="data";var WiziCore=jQuery.Class.create({_widgetManages:null,_themeManager:null,_langManages:null,_cookie:null,_extendsApp:{},_registrenContext:[],init:function(){},Widgets:function(){if(this._widgetManages==null){this._widgetManages=new WiziCore_WidgetPluginManager()}return this._widgetManages},cookie:function(){if(this._cookie==null){this._cookie=new WiziCookie()}return this._cookie},lang:function(a){if(this._langManages==null){this._langManages=new SwirlLangTr(a)}return this._langManages},addExtendsToApp:function(e,c){if(e!=undefined&&c!=undefined){this._extendsApp[e]=c;for(var b=0,a=this._registrenContext.length;b<a;b++){var d=this._registrenContext[b];if(typeof d=="object"){this.registerExtendsObject(d.registerTo,d.context,d.app)}}}},registerExtendsObject:function(d,b,c){if(d!=undefined){for(var a in this._extendsApp){if(d[a]==undefined&&this._extendsApp[a]!=undefined){d[a]=this._extendsApp[a];if(b!=undefined&&typeof d[a]=="object"){if(typeof d[a].context=="function"){d[a].context(b)}if(typeof d[a].app=="function"){d[a].app(c)}}}}this._registrenContext.push({registerTo:d,context:b,app:c})}}});WiziCore=new WiziCore();var WiziCore_Api_ConnectionRequester=WiziCore_Api_Base.extend({_connections:null,_connFolders:null,init:function(a){this._super(a);this._connections={};this._connections[WiziCore_Api_ConnectionRequester.CDB_CONNECTION_ID]=this._getCdbConnection();this._connections[WiziCore_Api_ConnectionRequester.RDB_CONNECTION_ID]=this._getRdbConnection()},_getCdbConnection:function(){var a=new WiziCore_Api_Connection(this.context());a._connectionId=WiziCore_Api_ConnectionRequester.CDB_CONNECTION_ID;a._connectionName=$(WiziCore.lang().tr("swirl_qwizard_cdbConnectionName")).text();return a},_getRdbConnection:function(){var a=new WiziCore_Api_Connection(this.context());a._connectionId=WiziCore_Api_ConnectionRequester.RDB_CONNECTION_ID;a._connectionName=$(WiziCore.lang().tr("swirl_qwizard_rdbConnectionName")).text();return a},createConnection:function(b){if(b===undefined){throw new WiziCore_Api_Error("Need connection name",WiziCore_Api_Error.ERR_NEED_OBJECT)}var a=this;this.apiRequest("createConnection",[b],function(d,c){a.onConnectionCreated(c)})},onConnectionCreated:function(a){var b=a.object;var c=null;if(a.error==true){}else{c=new WiziCore_Api_Connection(this.context());c.json(b.result);this.connections()[c.connectionId()]=c}$(this).trigger(WiziCore_Api_ConnectionRequester.onCreated,[a.error,c])},saveConnection:function(a,c){if(this.connections()[a]===undefined){throw new WiziCore_Api_Error("Need connection",WiziCore_Api_Error.ERR_NEED_OBJECT)}var b=this.connections()[a].json();this.saveConnectionJson(b,c)},saveConnectionJson:function(b,c){var a=this;this.apiRequest("saveConnection",[b],function(e,d){a.onConnectionSaved(d,c)})},onConnectionSaved:function(a,e){var d=null;var c=a.object;var b=a.error;if(b==false){d=new WiziCore_Api_Connection(this.context());d.json(c.result);if(this.connections()[d.connectionId()]!==undefined){d=this.connections()[d.connectionId()]}else{this.connections()[d.connectionId()]=d}}if(typeof e=="function"){e(b,d)}$(this).trigger(WiziCore_Api_ConnectionRequester.onSaved,[b,d])},deleteConnection:function(b){if(this.connections()[b]===undefined){throw new WiziCore_Api_Error("Need connection",WiziCore_Api_Error.ERR_NEED_OBJECT)}var a=this;this.apiRequest("deleteConnection",[b],function(d,c){if(c.error!=true){delete a.connections()[b]}a.onConnectionDeleted(c)})},onConnectionDeleted:function(a){$(this).trigger(WiziCore_Api_ConnectionRequester.onDeleted,[a.error])},loadConnectionList:function(){var a=this;this.apiRequest("getUserConnections",[],function(c,b){a.onConnectionListLoaded(b)})},onConnectionListLoaded:function(a){var c=a.object;var b={};if(a.error==true){}else{for(var d in c.result){try{var e=new WiziCore_Api_Connection(this.context());e.json(c.result[d]);this.connections()[e.connectionId()]=e;b[e.connectionId()]=e}catch(f){acDebugger.systemLog1("connections:onConnectionListLoaded",f)}}}$(this).trigger(WiziCore_Api_ConnectionRequester.onListLoaded,[b])},loadConnection:function(b,c){if(b===undefined){throw new WiziCore_Api_Error("Need connection identificztor",WiziCore_Api_Error.ERR_NEED_OBJECT)}switch(b){case WiziCore_Api_ConnectionRequester.CDB_CONNECTION_ID:case WiziCore_Api_ConnectionRequester.RDB_CONNECTION_ID:if(typeof c=="function"){c(null,this.connections()[b])}break;default:var a=this;this.apiRequest("getConnection",[b],function(e,d){a.onConnectionLoaded(d,c)});break}},onConnectionLoaded:function(a,f){var c=a.object;var b=a.error;if(b==true){}else{var d=new WiziCore_Api_Connection(this.context());d.json(c.result);this.connections()[d.connectionId()]=d}try{if(f!=undefined){f(b,d)}$(this).trigger(WiziCore_Api_ConnectionRequester.onLoaded,[b,d])}catch(g){acDebugger.systemLog1(g)}},loadConnectionFolderList:function(){var a=this;var b=this.context().folders();$(b).one(WiziCore_Api_FoldersRequester.onFoldersLoaded+WiziCore_Api_FoldersRequester.CONNECTION,function(c,d){a.onConnectionFolderListLoaded(d)});b.loadFolderList(WiziCore_Api_FoldersRequester.CONNECTION)},onConnectionFolderListLoaded:function(a){this._connFolders=a;$(this).trigger(WiziCore_Api_ConnectionRequester.onFolderListLoaded,[a])},createConnectionFolder:function(b){var a=this;var c=this.context().folders();$(c).one(WiziCore_Api_FoldersRequester.onCreated+WiziCore_Api_FoldersRequester.CONNECTION,function(f,e,d){a.onConnectionFolderCreated(e,d)});c.createFolder(WiziCore_Api_FoldersRequester.CONNECTION,b)},onConnectionFolderCreated:function(b,a){$(this).trigger(WiziCore_Api_ConnectionRequester.onFolderCreated,[b,a])},deleteConnectionFolder:function(c,b){var a=this;var d=this.context().folders();$(d).one(WiziCore_Api_FoldersRequester.onDeleted+WiziCore_Api_FoldersRequester.CONNECTION,function(g,f,e){a.onConnectionFolderDeleted(f,e)});d.deleteFolder(WiziCore_Api_FoldersRequester.CONNECTION,c,b)},onConnectionFolderDeleted:function(b,a){$(this).trigger(WiziCore_Api_ConnectionRequester.onFolderDeleted,[b,a])},saveConnectionFolder:function(b){var a=this;var c=this.context().folders();$(c).one(WiziCore_Api_FoldersRequester.onSaved+WiziCore_Api_FoldersRequester.CONNECTION,function(f,e,d){a.onConnectionFolderSaved(e,d)});c.saveFolder(WiziCore_Api_FoldersRequester.CONNECTION,b)},onConnectionFolderSaved:function(b,a){$(this).trigger(WiziCore_Api_ConnectionRequester.onFolderSaved,[b,a])},connections:function(){if(this._connections==null){this._connections={}}return this._connections},getDatasourceByName:function(a){for(var b in this.connections()){var c=this.connections()[b].getDatasource(a);if(c!==null){return c}}return null}});WiziCore_Api_ConnectionRequester.onListLoaded="Events#WiziCore_Api_ConnectionRequester#onListLoaded";WiziCore_Api_ConnectionRequester.onLoaded="Events#WiziCore_Api_ConnectionRequester#onLoaded";WiziCore_Api_ConnectionRequester.onSaved="Events#WiziCore_Api_ConnectionRequester#onSaved";WiziCore_Api_ConnectionRequester.onCreated="Events#WiziCore_Api_ConnectionRequester#onCreated";WiziCore_Api_ConnectionRequester.onDeleted="Events#WiziCore_Api_ConnectionRequester#onDeleted";WiziCore_Api_ConnectionRequester.onFolderListLoaded="Events#WiziCore_Api_ConnectionRequester#Folder#ListLoaded";WiziCore_Api_ConnectionRequester.onFolderCreated="Events#WiziCore_Api_ConnectionRequester#Folder#Created";WiziCore_Api_ConnectionRequester.onFolderDeleted="Events#WiziCore_Api_ConnectionRequester#Folder#Deleted";WiziCore_Api_ConnectionRequester.onFolderSaved="Events#WiziCore_Api_ConnectionRequester#Folder#Saved";WiziCore_Api_ConnectionRequester.CDB_CONNECTION_ID="00000000-0000-0000-0000-000000000010";WiziCore_Api_ConnectionRequester.RDB_CONNECTION_ID="00000000-0000-0000-0000-000000000011";WiziCore_Api_ConnectionRequester.RDB_INSTANCE_ID_FIELD="instance_id";var WiziCore_Api_ThemeRequester=WiziCore_Api_Base.extend({_theme:null,_currThemeName:null,_themes:null,_enviroment:0,_themeContent:null,init:function(a){this._super();this._themeContent={};if(a!=undefined){this.themes(a);this.theme("_default")}},theme:function(f,b){var e=null;if(f!=undefined&&this._currThemeName!=f){if(typeof f=="object"){f=f.id}var a=this.themes();for(var c in a){var h=a[c];if(h!=undefined&&h.id_theme==f){e=a[c]}}if(e!=null){if(e.imgPath==undefined){var d=this.context().config().clientApi();var g=(this.enviroment()==WiziCore_Api_ThemeRequester.FORM)?"form":"app";e.imgPath=d+"themes/"+g+"/_default/images"}this._theme=e;this._currThemeName=f;this.applyTheme(b)}}return this._theme},themes:function(a){if(a!=undefined){this._themes=a}if(this._themes===null){this._themes={}}return this._themes},applyTheme:function(a){if(this.enviroment()!=0){var b=WiziCore_Api_ThemeRequester.TYPE_APP;if(this.enviroment()==WiziCore_Api_ThemeRequester.FORM){b=WiziCore_Api_ThemeRequester.TYPE_FORM}}},removeTheme:function(){if(this.enviroment()!=0){var a=WiziCore_Api_ThemeRequester.TYPE_APP;if(this.enviroment()==WiziCore_Api_ThemeRequester.FORM){a=WiziCore_Api_ThemeRequester.TYPE_FORM}$("link."+a).remove();this._currThemeName=""}},getImgPath:function(){return this._theme.imgPath},enviroment:function(a){if(a!=undefined){this._enviroment=a}return this._enviroment},createTheme:function(b){var a=this;this.apiRequest("createTheme",[b],function(d,c){a.onThemeCreated(c,WiziCore_Api_ThemeRequester.onThemeCreaded)})},onThemeCreated:function(a,d){var c=a.error;var b=a.object;$(this).trigger(d,[c,b])},loadThemeList:function(){var a=this;this.apiRequest("getUserThemes",[],function(c,b){a.onThemeListLoaded(b)})},onThemeListLoaded:function(a){var b=a.object;if(a.error==true||b.result==null){this.themes({})}else{this.themes({});for(var c in b.result){var d=b.result[c];this.themes()[d.id_theme]=d}}$(this).trigger(WiziCore_Api_ThemeRequester.onListLoad,[this.themes()])},loadThemeFolderList:function(){var a=this;var b=this.context().folders();$(b).one(WiziCore_Api_FoldersRequester.onFoldersLoaded+WiziCore_Api_FoldersRequester.THEME,function(c,d){a.onThemeFolderListLoaded(d)});b.loadFolderList(WiziCore_Api_FoldersRequester.THEME)},onThemeFolderListLoaded:function(a){this._themeFolders=a;$(this).trigger(WiziCore_Api_ThemeRequester.onFolderListLoaded,[a])},createThemeFolder:function(b){var a=this;var c=this.context().folders();$(c).one(WiziCore_Api_FoldersRequester.onCreated+WiziCore_Api_FoldersRequester.THEME,function(f,e,d){a.onThemeFolderCreated(e,d)});c.createFolder(WiziCore_Api_FoldersRequester.THEME,b)},onThemeFolderCreated:function(b,a){$(this).trigger(WiziCore_Api_ThemeRequester.onFolderCreated,[b,a])},deleteThemeFolder:function(c,b){var a=this;var d=this.context().folders();$(d).one(WiziCore_Api_FoldersRequester.onDeleted+WiziCore_Api_FoldersRequester.THEME,function(g,f,e){a.onThemeFolderDeleted(f,e)});d.deleteFolder(WiziCore_Api_FoldersRequester.THEME,c,b)},onThemeFolderDeleted:function(b,a){$(this).trigger(WiziCore_Api_ThemeRequester.onFolderDeleted,[b,a])},saveThemeFolder:function(b){var a=this;var c=this.context().folders();$(c).one(WiziCore_Api_FoldersRequester.onSaved+WiziCore_Api_FoldersRequester.THEME,function(f,e,d){a.onThemeFolderSaved(e,d)});c.saveFolder(WiziCore_Api_FoldersRequester.THEME,b)},onThemeFolderSaved:function(b,a){$(this).trigger(WiziCore_Api_ThemeRequester.onFolderSaved,[b,a])},deleteTheme:function(b){var a=this;this.apiRequest("removeTheme",[b],function(d,c){a.onThemeDeleted(c)})},onThemeDeleted:function(a){var c=a.error;var b=a.object;$(this).trigger(WiziCore_Api_ThemeRequester.onDelete,[c,b])},loadTheme:function(b,c){var a=this;this.apiRequest("getTheme",[b],function(e,d){a.onThemeLoaded(d,b,c)})},onThemeLoaded:function(a,e,g){var d=a.error;var c=a.object;var b=c.result;if(!d){var f=this.themes()[e];if(f==undefined){this.themes()[e]=c.result}}else{b=a}$(this).trigger(WiziCore_Api_ThemeRequester.onLoaded,[d,b]);if(typeof g=="function"){g(d,b)}},saveTheme:function(b,c){var a=this;this.apiRequest("saveTheme",[b],function(e,d){a.onThemeSaved(d,c)})},saveThemeById:function(a,c){if(this.themes()[a]===undefined){throw new WiziCore_Api_Error("Need theme",WiziCore_Api_Error.ERR_NEED_OBJECT)}var b=this.themes()[a];this.saveTheme(b,c)},onThemeSaved:function(a,d){var c=a.error;var b=a.object;if(typeof d=="function"){d(c,b)}$(this).trigger(WiziCore_Api_ThemeRequester.onSaved,[c,b])},setTheme:function(b){if(b!=undefined){for(var a in this.themes()){if(this.themes()[a].id_theme==b.id_theme){this.themes()[a]=b}}}},saveThemeContent:function(d,b,c){var a=this;this.apiRequest("saveThemeContent",[d,b],function(f,e){a.onThemeContentSaved(e,c)})},onThemeContentSaved:function(a,d){var c=a.error;var b=a.object;$(this).trigger(WiziCore_Api_ThemeRequester.onContentSaved,[c,b]);if(typeof d=="function"){d(c,b)}},loadThemeContent:function(d,c){var a=this;var b=this.context().config().serverThemeUrl()+d;jQuery.ajax({type:"GET",url:b,success:function(f,g,e){a.onThemeContentLoaded(d,(g!="success"),f,c)},error:function(e,g,f){a.onThemeContentLoaded(d,(g!="success"),null,c)},dataType:"json"})},onThemeContentLoaded:function(c,b,a,d){if(!b){this.themeContent(c,a)}if(typeof d=="function"){d(b,a)}},themeContent:function(b,a){if(this._themeContent[b]==null){this._themeContent[b]={}}if(a!=undefined){this._themeContent[b]=a}return this._themeContent[b]},saveThemeDraftContent:function(c,b){var a=this;this.apiRequest("saveDraftThemeContent",[c,b],function(e,d){a.onThemeDraftContentSaved(d)})},onThemeDraftContentSaved:function(a){var c=a.error;var b=a.object;$(this).trigger(WiziCore_Api_ThemeRequester.onDraftContentSaved,[c,b])},loadThemeDraftContent:function(c,b){var a=this;this.apiRequest("loadDraftThemeContent",[c,b],function(e,d){a.onThemeDraftContentLoaded(d)})},onThemeDraftContentLoaded:function(a){var c=a.error;var b=a.object;$(this).trigger(WiziCore_Api_ThemeRequester.onDraftContentLoaded,[c,b])},getThemeStyles:function(c,d,b){var a=this;if(b==undefined){b=null}this.apiRequest("getThemeStyles",[c,d,b],function(f,e){a.onGetThemeStyles(c,d,b,e)})},onGetThemeStyles:function(e,g,b,a){var d=a.error;var c=a.object;var f=this.themeContent(e);if(b==null){f[g]=c.result}else{f[g]=jQuery.extend(c.result,f[g])}$(this).trigger(WiziCore_Api_ThemeRequester.onStylesLoaded,[d,c])},setThemeStyle:function(c,d,b,e){var a=this;this.apiRequest("setThemeStyle",[c,d,b,e],function(g,f){a.onSetThemeStyle(f)})},onSetThemeStyle:function(a){var c=a.error;var b=a.object;$(this).trigger(WiziCore_Api_ThemeRequester.onStylesSaved,[c,b])},deleteThemeStyle:function(c,d,b){var a=this;this.apiRequest("deleteThemeStyle",[c,d,b],function(f,e){a.onDeleteThemeStyle(e)})},onDeleteThemeStyle:function(a){var c=a.error;var b=a.object;$(this).trigger(WiziCore_Api_ThemeRequester.onStylesDeleted,[c,b])}});WiziCore_Api_ThemeRequester.APP=1;WiziCore_Api_ThemeRequester.FORM=2;WiziCore_Api_ThemeRequester.TYPE_FORM="wiziform";WiziCore_Api_ThemeRequester.TYPE_APP="wiziapp";WiziCore_Api_ThemeRequester.onThemeCreaded="Event#Resources#ThemeCreated";WiziCore_Api_ThemeRequester.onListLoad="Event#Themes#ThemeListLoaded";WiziCore_Api_ThemeRequester.onCreatedByUrl="Event#Themes#CreatedByUrl";WiziCore_Api_ThemeRequester.onCreatedByTicket="Event#Themes#CreatedByTicket";WiziCore_Api_ThemeRequester.onDelete="Event#Themes#Deleted";WiziCore_Api_ThemeRequester.onLoaded="Event#Themes#Theme#Loaded";WiziCore_Api_ThemeRequester.onSaved="Event#Themes#Saved";WiziCore_Api_ThemeRequester.onFolderCreated="Event#Themes#Folder#Create";WiziCore_Api_ThemeRequester.onFolderSaved="Event#Themes#Folder#Save";WiziCore_Api_ThemeRequester.onFolderDeleted="Event#Themes#Folder#Delete";WiziCore_Api_ThemeRequester.onFolderOrItemMoved="Event#Themes#FolderOrItem#Moved";WiziCore_Api_ThemeRequester.onFolderListLoaded="Event#Themes#Folder#ListLoaded";WiziCore_Api_ThemeRequester.onDraftContentLoaded="Event#Themes#DraftContent#Loaded";WiziCore_Api_ThemeRequester.onDraftContentSaved="Event#Themes#DraftContent#Saved";WiziCore_Api_ThemeRequester.onContentLoaded="Event#Themes#Content#Loaded";WiziCore_Api_ThemeRequester.onContentSaved="Event#Themes#Content#Saved";WiziCore_Api_ThemeRequester.onStylesLoaded="Event#Themes#Styles#Loaded";WiziCore_Api_ThemeRequester.onStylesSaved="Event#Themes#Styles#Saved";WiziCore_Api_ThemeRequester.onStylesDeleted="Event#Themes#Styles#Deleted";var WiziCookie=jQuery.Class.create({init:function(){},cookie:function(b,j,m){if(typeof j!="undefined"){m=m||{};if(j===null){j="";m.expires=-1}var e="";if(m.expires&&(typeof m.expires=="number"||m.expires.toUTCString)){var f;if(typeof m.expires=="number"){f=new Date();f.setTime(f.getTime()+(m.expires*24*60*60*1000))}else{f=m.expires}e="; expires="+f.toUTCString()}var l=m.path?"; path="+(m.path):"";var g=m.domain?"; domain="+(m.domain):"";var a=m.secure?"; secure":"";document.cookie=[b,"=",encodeURIComponent(j),e,l,g,a].join("")}var d=null;if(document.cookie&&document.cookie!=""){var k=document.cookie.split(";");for(var h=0;h<k.length;h++){var c=jQuery.trim(k[h]);if(c.substring(0,b.length+1)==(b+"=")){d=decodeURIComponent(c.substring(b.length+1));break}}}return d}});var WiziCore_Api_GroupRequester=WiziCore_Api_Base.extend({_groups:null,_groupGroups:null,_currGroup:null,init:function(a){this._super(a);this._groups={};this._context=a},createGroup:function(b){var a=this;this.apiRequest("createGroup",[b],function(d,c){a.onGroupCreated(c)})},onGroupCreated:function(a){var c=a.error;var b=a.object;$(this).trigger(WiziCore_Api_GroupRequester.onCreated,[c,b])},deleteGroup:function(b){var a=this;this.apiRequest("deleteGroup",[b],function(d,c){a.onGroupDeleted(c)})},onGroupDeleted:function(a){var c=a.error;var b=a.object;$(this).trigger(WiziCore_Api_GroupRequester.onDeleted,[c,b])},saveGroup:function(b){var a=this;this.apiRequest("saveGroup",[b],function(d,c){a.onGroupSaved(c)})},onGroupSaved:function(a){var c=a.error;var b=a.object;$(this).trigger(WiziCore_Api_GroupRequester.onSaved,[c,b])},loadGroupList:function(b,c){var a=this;this.apiRequest("getGroups",[b],function(e,d){a.onGroupListLoaded(d,(b==undefined),c)})},onGroupListLoaded:function(a,e,d){var b=a.object;var c=[];if(e){this._groups=[]}if(a.error==true||b.result==null){acDebugger.systemLog("groups::here")}else{if(e){this._groups=b.result}c=b.result}if(typeof d=="function"){d(c)}$(this).trigger(WiziCore_Api_GroupRequester.onListLoaded,[c])},loadGroup:function(b){var a=this;this.apiRequest("getGroup",[b],function(d,c){a.onGroupLoaded(c)})},loadGroupBySession:function(){var a=this;this.apiRequest("getGroupBySessionId",[],function(c,b){a.onGroupLoaded(b)})},onGroupLoaded:function(a){var b=a.object;this._groups=[];if(a.error==true||b.result==null){acDebugger.systemLog("groups::here")}else{this._currGroup=b.result}$(this).trigger(WiziCore_Api_GroupRequester.onLoaded,[this._currGroup])},addToGroup:function(c,a,d){var b=this;this.apiRequest("addToGroup",[c,a,d],function(f,e){b.onAddToGroup(e)})},onAddToGroup:function(a){$(this).trigger(WiziCore_Api_GroupRequester.onAddToGroup,[a.error,a.object])},getGroupMembers:function(b,c){var a=this;this.apiRequest("getGroupMembers",[b,c],function(e,d){a.onGetGroupMembers(d)})},onGetGroupMembers:function(a){$(this).trigger(WiziCore_Api_GroupRequester.onGetGroupMembers,[a.error,a.object])},removeFromGroup:function(c,a){var b=this;this.apiRequest("removeFromGroup",[c,a],function(e,d){b.onRemoveFromGroup(d)})},onRemoveFromGroup:function(a){$(this).trigger(WiziCore_Api_GroupRequester.onRemoveFromGroup,[a.error,a.object])},groupList:function(){if(this._groups==null){this._groups={}}return this._groups},currGroup:function(){if(this._currGroup==null){this._currGroup={}}return this._currGroup},isGroupLoaded:function(e){var c=false;var a=this.groupList();for(var d=0,b=a.length;d<b;d++){if(a[d].id==e){c=true;break}}return c},getGroupById:function(d){var a=this.groupList();var e=null;for(var c=0,b=a.length;c<b;c++){if(a[c].id_group==d){e=a[c];break}}return e}});WiziCore_Api_GroupRequester.onListLoaded="Events#WiziCore_Api_GroupRequester#ListLoaded";WiziCore_Api_GroupRequester.onCreated="Events#WiziCore_Api_GroupRequester#Group#Created";WiziCore_Api_GroupRequester.onDeleted="Events#WiziCore_Api_GroupRequester#Group#Deleted";WiziCore_Api_GroupRequester.onSaved="Events#WiziCore_Api_GroupRequester#Group#Saved";WiziCore_Api_GroupRequester.onLoaded="Events#WiziCore_Api_GroupRequester#Group#Loaded";WiziCore_Api_GroupRequester.onAddToGroup="Events#WiziCore_Api_GroupRequester#Group#AddToGroup";WiziCore_Api_GroupRequester.onGetGroupMembers="Events#WiziCore_Api_GroupRequester#Group#onGetGroupMembers";WiziCore_Api_GroupRequester.onRemoveFromGroup="Events#WiziCore_Api_GroupRequester#Group#onRemoveFromGroup";WiziCore_Api_GroupRequester.GROUP="g";var WiziCore_Api_AccountRequester=WiziCore_Api_Base.extend({_rightsForObject:null,_cacheMyObjectRights:null,_idents:null,_rights:null,_identsParams:null,_identsParamsByUser:null,_widgets:null,init:function(a){this._super(a);this._rightsForObject={};this._cacheMyObjectRights={};this._rights={};this._context=a},getRights:function(a,c){var b=this;this.apiRequest("getRights",[a],function(e,d){b.onGetRights(d,a,c)})},onGetRights:function(b,a,e){var d=b.error;var c=b.object;if(d==false){this._rights[a]=c.result}if(typeof e=="function"){e(d,c)}$(this).trigger(WiziCore_Api_AccountRequester.onGetRights,[d,c])},rights:function(){return this._rights},setRights:function(a,c,d){var b=this;this._rights[a]=c;this.apiRequest("setRights",[a,c],function(f,e){b.onSetRights(e,d)})},onSetRights:function(a,b){if(typeof b=="function"){b(a.error,a.object)}$(this).trigger(WiziCore_Api_AccountRequester.onSetRights,[a.error,a.object])},getObjectPermissions:function(a){var b=this;this.apiRequest("getObjectPermissions",[a],function(d,c){b.onGetObjectPermissions(c,a)})},onGetObjectPermissions:function(b,a){if(b.error==false){this._rightsForObject[a]=b.object.result}$(this).trigger(WiziCore_Api_AccountRequester.onGetObjectPermissions,[b.error,b.object])},setObjectPermissions:function(a,c){var b=this;this.apiRequest("setObjectPermissions",[a,c],function(e,d){b.onSetObjectPermissions(d)})},onSetObjectPermissions:function(a){$(this).trigger(WiziCore_Api_AccountRequester.onSetObjectPermissions,[a.error,a.object])},clearMyObjectPermissionsCache:function(a){a=this.getSectionForMyCache(a);delete this._cacheMyObjectRights[a]},getSectionForMyCache:function(a){return(a==undefined)?"_default_":a},getMyObjectPermissions:function(a,c,d){c=this.getSectionForMyCache(c);if(this._cacheMyObjectRights[c]&&this._cacheMyObjectRights[c][a]){this.onGetMyObjectPermissions({error:false,object:{result:this._cacheMyObjectRights[c][a]}},undefined,c,d)}else{var b=this;this.apiRequest("getMyObjectPermissions",[a],function(f,e){b.onGetMyObjectPermissions(e,a,c,d)})}},onGetMyObjectPermissions:function(b,a,e,f){var c=b.object;var d={};if(b.error==true||c.result==null){}else{d=c.result;if(this._cacheMyObjectRights[e]==undefined){this._cacheMyObjectRights[e]={}}if(a!=undefined){this._cacheMyObjectRights[e][a]=d}}if(typeof f=="function"){f(d)}},identifiers:function(){if(this._idents==null){this._idents={}}return this._idents},widgets:function(){if(this._widgets==null){this._widgets={}}return this._widgets},identParams:function(){if(this._identsParams==null){this._identsParams={}}return this._identsParams},identParamsByUser:function(a){if(this._identsParamsByUser[a]==null){this._identsParamsByUser[a]={}}return this._identsParamsByUser},createIdent:function(b){var a=this;this.apiRequest("createUserIdentifier",[b],function(d,c){a.onIdentCreated(c)})},onIdentCreated:function(a){var c=a.error;var b=a.object;if(a.error==true){}else{if(b.result!=null&&b.result!=undefined){this._idents[b.result.id_identifier]=b.result}}$(this).trigger(WiziCore_Api_AccountRequester.onCreated,[c,b])},deleteIdent:function(c,b){var a=this;b=(b!=undefined)?b:null;this.apiRequest("deleteUserIdentifier",[c],function(e,d){a.onIdentDeleted(d)})},onIdentDeleted:function(a){var c=a.error;var b=a.object;$(this).trigger(WiziCore_Api_AccountRequester.onDeleted,[c,b])},saveIdent:function(c,b){var a=this;b=(b!=undefined)?b:null;this.apiRequest("saveUserIdentifier",[c,b],function(e,d){a.onIdentSaved(d)})},saveIdentById:function(a){if(this.identifiers()[a]===undefined){throw new WiziCore_Api_Error("Need theme",WiziCore_Api_Error.ERR_NEED_OBJECT)}var b=this.identifiers()[a];this.saveIdent(b)},onIdentSaved:function(a){var c=a.error;var b=a.object;if(!c&&b.result.id_identifier){this.identifiers()[b.result.id_identifier]=b.result}$(this).trigger(WiziCore_Api_AccountRequester.onSaved,[c,b])},loadIdent:function(b){var a=this;this.apiRequest("getIdentifiers",[b],function(d,c){a.onIdentLoaded(c,b)})},onIdentLoaded:function(a,e){var d=a.error;var c=a.object;if(!d){var b=this.identifiers()[e];if(b==undefined){this.identifiers()[e]=c.result}$(this).trigger(WiziCore_Api_AccountRequester.onLoaded,[d,c.result])}else{$(this).trigger(WiziCore_Api_AccountRequester.onLoaded,[d,a])}},loadIdentList:function(){var a=this;this.apiRequest("getUserIdentifiers",[null],function(c,b){a.onIdentListLoaded(b)})},onIdentListLoaded:function(a){var b=a.object;if(a.error==true||b.result==null){$(this).trigger(WiziCore_Api_AccountRequester.onError,[b])}else{this._idents={};for(var c in b.result){var d=b.result[c];if(d.params.length==0){d.params=[]}this.identifiers()[d.id_identifier]=d}}$(this).trigger(WiziCore_Api_AccountRequester.onListLoaded,[this.identifiers()])},saveIdentParams:function(d,c,b){var a=this;this.apiRequest("saveUserIdentifierParams",[d,b],function(f,e){a.onIdentParamsSaved(e,c)})},onIdentParamsSaved:function(a,d){var c=a.error;var b=a.object;if(!c){this.context().dataObject().setUserParameters([b.result])}if(d!=undefined){d(c,b)}$(this).trigger(WiziCore_Api_AccountRequester.onParamsSaved,[c,b])},loadIdentsParamsByUser:function(c,d){var a=this;var b=c;this.apiRequest("getUserIdentifiersParams",[c],function(g,e){var f=b;a.onIdentsParamsLoaded(e,d,f)})},loadIdentsParams:function(b){var a=this;this.apiRequest("getUserIdentifiersParams",[],function(d,c){a.onIdentsParamsLoaded(c,b)})},onIdentsParamsLoaded:function(a,g,e){var c=a.object;var b=a.error;if(b==true||c.result==null){$(this).trigger(WiziCore_Api_AccountRequester.onError,[c])}else{if(e!=undefined){this._identsParamsByUser=(this._identsParamsByUser==null)?{}:this._identsParamsByUser;this._identsParamsByUser[e]={};for(var d in c.result){var f=c.result[d];if(f.params.length==0){f.params=[]}this._identsParamsByUser[e][f.id_identifier]=f}}else{this._identsParams={};for(var d in c.result){var f=c.result[d];if(f.params.length==0){f.params=[]}this._identsParams[f.id_identifier]=f}this.context().dataObject().setUserParameters(this.identParams())}}try{if(g!=undefined){g(b,this.identParams())}if(e!=undefined){$(this).trigger(WiziCore_Api_AccountRequester.onParamsLoaded,[b,this.identParamsByUser(e)])}else{$(this).trigger(WiziCore_Api_AccountRequester.onParamsLoaded,[b,this.identParams()])}}catch(h){acDebugger.systemLog("onIdentsParamsLoaded : error",h)}},loadWidgetsList:function(){var a=this;this.apiRequest("getWidgetList",[null],function(c,b){a.onWidgetsListLoaded(b)})},onWidgetsListLoaded:function(a){var b=a.object;if(a.error==true||b.result==null){$(this).trigger(WiziCore_Api_AccountRequester.onError,[b])}else{this._widgets={};for(var c in b.result){var d=b.result[c];this.widgets()[d.id]=d}}$(this).trigger(WiziCore_Api_AccountRequester.onListWidgetsLoaded,[this.widgets()])},createWidget:function(b){var a=this;this.apiRequest("createWidget",[b],function(d,c){a.onWidgetCreated(c)})},onWidgetCreated:function(a){var c=a.error;var b=a.object;if(a.error==true){}else{if(b.result!=null&&b.result!=undefined){this._widgets[b.result.id]=b.result}}$(this).trigger(WiziCore_Api_AccountRequester.onWidgetCreated,[c,b])},deleteWidget:function(b){var a=this;this.apiRequest("deleteWidget",[b],function(d,c){a.onWidgetDeleted(c)})},onWidgetDeleted:function(a){var c=a.error;var b=a.object;$(this).trigger(WiziCore_Api_AccountRequester.onWidgetDeleted,[c,b])},saveWidget:function(b,c){var a=this;this.apiRequest("saveWidget",[b],function(e,d){a.onWidgetSaved(d,c)})},onWidgetSaved:function(a,d){var c=a.error;var b=a.object;if(d!=undefined){d(c,b)}$(this).trigger(WiziCore_Api_AccountRequester.onWidgetSaved,[c,b])},setAccountSettings:function(b,c){var a=this;this.apiRequest("setAccountSettings",[b],function(e,d){a.onAccountSettingsSets(d,c)})},onAccountSettingsSets:function(a,d){var c=a.error;var b=a.object;if(d!=undefined){d(c,b)}},getAccountSettings:function(b,c){var a=this;this.apiRequest("getAccountSettings",[b],function(e,d){a.onAccountSettingsGets(d,c)})},onAccountSettingsGets:function(a,d){var c=a.error;var b=a.object;if(d!=undefined){d(c,b)}}});WiziCore_Api_AccountRequester.rights=["login","public folder","form","resource","connection","query","account","user","int agent","widget","theme"];WiziCore_Api_AccountRequester.RIGHTS_LOGIN="login";WiziCore_Api_AccountRequester.RIGHTS_PUBLIC_FOLDER="public folder";WiziCore_Api_AccountRequester.RIGHTS_FORM="form";WiziCore_Api_AccountRequester.RIGHTS_RESOURCE="resource";WiziCore_Api_AccountRequester.RIGHTS_CONNECTION="connection";WiziCore_Api_AccountRequester.RIGHTS_QUERY="query";WiziCore_Api_AccountRequester.RIGHTS_ACCOUNT="account";WiziCore_Api_AccountRequester.RIGHTS_USER="user";WiziCore_Api_AccountRequester.RIGHTS_ACCOUNT="account";WiziCore_Api_AccountRequester.RIGHTS_INTEGRATION_AGENT="int agent";WiziCore_Api_AccountRequester.RIGHTS_WIDGET="widget";WiziCore_Api_AccountRequester.RIGHTS_THEME="theme";WiziCore_Api_AccountRequester.PERMISSION_LIST="list";WiziCore_Api_AccountRequester.PERMISSION_USE="use";WiziCore_Api_AccountRequester.PERMISSION_EDIT="edit";WiziCore_Api_AccountRequester.PERMISSION_ADMIN="admin";WiziCore_Api_AccountRequester.onGetRights="Events#WiziCore_Api_AccountRequester#onGetRights";WiziCore_Api_AccountRequester.onSetRights="Events#WiziCore_Api_AccountRequester#onSetRights";WiziCore_Api_AccountRequester.onGetObjectPermissions="Events#WiziCore_Api_AccountRequester#onGetObjectPermissions";WiziCore_Api_AccountRequester.onSetObjectPermissions="Events#WiziCore_Api_AccountRequester#onSetObjectPermissions";WiziCore_Api_AccountRequester.ALLOW="a";WiziCore_Api_AccountRequester.DENY="d";WiziCore_Api_AccountRequester.ALL_USERS="00000000-0000-0000-0000-000000000000";WiziCore_Api_AccountRequester.AUTH_USERS="00000000-0000-0000-0000-000000000001";WiziCore_Api_AccountRequester.SWIRL_USERS="00000000-0000-0000-0000-000000000002";WiziCore_Api_AccountRequester.onError="Events#WiziCore_Api_AccountRequester#onError";WiziCore_Api_AccountRequester.onCreated="Events#WiziCore_Api_AccountRequester#onCreated";WiziCore_Api_AccountRequester.onWidgetCreated="Events#WiziCore_Api_AccountRequester#onWidgetCreated";WiziCore_Api_AccountRequester.onSaved="Events#WiziCore_Api_AccountRequester#onSaved";WiziCore_Api_AccountRequester.onWidgetSaved="Events#WiziCore_Api_AccountRequester#onWidgetSaved";WiziCore_Api_AccountRequester.onDeleted="Events#WiziCore_Api_AccountRequester#onDeleted";WiziCore_Api_AccountRequester.onWidgetDeleted="Events#WiziCore_Api_AccountRequester#onWidgetDeleted";WiziCore_Api_AccountRequester.onListLoaded="Events#WiziCore_Api_AccountRequester#onListLoaded";WiziCore_Api_AccountRequester.onListWidgetsLoaded="Events#WiziCore_Api_AccountRequester#onListWidgetsLoaded";WiziCore_Api_AccountRequester.onLoaded="Events#WiziCore_Api_AccountRequester#onLoaded";WiziCore_Api_AccountRequester.onParamsSaved="Events#WiziCore_Api_AccountRequester#onParamsSaved";WiziCore_Api_AccountRequester.onParamsLoaded="Events#WiziCore_Api_AccountRequester#onParamsLoaded";WiziCore_Api_AccountRequester.SMTP_PARAMS="SMTP";WiziCore_Api_AccountRequester.PHONEGAP_PARAMS="PhoneGap";WiziCore_Api_AccountRequester.GOOGLEANALYTICS_PARAMS="GoogleAnalytics";WiziCore_Api_AccountRequester.GOOGLEANALYTICS_PARAMS_ACCOUNTID="accountid";WiziCore_Api_AccountRequester.SMTP_PARAMS_HOST="host";WiziCore_Api_AccountRequester.SMTP_PARAMS_USER="user";WiziCore_Api_AccountRequester.SMTP_PARAMS_PWD="password";WiziCore_Api_AccountRequester.SMTP_PARAMS_CONN_SEC="security";var WiziCore_Api_FoldersRequester=WiziCore_Api_Base.extend({init:function(a){this._super(a);this._context=a},createFolder:function(c,b){var a=this;this.apiRequest("createFolder",[c,b],function(e,d){a.onFolderCreated(d,c)})},onFolderCreated:function(a,d){var c=a.error;var b=a.object;$(this).trigger(WiziCore_Api_FoldersRequester.onCreated+d,[c,b])},deleteFolder:function(d,c,b){var a=this;this.apiRequest("deleteFolder",[d,c,b],function(f,e){a.onFolderDeleted(e,d)})},getFolderItems:function(d,c,b){var a=this;this.apiRequest("getFolderDependency",[d,c,b],function(f,e){a.onGetFolderItems(e,d)})},onGetFolderItems:function(a,d){var c=a.error;var b=a.object;$(this).trigger(WiziCore_Api_FoldersRequester.onGetFolderItems+d,[c,b])},onFolderDeleted:function(a,d){var c=a.error;var b=a.object;$(this).trigger(WiziCore_Api_FoldersRequester.onDeleted+d,[c,b])},saveFolder:function(c,b){var a=this;this.apiRequest("saveFolder",[c,b],function(e,d){a.onFolderSaved(d,c)})},onFolderSaved:function(a,d){var c=a.error;var b=a.object;$(this).trigger(WiziCore_Api_FoldersRequester.onSaved+d,[c,b])},loadFolderList:function(c,b){var a=this;this.apiRequest("getFolders",[c,b],function(e,d){a.onFolderListLoaded(d,c)})},onFolderListLoaded:function(a,d){var c=a.object;var b=[];if(a.error==true||c.result==null){$(this).trigger(WiziCore_Api_FoldersRequester.onError+d,[c])}else{if(c.result instanceof Array){b=c.result}}$(this).trigger(WiziCore_Api_FoldersRequester.onFoldersLoaded+d,[b])},getSharedUserList:function(b){var a=this;this.apiRequest("getSharedUserList",[b],function(d,c){a.onGetSharedUserList(c,b)})},onGetSharedUserList:function(a,d){var c=a.object;var b=[];if(a.error==true||c.result==null){$(this).trigger(WiziCore_Api_FoldersRequester.onError+d,[c])}else{b=c.result}$(this).trigger(WiziCore_Api_FoldersRequester.onGetSharedUserList+d,[b])},getSharedFoldersList:function(c,b){var a=this;this.apiRequest("getSharedFoldersList",[c,b],function(e,d){a.onGetSharedFoldersList(d,c)})},onGetSharedFoldersList:function(a,d){var c=a.object;var b=[];if(a.error==true||c.result==null){$(this).trigger(WiziCore_Api_FoldersRequester.onError+d,[c])}else{b=c.result}$(this).trigger(WiziCore_Api_FoldersRequester.onGetSharedFoldersList+d,[b])},getSharedItemsList:function(c,b){var a=this;this.apiRequest("getSharedItemsList",[c,b],function(e,d){a.onGetSharedItemsList(d,c)})},onGetSharedItemsList:function(a,d){var c=a.object;var b=[];if(a.error==true||c.result==null){$(this).trigger(WiziCore_Api_FoldersRequester.onError+d,[c])}else{b=c.result;switch(d){case"form":this.context().forms().addForms(b);break}}$(this).trigger(WiziCore_Api_FoldersRequester.onGetSharedItemsList+d,[b])},addToPublicFolder:function(d,b,a){var c=this;this.apiRequest("addToPublicFolder",[d,b,a],function(f,e){c.onAddToPublicFolder(e,d)})},onAddToPublicFolder:function(a,b){$(this).trigger(WiziCore_Api_FoldersRequester.onAddToPublicFolder+b,[a])},removeFromPublicFolder:function(d,b,a){var c=this;this.apiRequest("removeFromPublicFolder",[d,b,a],function(f,e){c.onRemoveFromPublicFolder(e,d)})},onRemoveFromPublicFolder:function(a,b){$(this).trigger(WiziCore_Api_FoldersRequester.onRemoveFromPublicFolder+b,[a.error,a.object])},getPublicSubFolders:function(c,a){var b=this;this.apiRequest("getPublicSubFolders",[c,a],function(e,d){b.onGetPublicSubFolders(d,c)})},onGetPublicSubFolders:function(a,d){var c=a.object;var b=[];if(a.error==true||c.result==null){$(this).trigger(WiziCore_Api_FoldersRequester.onError+d,[c])}else{b=c.result}$(this).trigger(WiziCore_Api_FoldersRequester.onGetPublicSubFolders+d,[b])},getPublicFolderChildren:function(c,a){var b=this;this.apiRequest("getPublicFolderChildren",[c,a],function(e,d){b.onGetPublicFolderChildren(d,c)})},onGetPublicFolderChildren:function(a,d){var c=a.object;var b=[];if(a.error==true||c.result==null){$(this).trigger(WiziCore_Api_FoldersRequester.onError+d,[c])}else{b=c.result}$(this).trigger(WiziCore_Api_FoldersRequester.onGetPublicFolderChildren+d,[b])},createPublicFolder:function(c,b){var a=this;this.apiRequest("createPublicFolder",[c,b],function(e,d){a.onCreatePublicFolder(d,c)})},onCreatePublicFolder:function(a,d){var c=a.error;var b=a.object;$(this).trigger(WiziCore_Api_FoldersRequester.onCreatePublicFolder+d,[c,b])},deletePublicFolder:function(d,c,b){var a=this;this.apiRequest("deletePublicFolder",[d,c,b],function(f,e){a.onDeletePublicFolder(e,d)})},onDeletePublicFolder:function(a,d){var c=a.error;var b=a.object;$(this).trigger(WiziCore_Api_FoldersRequester.onDeletePublicFolder+d,[c,b])},getFolder:function(c,b){var a=this;this.apiRequest("getFolder",[c,b],function(e,d){a.onGetFolder(d,c)})},onGetFolder:function(a,d){var c=a.error;var b=a.object;$(this).trigger(WiziCore_Api_FoldersRequester.onGetFolder+d,[c,b])}});WiziCore_Api_FoldersRequester.FORM="form";WiziCore_Api_FoldersRequester.QUERY="query";WiziCore_Api_FoldersRequester.CONNECTION="connection";WiziCore_Api_FoldersRequester.RESOURCE="resource";WiziCore_Api_FoldersRequester.THEME="theme";WiziCore_Api_FoldersRequester.DATA_AGENT="data_agent";WiziCore_Api_FoldersRequester.WIDGETS="widgets";WiziCore_Api_FoldersRequester.USER="user";WiziCore_Api_FoldersRequester.GROUP="group";WiziCore_Api_FoldersRequester.ACCOUNT="account";WiziCore_Api_FoldersRequester.MYDETAILS="myDetails";WiziCore_Api_FoldersRequester.onError="Events#WiziCore_Api_FoldersRequester#onError#";WiziCore_Api_FoldersRequester.onCreated="Events#WiziCore_Api_FoldersRequester#onCreated#";WiziCore_Api_FoldersRequester.onGetFolder="Events#WiziCore_Api_FoldersRequester#onGetFolder#";WiziCore_Api_FoldersRequester.onFoldersLoaded="Events#WiziCore_Api_FoldersRequester#onFoldersLoaded#";WiziCore_Api_FoldersRequester.onDeleted="Events#WiziCore_Api_FoldersRequester#onDeleted#";WiziCore_Api_FoldersRequester.onSaved="Events#WiziCore_Api_FoldersRequester#onSaved#";WiziCore_Api_FoldersRequester.onGetSharedUserList="Events#WiziCore_Api_FoldersRequester#onGetSharedUserList#";WiziCore_Api_FoldersRequester.onGetSharedFoldersList="Events#WiziCore_Api_FoldersRequester#onGetSharedFoldersList#";WiziCore_Api_FoldersRequester.onGetSharedItemsList="Events#WiziCore_Api_FoldersRequester#onGetSharedItemsList#";WiziCore_Api_FoldersRequester.onAddToPublicFolder="Events#WiziCore_Api_FoldersRequester#onAddToPublicFolder#";WiziCore_Api_FoldersRequester.onRemoveFromPublicFolder="Events#WiziCore_Api_FoldersRequester#onRemoveToPublicFolder#";WiziCore_Api_FoldersRequester.onGetPublicSubFolders="Events#WiziCore_Api_FoldersRequester#onGetPublicSubFolders#";WiziCore_Api_FoldersRequester.onGetPublicFolderChildren="Events#WiziCore_Api_FoldersRequester#onGetPublicFolderChildren#";WiziCore_Api_FoldersRequester.onCreatePublicFolder="Events#WiziCore_Api_FoldersRequester#onCreatePublicFolder#";WiziCore_Api_FoldersRequester.onDeletePublicFolder="Events#WiziCore_Api_FoldersRequester#onDeletePublicFolder#";WiziCore_Api_FoldersRequester.onGetFolderItems="Events#WiziCore_Api_FoldersRequester#onGetFolderItems#";var WiziCore_Api_FormInstanceRequester=WiziCore_Api_Base.extend({_formInstances:null,init:function(a){this._super(a);this._formInstances={};this._context=a},submitFormInstance:function(a,e,g,d){var c={abortSaving:false};$(this).trigger(WiziCore_Api_FormInstanceRequester.onPreSubmit,[c]);if(c.abortSaving){acDebugger.systemLog("aborted submission of form instance");WiziCore_Helper.callCallback(d,[]);return}acDebugger.systemLog("create and send request for formInstance create");var b=this;var f=(a)?"createFormInstance":"saveFormInstance";this.apiRequest(f,[e],function(i,h){b.onFormInstanceSubmitted(h,a,g)})},onFormInstanceSubmitted:function(e,c,h){var g=e.error;var b=e.object;var a=undefined;var d=undefined;var f=null;if(g==true){f=b;acDebugger.systemLog("error ",b)}else{a=b.result;d=a.id_form_instance}WiziCore_Helper.callCallback(h,[f,d,c,a]);$(this).trigger(WiziCore_Api_FormInstanceRequester.onSubmitted,[f,d,c,a])},saveFormInstanceDraft:function(b){acDebugger.systemLog("saved and send request for formInstanceDraft save");var a=this;this.apiRequest("saveFormInstanceDraft",[b],function(d,c){a.onFormInstanceDraftSaved(c)})},onFormInstanceDraftSaved:function(b){var c=b.error;var a=b.object;if(c){acDebugger.systemLog("error ",a)}else{acDebugger.systemLog("object.result DRAFT",a.result)}},formInstances:function(){if(this._formInstances==null){this._formInstances={}}return this._formInstances},loadFormInstance:function(b,c){var a=this;this.apiRequest("getFormInstance",[b],function(e,d){a.onFormInstanceLoaded(d,b,c)})},onFormInstanceLoaded:function(e,c,d){var g=e.error;var b=e.object;var f=null;var a=undefined;if(g==true){f=b}else{a=b.result}$(this).trigger(WiziCore_Api_FormInstanceRequester.onLoaded,[f,c,a]);WiziCore_Helper.callCallback(d,[f,c,a])},loadFormInstanceList:function(c,d){var a=this;var b=[[{key:"id_form",value:[c]},{key:"status",value:[1]}],false];this.apiRequest("getFormInstanceList",b,function(f,e){a.onFormInstanceListLoaded(e,d)})},onFormInstanceListLoaded:function(c,f){var e=c.error;var a=c.object;var d=(e==true)?a:null;var b=a.result;WiziCore_Helper.callCallback(f,[d,b])},deleteFormInstance:function(b,c){var a=this;this.apiRequest("deleteFormInstance",[b],function(e,d){a.onFormInstanceDeleted(d,b,c)})},onFormInstanceDeleted:function(d,c,g){var f=d.error;var b=d.object;var e=(f==true)?b:null;var a=(f==true)?undefined:b.result;WiziCore_Helper.callCallback(g,[e,c,a])},deleteAllInstances:function(b,c){var a=this;this.apiRequest("deleteAllInstances",[b],function(e,d){a.onDeletedAllInstances(d,c)})},onDeletedAllInstances:function(b,e){var d=b.error;var a=b.object;var c=(d==true)?a:null;WiziCore_Helper.callCallback(e,[c])},setInstanceRelations:function(b,c,d){var a=this;this.apiRequest("setInstanceRelations",[b,c],function(f,e){a.onInstanceRelationsSet(e,b,d)})},onInstanceRelationsSet:function(d,c,g){var f=d.error;var b=d.object;var e=(f==true)?b:null;var a=(f==true)?undefined:b.result;WiziCore_Helper.callCallback(g,[e,c,a])},changeAppData:function(c,a,e,f,d,g){var b=this;this.apiRequest("changeAppData",[c,a,e,f,d],function(i,h){b.onChangeAppData(h,g)})},onChangeAppData:function(c,f){var e=c.error;var a=c.object;var d=(e==true)?a:null;var b=(e==true)?null:a.result;WiziCore_Helper.callCallback(f,[d,b])}});WiziCore_Api_FormInstanceRequester.onLoaded="Events#WiziCore_Api_FormInstanceRequester#Form#onLoaded";WiziCore_Api_FormInstanceRequester.onListLoaded="Events#WiziCore_Api_FormInstanceRequester#Form#onListLoaded";WiziCore_Api_FormInstanceRequester.onSaved="Events#WiziCore_Api_FormInstanceRequester#Form#Saved";WiziCore_Api_FormInstanceRequester.onSubmitted="Events#WiziCore_Api_FormInstanceRequester#Form#Submitted";WiziCore_Api_FormInstanceRequester.onPreSubmit="Event#WiziCore_Api_FormInstanceRequester#onPreSubmit";var WiziCore_Api_Storage=WiziCore_Api_Base.extend({_dataObject:null,_dataSchema:null,init:function(a,b,c){this._super(a);this._dataObject=b;this._dataSchema=c},setDataField:function(d,b,a){if(d==undefined){return}if(b==undefined){return}var c=this._dataObject[d];this._dataObject[d]=b;if(c!=b){if(a!=undefined){$(this).trigger(WiziCore_Api_ClientForm.onStorageChanged,[this,d,a])}}},dataField:function(c){if(c==undefined){acDebugger.systemLog("No dataFieldName");return null}var b=undefined;if(this._dataSchema!=undefined&&this._dataSchema!=null){b=this._dataSchema[c]}var a=this._dataObject[c];if(b!=undefined){}return a},fieldIsValid:function(b,a){switch(b.type){case"string":return(typeof a=="string");case"float":return this.isFloat(a);case"integer":return this.isInteger(a);case"date":return this.isDate(a);case"complex":return this.complexFieldIsValid(b.schema,a)}},isFloat:function(a){return false},isInteger:function(a){return false},isDate:function(a){return false},complexFieldIsValid:function(c,e){for(var d in e){var b=c[d];if(b==undefined){acDebugger.systemLog("No dataField in schema with name ",dataFieldName);return null}var a=this._dataObject[d];if(!this.fieldIsValid(b,a)){return false}}return true}});var WiziCore_Api_DataAgentRequester=WiziCore_Api_Base.extend({_dataAgents:null,_daFolders:null,_daTypes:null,init:function(a){this._super(a);this._dataAgents={};this._daTypes={};this._context=a},createDataAgent:function(b){var a=this;this.apiRequest("createDataAgent",[b],function(d,c){a.onDataAgentCreated(c)})},onDataAgentCreated:function(c){var d=c.error;var b=c.object;var a=null;if(d==true){a=b}else{this._dataAgents[b.result.id_data_agent]=b.result;a=b.result}$(this).trigger(WiziCore_Api_DataAgentRequester.onCreated,[d,a])},deleteDataAgent:function(b){var a=this;this.apiRequest("deleteDataAgent",[b],function(d,c){a.onDataAgentDeleted(c)})},onDataAgentDeleted:function(a){var c=a.error;var b=a.object;$(this).trigger(WiziCore_Api_DataAgentRequester.onDeleted,[c,b])},saveDataAgent:function(b,c){var a=this;acDebugger.systemLog("data",b);this.apiRequest("saveDataAgent",[b],function(e,d){a.onDataAgentSaved(d,c)})},saveDataAgentById:function(a,c){if(this.dataAgents()[a]===undefined){throw new WiziCore_Api_Error("Need theme",WiziCore_Api_Error.ERR_NEED_OBJECT)}var b=this.dataAgents()[a];this.saveDataAgent(b,c)},onDataAgentSaved:function(a,d){var c=a.error;var b=a.object;if(typeof d=="function"){d(c,b)}$(this).trigger(WiziCore_Api_DataAgentRequester.onSaved,[c,b])},loadDataAgent:function(b,c){var a=this;this.apiRequest("getDataAgent",[b],function(e,d){a.onDataAgentLoaded(d,b,c)})},onDataAgentLoaded:function(a,f,g){var c=a.error;var b=a.object;var d=a;if(!c){var e=this.dataAgents()[f];if(e==undefined){this.dataAgents()[f]=b.result}d=b.result}$(this).trigger(WiziCore_Api_DataAgentRequester.onLoaded,[c,d]);if(typeof g=="function"){g(c,d)}},loadDataAgentList:function(b){var a=this;this.apiRequest("getUserDataAgents",[],function(d,c){a.onDataAgentListLoaded(c,b)})},onDataAgentListLoaded:function(a,e){var b=a.object;if(a.error==true||b.result==null){$(this).trigger(WiziCore_Api_DataAgentRequester.onError,[b])}else{this._dataAgents={};for(var c in b.result){var d=b.result[c];if(d.params.length==0){d.params={}}this.dataAgents()[d.id_data_agent]=d}if(typeof e=="function"){e(this.dataAgents())}}$(this).trigger(WiziCore_Api_DataAgentRequester.onListLoaded,[this.dataAgents()])},loadDataAgentTypes:function(){var a=this;this.apiRequest("getAvailableDataAgentTypes",[],function(c,b){a.onLoadDataAgentTypes(b)})},onLoadDataAgentTypes:function(a){var d=a.error;var c=a.object;var b=this;if(a.error==true||c.result==null){}else{this._daTypes={};for(var e in c.result){var f=c.result[e];this._daTypes[e]=f}}$(this).trigger(WiziCore_Api_DataAgentRequester.onLoadDataAgentTypes,[d,b.dataAgentTypes()])},loadDataAgentFolderList:function(){var a=this;var b=this.context().folders();$(b).one(WiziCore_Api_FoldersRequester.onFoldersLoaded+WiziCore_Api_FoldersRequester.DATA_AGENT,function(c,d){a.onDataAgentFolderListLoaded(d)});b.loadFolderList(WiziCore_Api_FoldersRequester.DATA_AGENT)},onDataAgentFolderListLoaded:function(a){this._daFolders=a;$(this).trigger(WiziCore_Api_DataAgentRequester.onFolderListLoaded,[a])},createDataAgentFolder:function(c,b){var a=this;var d=this.context().folders();if(b){$(d).one(WiziCore_Api_FoldersRequester.onCreatePublicFolder+WiziCore_Api_FoldersRequester.DATA_AGENT,function(g,f,e){a.onDataAgentFolderCreated(f,e)});d.createPublicFolder(WiziCore_Api_FoldersRequester.DATA_AGENT,c)}else{$(d).one(WiziCore_Api_FoldersRequester.onCreated+WiziCore_Api_FoldersRequester.DATA_AGENT,function(g,f,e){a.onDataAgentFolderCreated(f,e)});d.createFolder(WiziCore_Api_FoldersRequester.DATA_AGENT,c)}},onDataAgentFolderCreated:function(b,a){$(this).trigger(WiziCore_Api_DataAgentRequester.onFolderCreated,[b,a])},deleteDataAgentFolder:function(c,b,d){var a=this;var e=this.context().folders();if(d){$(e).one(WiziCore_Api_FoldersRequester.onDeleted+WiziCore_Api_FoldersRequester.DATA_AGENT,function(h,g,f){a.onDataAgentFolderDeleted(g,f)});e.deletePublicFolder(WiziCore_Api_FoldersRequester.DATA_AGENT,c,b)}else{$(e).one(WiziCore_Api_FoldersRequester.onDeleted+WiziCore_Api_FoldersRequester.DATA_AGENT,function(h,g,f){a.onDataAgentFolderDeleted(g,f)});e.deleteFolder(WiziCore_Api_FoldersRequester.DATA_AGENT,c,b)}},onDataAgentFolderDeleted:function(b,a){$(this).trigger(WiziCore_Api_DataAgentRequester.onFolderDeleted,[b,a])},saveDataAgentFolder:function(b){var a=this;var c=this.context().folders();$(c).one(WiziCore_Api_FoldersRequester.onSaved+WiziCore_Api_FoldersRequester.DATA_AGENT,function(f,e,d){a.onDataAgentFolderSaved(e,d)});c.saveFolder(WiziCore_Api_FoldersRequester.DATA_AGENT,b)},onDataAgentFolderSaved:function(b,a){$(this).trigger(WiziCore_Api_DataAgentRequester.onFolderSaved,[b,a])},dataAgents:function(){if(this._dataAgents==null){this._dataAgents={}}return this._dataAgents},dataAgentTypes:function(){if(this._daTypes==null){this._daTypes={}}return this._daTypes}});WiziCore_Api_DataAgentRequester.onSaved="Events#WiziCore_Api_DataAgentRequester#DataAgentSaved";WiziCore_Api_DataAgentRequester.onListLoaded="Events#WiziCore_Api_DataAgentRequester#ListLoaded";WiziCore_Api_DataAgentRequester.onCreated="Events#WiziCore_Api_DataAgentRequester#DataAgent#Created";WiziCore_Api_DataAgentRequester.onDeleted="Events#WiziCore_Api_DataAgentRequester#DataAgent#Deleted";WiziCore_Api_DataAgentRequester.onFolderListLoaded="Events#WiziCore_Api_DataAgentRequester#Folder#ListLoaded";WiziCore_Api_DataAgentRequester.onFolderCreated="Events#WiziCore_Api_DataAgentRequester#Folder#Created";WiziCore_Api_DataAgentRequester.onFolderDeleted="Events#WiziCore_Api_DataAgentRequester#Folder#Deleted";WiziCore_Api_DataAgentRequester.onFolderSaved="Events#WiziCore_Api_DataAgentRequester#Folder#Saved";WiziCore_Api_DataAgentRequester.onError="Events#WiziCore_Api_DataAgentRequester#Error";WiziCore_Api_DataAgentRequester.onLoadDataAgentTypes="Events#WiziCore_Api_DataAgentRequester#TypesLoaded";WiziCore_Api_DataAgentRequester.onLoaded="Events#WiziCore_Api_DataAgentRequester#AgentLoaded";var WiziCore_Api_InstanceStatusRequester=WiziCore_Api_Base.extend({_instanceStatuses:null,init:function(){this._instanceStatuses={}},_addVersion:function(d,a){if(this._instanceStatuses[d]==undefined){this._instanceStatuses[d]={}}var c=this._instanceStatuses[d];if(c[a]==a){return}var b={status:WiziCore_Api_InstanceStatusRequester.Status.PENDING,error:null};c[a]=b},addInstances:function(f){var g=true;for(var e in this._instanceStatuses){g=false;break}for(var c=0,b=f.length;c<b;++c){var d=f[c];var h=d.id;var a=d.version;this._addVersion(h,a)}if(g){this._requestStatuses()}},addInstance:function(d,a){var c=true;for(var b in this._instanceStatuses){c=false;break}this._addVersion(d,a);if(c){this._requestStatuses()}},_requestStatuses:function(){var a=this;var b=WiziCore_Helper.clone(this._instanceStatuses);this.checkStatus(this._instanceStatuses,function(d,c){if(d){a._onErrorRequestingStatus()}else{a._checkChangedStatuses(c,b)}})},_onErrorRequestingStatus:function(){for(var d in this._instanceStatuses){var c=this._instanceStatuses[d];for(var b in c){var a=c[b];a.status=WiziCore_Api_InstanceStatusRequester.Status.ERROR;$(this).trigger(WiziCore_Api_InstanceStatusRequester.onInstanceStatusChanged,[d,b,a])}}this._instanceStatuses={}},_checkChangedStatuses:function(e,c){var j=[];for(var b in this._instanceStatuses){var o=this._instanceStatuses[b];for(var n in o){var q=o[n];var p=(b in c&&n in c[b])?c[b][n]:null;if(p==null){continue}var m=null;if(e!=null&&e[b]!=undefined){if(e[b][n]!=undefined){m=e[b][n]}}acDebugger.systemLog1("checking instance statuses",b,n,m);if(m==null){q.status=WiziCore_Api_InstanceStatusRequester.Status.ERROR;$(this).trigger(WiziCore_Api_InstanceStatusRequester.onInstanceStatusChanged,[b,n,q]);j.push({id:b,version:n})}else{var f=q.status;var k=m.status;o[n]=m;if(f!=k){$(this).trigger(WiziCore_Api_InstanceStatusRequester.onInstanceStatusChanged,[b,n,m])}if(k!=WiziCore_Api_InstanceStatusRequester.Status.PENDING&&k!=WiziCore_Api_InstanceStatusRequester.Status.PROCESSING){j.push({id:b,version:n})}}}}for(var h=0,d=j.length;h<d;++h){var r=j[h];this._removeInstance(r.id,r.version)}var g=true;for(var a in this._instanceStatuses){g=false;break}if(!g){var s=this;setTimeout(function(){s._requestStatuses()},WiziCore_Api_InstanceStatusRequester.CHECK_INTERVAL)}},_removeInstance:function(e,a){if(this._instanceStatuses[e]!=undefined){var c=this._instanceStatuses[e];if(c[a]!==undefined){delete c[a];var d=true;for(var b in c){d=false;break}if(d){delete this._instanceStatuses[e]}}}},checkStatus:function(b,c){var a=this;this.apiRequest("checkInstanceStatusesChange",[b],function(e,d){a._onCheckStatusResponse(d,c)})},_onCheckStatusResponse:function(c,f){var e=c.error;var b=c.object;var d=(e)?b:null;var a=(e)?null:b.result;WiziCore_Helper.callCallback(f,[d,a])}});WiziCore_Api_InstanceStatusRequester.CHECK_INTERVAL=1000;WiziCore_Api_InstanceStatusRequester.Status={PENDING:"pending",PROCESSING:"processing",VALID:"valid",ERROR:"error",WARNING:"warning"};WiziCore_Api_InstanceStatusRequester.onInstanceStatusChanged="Events#WiziCore_Api_InstanceStatusRequester#onInstanceStatusChanged";var WiziCore_DataObject=WiziCore_Api_Base.extend({_details:{},init:function(a){this._super(a);this.setValue(this.buildPath(WiziCore_DataObject.INSTANCE,WiziCore_DataObject.ID),"")},setValue:function(b,a){this._details[b]=a;return false},getValue:function(a){return this._details[a]},setForm:function(a){},setUserDetails:function(a){this.setValue(this.buildPath(WiziCore_DataObject.USER,WiziCore_DataObject.ID),a.id);this.setValue(this.buildPath(WiziCore_DataObject.USER,WiziCore_DataObject.NAME),a.username);this.setValue(this.buildPath(WiziCore_DataObject.USER,WiziCore_DataObject.LOGIN),a.login);this.setValue(this.buildPath(WiziCore_DataObject.USER,WiziCore_DataObject.TYPE),a.type)},setFormInstance:function(a){var b=a.id();if(b!=null){this.setValue(this.buildPath(WiziCore_DataObject.INSTANCE,WiziCore_DataObject.ID),b)}},setUserParameters:function(e){for(var c in e){var a=this.buildPath(WiziCore_DataObject.USER,WiziCore_DataObject.PARAMETERS,e[c].name);for(var b in e[c].params){var d=this.buildPath(a,e[c].params[b].name);this.setValue(d,e[c].params[b].value)}}},buildPath:function(){var a=[].splice.call(arguments,0);return a.join(".")},setInstanceDetails:function(a){},getDetails:function(a){return this.getValue(a)},processString:function(e,c,a){a=(a==undefined)?true:a;if(c==undefined){return c}for(var d in this._details){if(this._details[d]==undefined){continue}var b=new RegExp("\\["+d+"\\]","g");var f=this._details[d];if(a==true){f=WiziCore_Helper.escapeString(f)}c=c.replace(b,f)}c=this.replaceWithWidgetsValues(e,c,a);return c},processToken:function(f,c,a){var e=c;a=(a==undefined)?true:a;if(e==undefined){return e}for(var d in this._details){if(this._details[d]==undefined){continue}var b=new RegExp("\\["+d+"\\]","g");var g=this._details[d];if(a==true){g=WiziCore_Helper.escapeString(g)}e=e.replace(b,g)}e=this.replaceWidgetToken(f,e);return e},addSlashes:function(a){return(a+"").split("\\").join("\\\\").split('"').join('\\"').split("'").join("\\'")},replaceWidgetToken:function(b,f){var h=new RegExp("\\[Form\\.Widgets\\.([^\\]]+)\\]","g");var e=null;var d=null;var j;var a="";if((j=h.exec(f))!=null){var a=j[1]}var i=a.split(".",2);e=i[0];d=i[1];var g=f;if(e!=undefined&&e!=""){var c=b.findName(e);if(c!=undefined){g=c.value();if(d!=undefined&&g!=undefined){if(g[d]!=undefined){g=g[d]}}}}return g},replaceWithWidgetsValues:function(a,f,l){var j=new RegExp("\\[Form\\.Widgets\\.([^\\]]+)\\]","g");var h=[];var m;while((m=j.exec(f))!=null){h.push(m[1])}var c=[];var b=h.length;for(var d=0;d<b;d++){var e=h[d];var g=a.getData(e);c.push([e,g])}b=c.length;for(var d=0;d<b;d++){var n=c[d];var k=(l==true)?WiziCore_Helper.escapeString(n[1]):n[1];f=f.replace("[Form.Widgets."+n[0]+"]",k)}return f},isInt:function(a){return WiziCore_Helper.isInt(a)},getConstants:function(){var b=[];for(var a in this._details){b.push(a)}return b},getConstantsExpression:function(){var c=[];for(var b in this._details){c.push("["+b+"]")}var a=this.getFormFields();var d=a.length;for(var b=0;b<d;b++){c.push("["+a[b]+"]")}return c},getEditorForm:function(){var a=this.managerContext().editor;return(a!=null)?a.form():undefined},getFormFields:function(){var d=this.getEditorForm();var a=this.getChildren(d);var c=a.length;for(var b=0;b<c;b++){a[b]=this.buildPath(WiziCore_DataObject.FORM,WiziCore_DataObject.WIDGETS,a[b])}return a},getChildren:function(a){return a.getFormFields()}});WiziCore_DataObject.SESSION="Session";WiziCore_DataObject.USER="User";WiziCore_DataObject.INSTANCE="Instance";WiziCore_DataObject.FORM="Form";WiziCore_DataObject.WIDGETS="Widgets";WiziCore_DataObject.PARAMETERS="Parameters";WiziCore_DataObject.ID="Id";WiziCore_DataObject.LOGIN="Login";WiziCore_DataObject.NAME="Name";WiziCore_DataObject.TYPE="Type";var WiziCore_Address_History={_stack:[],_inSetHistory:true,_addressIninted:false,_curPos:0,init:function(){var a=this;if(window==window.parent){$.address.init(function(b){a._stack.push({value:b.value});a._curPos=-1}).change(function(b){a._detectDirection(b)});this._addressIninted=true}},inSetHistory:function(){return this._inSetHistory},clearCache:function(){this._stack.length=0;this._stack=[{value:"/"}];this._curPos=-1},write:function(b,c){b=(b!="")?"/"+b:b;var a=this._stack;a.push({value:b,callback:c});this._curPos++;a.splice(this._curPos+2,a.length-(this._curPos+2));this._inSetHistory=true;if(this._addressIninted){$.address.value(b)}this._inSetHistory=false},_detectDirection:function(d){if(this._inSetHistory){return}val=d.value;$(this).trigger(WiziCore_Address_History.onChanged,[d]);var a=this._stack;var b=this._curPos;var c=a[a.length-1];var e={item:c,stack:a,curPos:b,stack_curPos:a[b],val:val};if(a[b]&&a[b].value==val){this._callMethod(-1,a[b].callback);b--}else{if(a[b+2]&&a[b+2].value==val){this._callMethod(1,(a[b]!=undefined)?a[b].callback:null);b++}}this._curPos=b},_callMethod:function(a,b){if(typeof b=="function"){b(a)}if(a==-1){$(this).trigger(WiziCore_Address_History.onBack)}else{$(this).trigger(WiziCore_Address_History.onForward)}}};WiziCore_Address_History.init();WiziCore_Address_History.onChanged="event#WiziCore_Address_History#changed";WiziCore_Address_History.onBack="event#WiziCore_Address_History#back";WiziCore_Address_History.onForward="event#WiziCore_Address_History#forward";var WiziCore_Visualizer=WiziCore_Api_Base.extend({_renderDiv:null,_mode:0,_currVisualizeProject:null,_currVisualizePage:null,_visualized:null,_pageStack:null,init:function(){this._super();this._visualized=[];var a=this;this._pageStack={data:[],ptr:null,maxSize:50,forward:function(){if(this.ptr==null||this.ptr==this.data.length-1){return null}return this.data[++this.ptr]},back:function(){if(this.ptr==null||this.ptr==0){return null}return this.data[--this.ptr]},add:function(b){if(this.ptr<this.data.length-1){this.data.splice(this.ptr+1,this.data.length)}if(this.data.length>this.maxSize){this.recalculate()}if(this.data[this.data.length-1]!=b){this.data.push(b);this.ptr=this.data.length-1}},recalculate:function(){for(var b=0,c=this.data.length-1;b<c;b++){this.data[b]=this.data[b+1]}},clear:function(){this.data=[];this.ptr=null}}},mode:function(a){if(a!=undefined){this._mode=a}return this._mode},startVisualize:function(d,b,e){if(e!=undefined){this.mode(e)}jQuery.fn.__useTr=false;var c=this._visualized.length;if(d==undefined){jQuery.fn.__useTr=true;return null}var a=this;d.mode(this.mode());d.draw(b);d._zIndex=$.topZIndex();d.base();var f={project:d,div:d.base(),form:d,pages:{},mode:this._mode,currentPage:null,prevPageId:null,dialog:{mode:false,div:null,currentPage:null,prevPageId:null},dialogHistory:[]};$(d).bind(WiziCore_Api_ClientForm.ADD_PAGE_EVENT,function(g,h){f.pages[h]=false});$(d).bind(WiziCore_Api_ClientForm.DELETE_PAGE_EVENT,function(g,h){delete f.pages[h]});$(d).bind(WiziCore_Api_ClientForm.onShowNextPage,{self:a,vuid:c},a.showNextPage);$(d).bind(WiziCore_Api_ClientForm.onShowPrevPage,{self:a,vuid:c},a.showPrevPage);$(d).bind(WiziCore_Api_ClientForm.onShowCallingPage,{self:a,vuid:c},a.showCallingPage);$(d).bind(WiziCore_Api_ClientForm.onShowPageByNum,{self:a,vuid:c},function(h,g){a.showPageByNum(h,g)});$(d).bind(WiziCore_Api_ClientForm.onClose,{self:a,vuid:c},a.closePage);$(d).bind(WiziCore_Api_ClientForm.onPageStackBack,{self:a,vuid:c},a.pageStackBack);$(d).bind(WiziCore_Api_ClientForm.onPageStackForward,{self:a,vuid:c},a.pageStackForward);$(d).bind(WiziCore_Api_ClientForm.onPageStackClear,{self:a,vuid:c},a.pageStackClear);WiziCore_Helper.map(d.pages(),function(g){f.pages[g.id()]=false});this._visualized.push(f);jQuery.fn.__useTr=true;return c},stopVisualize:function(a,c){var f=this._visualized[a];if(f==undefined){return}var e=f.div.parent();var d=f.form;$(d).unbind(WiziCore_Api_ClientForm.ADD_PAGE_EVENT);$(d).unbind(WiziCore_Api_ClientForm.DELETE_PAGE_EVENT);$(d).unbind(WiziCore_Api_ClientForm.onShowNextPage,this.showNextPage);$(d).unbind(WiziCore_Api_ClientForm.onShowPrevPage,this.showPrevPage);$(d).unbind(WiziCore_Api_ClientForm.onShowCallingPage,this.showCallingPage);$(d).unbind(WiziCore_Api_ClientForm.onClose,this.closePage);$(d).unbind(WiziCore_Api_ClientForm.onShowPageByNum);$(d).unbind(WiziCore_Api_ClientForm.onPageStackBack);$(d).unbind(WiziCore_Api_ClientForm.onPageStackForward);$(d).unbind(WiziCore_Api_ClientForm.onPageStackClear);for(var b in f.pages){if(f.pages[b]!=false){f.pages[b].destroy()}}f.project.destroy();if(c==undefined){f.div.remove()}else{f.div.empty();if(c.url!=undefined&&c.url!=""){window.location=c.url}e.append(WiziCore.lang().tr("swirl_standart_close_message"))}this._pageStack.clear();this._visualized.splice(a,1)},setDialogMode:function(a,c){var b=this._visualized[a].dialog;if(c!=undefined){b.mode=c}return b.mode},logTime:function(b,e){var a=new Date();var c=a.getTime();var d=c-e;acDebugger.systemLog("message",b,"time",c,"delta",d);return c},closePage:function(e,d,c){var b=e.data.self;var a=e.data.vuid;var h=b._visualized[a];if(h==undefined){return 0}if(!c){var g=(d!=undefined&&d.message!=undefined)?d.message:WiziCore.lang().tr("swirl_dialog_close_form");var f=WiziCore_Helper.showWarning("",g,false,WiziCore_UI_MessageBoxWidget.MB_YESNO);$(f).one(WiziCore_UI_MessageBoxWidget.onDialogClose,function(j,i){switch(i){case WiziCore_UI_MessageBoxWidget.IDYES:b.stopVisualize(a,d);break;default:break}})}else{b.stopVisualize(a,d)}return 0},_getTransitionObject:function(a,d,b,c){return{transition:(!d?this._visualized[a].form.pageTransition():d),reverse:(b)?b:c}},showNextPage:function(e,d,c){var j=e.data.self;var f=e.data.vuid;var g=j._visualized[f];if(g==undefined){return 0}var h=(g.dialog.mode)?g.dialog.currentPageId:g.currentPageId;var a=g.form.pages();for(var b=0;b<a.length;b++){if(a[b].id()==h){b++;if(b<a.length){j.showPage(f,a[b].id(),undefined,undefined,j._getTransitionObject(f,d,c,false))}return(b-1)}}return 0},showPrevPage:function(e,d,c){var j=e.data.self;var f=e.data.vuid;var g=j._visualized[f];if(g==undefined){return 0}var h=(g.dialog.mode)?g.dialog.currentPageId:g.currentPageId;var a=g.form.pages();for(var b=0;b<a.length;b++){if(a[b].id()==h){b--;if(b>=0){j.showPage(f,a[b].id(),undefined,undefined,j._getTransitionObject(f,d,c,true))}return(b+1)}}return 0},showCallingPage:function(e,g,d){var c=e.data.self;var b=e.data.vuid;var f=c._visualized[b];if(f==undefined){return 0}var a=(f.dialog.mode)?f.dialog.prevPageId:f.prevPageId;if(a!=null){c.showPage(b,a,undefined,undefined,c._getTransitionObject(b,g,d,true))}return 0},showPageByNum:function(f,c,e,d){var k=f.data.self;var g=f.data.vuid;var h=k._visualized[g];if(h==undefined){return 0}var j=(h.dialog.mode)?h.dialog.currentPageId:h.currentPageId;var b=0;for(var a in h.form.pages()){if(h.form.pages()[a].id()==j){b=a}}if(h.form.pages()[c]){this.showPage(g,h.form.pages()[c].id(),undefined,undefined,k._getTransitionObject(g,e,d,false))}return b},pageStackBack:function(f,g,d){var c=f.data.self,b=f.data.vuid,e=c._visualized[b].form;if(e.parentApp()!=null){var a=c._pageStack.back();if(a!=null){c.showPage(b,a,undefined,true,c._getTransitionObject(b,g,d,true))}}else{history.go(-1)}},pageStackForward:function(f,g,d){var c=f.data.self,b=f.data.vuid,e=c._visualized[b].form;if(e.parentApp()!=null){var a=c._pageStack.forward();if(a!=null){c.showPage(b,a,undefined,true,c._getTransitionObject(b,g,d,false))}}else{history.go(1)}},pageStackClear:function(b){var a=b.data.self;a._pageStack.clear()},showPage:function(w,j,t,a,m){m=(m)?m:this._getTransitionObject(w);if(a==undefined&&this.mode()==WiziCore_Visualizer.RUN_MODE){this._pageStack.add(j)}var x=this._visualized[w];t=(t===undefined)?true:t;if(x==undefined){return}jQuery.fn.__useTr=false;var b=x.project.base(),h=x.mode,s=x.dialog.mode,n=x.pages[j];if(h!=WiziCore_Visualizer.RUN_MODE){b.show()}else{if(!s&&!WiziCore_Helper.checkForIE7()){}}if(!n){var g=x.form.pages();for(var r=0,p=g.length;r<p;r++){if(g[r].id()==j){n=g[r];x.pages[j]=n;break}}if(!n){jQuery.fn.__useTr=true;return}}if(a==undefined&&x.form.parentApp()==null&&this.mode()==WiziCore_Visualizer.RUN_MODE){var q=(x.form.liveName()!=undefined)?x.form.liveName():x.form.id();WiziCore_Address_History.write(q+"/"+n.name())}var o=((s)?x.dialog.currentPage:x.currentPage),f=(o&&typeof o=="object"?o.base():null),c=(n&&typeof n=="object"?n.base():null);try{x.form._setCurrentPage(n);n.dialogMode(s);n.show(x.div)}catch(u){acDebugger.systemLog1("vizualizer::wpage.show()::",n.widgetClass(),u)}if(h==WiziCore_Visualizer.RUN_MODE){if(n.autoPageJump&&n.autoJumpTime){var v=n.autoPageJump();var d=n.autoJumpTime();if(v!=null&&v!=""&&d!=null&&d!=""){setTimeout(function(){$(n.form()).trigger(WiziCore_Api_ClientForm.onShowPageByNum,[parseInt(v)])},parseInt(d)*1000)}}}if(!s){if(t){var k=(WiziCore_Helper.isMobile())?1:0;window.scrollTo(0,k)}}this._changePage(n.form(),f,c,function(){if(o!=null&&o!=n){o.dialogMode(false);o._setDialogMode();o.hide()}var l=(s)?x.dialog:x;var e=l.currentPage;l.currentPage=n;l.prevPageId=l.currentPageId;l.currentPageId=j;if(!s){if(t){var i=(WiziCore_Helper.isMobile())?1:0;window.setTimeout(function(){window.scrollTo(0,i)},1)}}else{n._setDialogMode();n._zindex(this._findMaxZIndex(x.div)+1)}b.show();this.setFocusToChild(n);$(n).trigger(WiziCore_Api_Page.onPageShow);if(e!=null){$(e).trigger(WiziCore_Api_Page.onPageLeft)}jQuery.fn.__useTr=true},m.transition,m.reverse)},_changePage:function(b,e,f,g,a,c){var i=this;if(this.mode()!=WiziCore_Visualizer.RUN_MODE||b.runtimeMode()==WiziCore_UI_FormRuntime.PREVIEW_MODE||a==undefined||a=="none"||a==""||f==undefined||e==undefined){g.call(i);return}var d=f.css("position"),h=e.css("position");f.css("position","absolute");e.css("position","absolute");css3TransitionHandler(a,c,f,e).done(function(){f.css("position",d);e.css("position",h);g.call(i)})},setFocusToChild:function(b){if(this.mode()!=WiziCore_Visualizer.RUN_MODE||(b.form().parentApp()!=null)){return}var a=null;var c=null;b.traverseChildren(function(f){var e=f.prop("tabindex");var d=f.prop("tabStop");e=(e==undefined)?null:e;if(e!=null&&d){if(a==null){a=e;c=f}if(a>e){a=e;c=f}}});if(c!=null){c.setFocus()}},formPages:function(a){var b=this._visualized[a];if(b==undefined){return null}return b.pages},form:function(a){var b=this._visualized[a];if(b==undefined){return null}return b.project},currentFormPage:function(a,b){var c=this._visualized[a];if(c==undefined){return null}return(b&&c.dialog.mode)?c.dialog.currentPage:c.currentPage},isDialogMode:function(a){var b=this._visualized[a];if(b==undefined){return null}return(b.dialog.mode)?true:false},showPageDialog:function(b,e){var c=this.currentFormPage(b,true);var d=this.getPageFromForm(b,e);if(d==undefined){return}var f=this._visualized[b];if(f==undefined){return}var a=$("<div class='waDialogModeOverlay'/>").css({"z-index":this._findMaxZIndex(f.div)+50});this.setDialogMode(b,true);f.div.prepend(a);this.showPage(b,e,false);f.dialogHistory.push({lastId:c.id(),overlay:a});this.mobileScrollDialogFix(b,e,true,a)},mobileScrollDialogFix:function(f,b,c,i){var e=WiziCore_Helper.isMobile();var d=this._visualized[f].pages[b];var g=this;if(c){if(e){d.tableBase().css({position:"absolute",margin:""});var h=function(j){};var a=function(){i.hide();i.width(i.parent().width());i.height(i.parent().height());i.show()};$(document).bind("scroll."+b,function(){d.setMobilePagePos(true)});$(window).bind("resize."+b,function(){a();d.setMobilePagePos(true)});a()}else{i.css({position:"fixed",left:"",top:""});$(window).bind("resize."+b,function(){d.setDesktopPagePos()})}}else{if(e){$(document).unbind("scroll."+b)}$(window).unbind("resize."+b)}},removePageDialog:function(a){var c=this.currentFormPage(a,true);if(c!=undefined&&c._isDrawn&&this.isDialogMode(a)){c.dialogMode(false);c._setDialogMode();c.hide();this.mobileScrollDialogFix(a,c.id(),false);var d=this._visualized[a].dialogHistory;if(d.length>0){var b=d.pop();if(d.length==0){this.setDialogMode(a,false)}b.overlay.remove();this.showPage(a,b.lastId,false)}}},getPageFromForm:function(a,b){var c=this._visualized[a];if(c==undefined){return null}return c.form.getPageByUid(b)},_findMaxZIndex:function(a){var b=20;a.children().each(function(c){var d=parseInt($(this).css("z-index"));if($(this).attr("data-role")!="dialog"&&$(this).css("z-index")!="auto"&&d>b){b=d}});return parseInt(b)},visProject:function(){return this._visualized}});WiziCore_Visualizer.EDITOR_MODE=0;WiziCore_Visualizer.RUN_MODE=1;function css3TransitionHandler(d,c,h,f){var a=new $.Deferred(),e=c?" reverse":"",b="m-ui-mobile-viewport-transitioning viewport-"+d,g=function(){if(f){}if(h){h.add(f).removeClass("out in reverse "+d)}h.parent().removeClass(b);a.resolve(d,c,h,f)};if(h){h.animationComplete(g)}else{g()}if(h){h.parent().addClass(b)}if(f){f.addClass(d+" out"+e)}if(h){h.addClass(" "+d+" in"+e)}return a.promise()};var WiziCore_Helper={_isConfirmClose:false,_isIE7:null,_isIE8:null,isMobile:function(){if(this._isMobile==undefined){this._isMobile=new RegExp("mobile","i").test(navigator.userAgent)}return this._isMobile},showWarning:function(f,c,b,a){var g=WiziCore.lang().tr("swirl_dialog_title_warning");a=(a==undefined)?WiziCore_UI_MessageBoxWidget.MB_OK:a;var d=WiziCore_UI_MessageBoxWidget.MB_ICONEXCLAMATION;var e=this.showDialog(f,g,a,d,b,c);return e},showPrompt:function(f,c,b){if(f==undefined){f=WiziCore.lang().tr("swirl_dialog_title_prompt")}var a=WiziCore_UI_MessageBoxWidget.MB_OKCANCEL;var d=WiziCore_UI_MessageBoxWidget.MB_ICONPROMPT;var e=this.showDialog("",f,a,d,b,c);return e},showDelete:function(e,a){var f=WiziCore.lang().tr("swirl_dialog_title_delete");var b=WiziCore_UI_MessageBoxWidget.MB_YESNO;var c=WiziCore_UI_MessageBoxWidget.MB_ICONDELETE;var d=this.showDialog(e,f,b,c,false,"",0,a);return d},showError:function(g,d,a,c){var h=WiziCore.lang().tr("swirl_dialog_title_error");var b=WiziCore_UI_MessageBoxWidget.MB_OK;var e=WiziCore_UI_MessageBoxWidget.MB_ICONERROR;var f=this.showDialog(g,h,b,e,c,d,a);return f},showValid:function(d,c){var h=WiziCore.lang().tr("swirl_dialog_title_validate");var b=WiziCore_UI_MessageBoxWidget.MB_OK;var e=WiziCore_UI_MessageBoxWidget.MB_ICONVALIDATE;if(typeof d=="string"){d="-"+d}if(typeof d=="object"){var g="";for(var a in d){g+="-"+d[a]+"<br/>"}d=g}var f=this.showDialog(undefined,h,b,e,c,d);return f},showCustom:function(g,d,c){var b=WiziCore_UI_MessageBoxWidget.MB_OK;if(typeof d=="string"){d="-"+d}if(typeof d=="object"){var f="";for(var a in d){f+="-"+d[a]+"<br/>"}d=f}var e=this.showDialog(undefined,g,b,undefined,c,d);return e},showConfirm:function(d,g,c,b){if(g==undefined){g=WiziCore.lang().tr("swirl_dialog_title_question")}var a=WiziCore_UI_MessageBoxWidget.MB_YESNO;if(b!=undefined){a=b}var e=WiziCore_UI_MessageBoxWidget.MB_ICONQUESTION;var f=this.showDialog(undefined,g,a,e,c,d);return f},showInfo:function(d,h,c,f,a){if(h==undefined){h=WiziCore.lang().tr("swirl_dialog_title_information")}var b=WiziCore_UI_MessageBoxWidget.MB_OK;var e=WiziCore_UI_MessageBoxWidget.MB_ICONINFORMATION;var g=this.showDialog(undefined,h,b,e,c,d,0,false,f,a);return g},showImportExport:function(c,g,b,d,a){if(g==undefined){g=WiziCore.lang().tr("swirl_dialog_title_information")}var f=WiziCore_UI_MessageBoxWidget.MB_CLOSE;var e=this.showDialog(undefined,g,f,undefined,b,c,0,false,d,a);return e},showDialog:function(m,i,e,g,a,d,j,n,b,l,h){var k={widgetClass:"WiziCore_UI_MessageBoxWidget",message:(m==undefined)?"":m,fullMessage:(d==undefined)?"":d,errorNum:(j==undefined)?"":j,title:(i==undefined)?"":i,buttons:(e==undefined)?WiziCore_UI_MessageBoxWidget.MB_OK:e,icon:(g==undefined)?WiziCore_UI_MessageBoxWidget.MB_ICONNONE:g,autoOpen:(h==undefined)?true:h,resizable:(a==undefined)?WiziCore_UI_MessageBoxWidget.NO_RESIZABLE:a,multiple:(n==undefined)?false:n};if(b!=undefined){k.width=b}if(l!=undefined){k.height=l}var f=WiziCore.Widgets().getDefaultWidgetProperties(k.widgetClass);k=jQuery.extend(true,f,k);var c=new WiziCore_UI_MessageBoxWidget({project:k,mode:WiziCore_Visualizer.RUN_MODE});c.drawInConsole();return c},disableInterface:function(f,a,b,e){this.disablePlane(a,b,e);var d=$(".wiziAppDisableDivText");if(d.length==0){d=$("<div class='wiziAppDisableDivText'>\r\n    <table align='center' valign='middle'><tr><td>\r\n                <span class=\"wiziAppDisableTextSpan wf-corner-small wf-box-shadow\">\r\n                    <span class=\"loadingImg\"\/><br>\r\n                    <span id=\"wiziAppDisableText\"><\/span>\r\n                <\/span>\r\n            <\/td><\/tr><\/table>\r\n<\/div>")}var c=(e)?e:$(document.body);c.append(d);if(f!=undefined){$(".wiziAppDisableDivText").find("#wiziAppDisableText").html(f)}},disablePlane:function(a,c,e){c=(c===undefined)?0.4:c;a=(a===undefined)?"#000":a;var b=$(".wiziAppDisableDiv");if(b.length==0){b=$("<div class='wiziAppDisableDiv'>");b.css({opacity:c,"background-color":a})}var d=(e)?e:$(document.body);d.append(b)},loadMode:function(b,e,l,k,j,f,g,c,i){b.find(".wiziLoadMode").remove();if(c==undefined){c="Default"}if(e!==false&&c!=null){g=(g===undefined)?true:g;k=(k===undefined)?"#000000":k;j=(j===undefined)?"#FFFFFF":j;f=(f===undefined)?0.7:f;var h=$("<div class=\"wiziLoadMode\">\n    <div class=\"wiziLoadModeBg\"><\/div>\n    <table style=\"width : 100%; height : 100%; position: absolute; top: 0px; left: 0px\">\n        <tr style=\"width : 100%; height : 100%;\">\n            <td style=\"width : 100%; height : 100%;\" align=\"center\" valign=\"middle\">\n                <img class=\"hourglassImg\"\/>\n                <span class=\"loadingImg\"><\/span><br>\n                <span class=\"loadingLogoImgWithA\"><span class=\"loadingLogoImgSmall\"><\/span><\/span>\n                <span class=\"loadingSpan\"><\/span>\n            <\/td>\n        <\/tr>\n    <\/table>\n<\/div>\n");h.find(".loadingLogoImgWithA").hide();h.find(".wiziLoadModeBg").css({height:"100%",width:"100%","background-color":j,opacity:f,filter:"Alpha(Opacity="+(f*100)+")"});if(c!="Default"){h.find(".loadingImg").hide();h.find(".hourglassImg").css("display","inline").attr("src",c)}if(e=="transparent"){h.css("background-color","transparent");h.find(".loadingImg").addClass("wf-corner-small wf-box-shadow").css("background-color","white")}if(i){h.find(".loadingImg").css(i)}if(g){h.css({"z-index":50000000,position:"absolute"});if(jQuery.browser.msie){h.css({position:"fixed"});if(WiziCore_Helper.checkForIE7()&&(b.attr("id")=="wiziLiveMode"||b.hasClass("wiziFormApplication"))){h.css({left:"0px",top:"0px"})}}}if(l!=undefined){h.find(".loadingSpan").text($(WiziCore.lang().tr(l)).text());h.find(".loadingSpan").css("color",k)}var a=0;b.data("wiziloadmode",true);if(e=="transparent"){h.width("100%").height("100%");b.prepend(h)}else{var d=function(){++a;if(b.is(":visible")==0){if(a<2000&&b.data("wiziloadmode")===true){window.setTimeout(d,10)}return}if(b.data("wiziloadmode")){h.width(b.width()).height(b.height());b.prepend(h)}};d()}}else{b.data("wiziloadmode",false)}},enableInterface:function(){$(".wiziAppDisableDiv").remove();$(".wiziAppDisableDivText").remove()},checkEmail:function(a){var b=new RegExp("[\\w\\.+]{1,}[@][\\w\\-]{1,}([.]([\\w\\-]{1,})){1,5}$","ig");return b.test(a)},updateDomainLogins:function(n){var d=[];try{d=JSON.parse(WiziCore.cookie().cookie("domainLogins"));d=(!$.isArray(d))?[]:d}catch(m){acDebugger.systemLog("domainLogins no data");d=[]}var b=new RegExp("[^.]*.[^.]*$","ig");var c=window.location.host;var j="."+b.exec(c)[0];var h=[],g=10;for(var k=0,f=d.length;k<f;k++){if(d[k]!==c&&g>0){h.push(d[k]);g--}}d=h;if(n==true||n==undefined){d.splice(0,0,c)}var a=JSON.stringify(d);WiziCore.cookie().cookie("domainLogins",a,{expires:60*60*24*30,path:"/",domain:j})},confirmCloseEnable:function(a){this.closeMessage=a;window.onbeforeunload=wiziAppCheckClose;this._isConfirmClose=true},confirmCloseDisable:function(){window.onbeforeunload=null;this._isConfirmClose=false},isConfirmClose:function(){return this._isConfirmClose},generateId:function(f,g){var a="abcdefghijklmnopqrstuvwxyz0123456789-";var e=a.length;var b=(f==undefined)?36:f;var d=(g==undefined)?"w":g;if(d.length!=0){b-=d.length}for(var c=0;c<b;c++){var h=parseInt(e*Math.random());d+=a.charAt(h)}return d},generateUniqueId:function(b,c){var a=WiziCore_Helper.generateId(b,c);return a},inArray:function(c,a){for(var b=0;b<a.length;b++){if(c==a[b]){return true}}return false},isPhoneGapOnline:function(){if(window.PhoneGap&&navigator.network&&navigator.network.connection&&window.Connection&&(navigator.network.connection.type==Connection.NONE||navigator.network.connection.type==Connection.UNKNOWN)){return false}return true},labelTextCheck:function(a){return a.replace(new RegExp("(<.*?>)","g"),"")},findWidgetInContext:function(b,a){return a.find(b)},getCkEditorStyles:function(a,e){var j=[{name:"Marker: Yellow",element:"span",styles:{"background-color":"Yellow"}},{name:"Marker: Green",element:"span",styles:{"background-color":"Lime"}},{name:"Big",element:"big"},{name:"Small",element:"small"},{name:"Typewriter",element:"tt"},{name:"Computer Code",element:"code"},{name:"Keyboard Phrase",element:"kbd"},{name:"Sample Text",element:"samp"},{name:"Variable",element:"var"},{name:"Deleted Text",element:"del"},{name:"Inserted Text",element:"ins"},{name:"Cited Work",element:"cite"},{name:"Inline Quotation",element:"q"},{name:"Image on Left",element:"img",attributes:{style:"padding: 5px; margin-right: 5px",border:"2",align:"left"}},{name:"Image on Right",element:"img",attributes:{style:"padding: 5px; margin-left: 5px",border:"2",align:"right"}},{name:"Borderless Table",element:"table",styles:{"border-style":"hidden","background-color":"#E6E6FA"}},{name:"Square Bulleted List",element:"ul",styles:{"list-style-type":"square"}}];var g=a.themeContent()[e],d;if(g){for(var b in g){var i=["color","font","background-color","line-height","letter-spacing","paragraphSpacing"];var h=this.getEscapedStyleName(b,e);d={name:b,element:"span",styles:{color:"",font:"","background-color":"","line-height":"","letter-spacing":""}};var f=g[b];if(f){for(var c in f){if($.inArray(c,i)!==-1){d.styles[c]=f[c]}}}j.push(d)}}return j},getEscapedStyleName:function(a,c){var b="-"+a.replace(new RegExp(" ","ig"),"sub236");b=b.replace(new RegExp("\\.","ig"),"sub237");b=b.replace(new RegExp("#","ig"),"sub238");b="ac-"+c+b;return b},appendStyleSheetsForWidgets:function(e,g,f){if(f){$("style."+g).remove()}if($("style."+g).length==0){var b=e.themeContent()[g];if(b){var h="<style class='"+g+" ac-widget-style-content'>";for(var d in b){var a=b[d];h+="."+this.getEscapedStyleName(d,g)+"{";for(var c in a){switch(c){case"fontColor":h+="color";break;case"bgColor":h+="background-color";case"background_color":h+="background-color";break;case"lineHeight":h+="line-height";break;case"letterSpacing":h+="letter-spacing";break;default:h+=c;break}h+=":"+a[c]+";"}h+="}"}h+="</style>";$(document.body).prepend($(h))}}},mapEnum:function(d,c){var a={};for(var b in c){a[d[b]]=c[b]}return a},setIfNeedDefaultContainerBorder:function(c,d){var a=((d==undefined)||(d==""));var b=!a?(parseInt(d)<1):true;b=(!b&&!a)?(d.indexOf("none")!=-1):b;if(b){c.css("border","1px dotted #000000")}},getWidgetPosition:function(a){return{x:parseInt(a.prop("x")),y:parseInt(a.prop("y"))}},expandWidgetSizeByProp:function(c,b,a){if(b=="width"){return WiziCore_Helper.expandWidgetWidth(c,a)}else{if(b=="height"){return WiziCore_Helper.expandWidgetHeight(c,a)}}return false},expandWidgetWidth:function(d,c){var a=parseInt(d.width());var b=parseInt(c);if(a<b){d.object().prop("width",b);return true}return false},expandWidgetHeight:function(d,c){var b=parseInt(d.height());var a=parseInt(c);if(b<a){d.object().prop("height",a);return true}return false},expandWidgetSizeByChild:function(f,g){var j=parseInt(g.object().prop("width"));var b=parseInt(g.object().prop("height"));var i=parseInt(g.object().prop("x"));var h=parseInt(g.object().prop("y"));var a=parseInt(f.object().prop("width"));var d=parseInt(f.object().prop("height"));var e=j+i;var c=b+h;if(e>a){f.object().prop("width",e)}if(c>d){f.object().prop("height",c)}},selectContainersFromWidgets:function(d){var f=[];for(var b=0;b<d.length;++b){var e=d[b];var a=(e.object!=undefined)?e.object:(e.object()!=undefined)?e.object():e;if(a==null){continue}var c=WiziCore.Widgets().getContainerType(a.widgetClass());if(c==WiziCore_Widget_Base.CASE_TYPE_CONTAINER){f.push(e)}}return f},callCallback:function(b,a){if(typeof b=="function"){b.apply(null,a)}},cloneAction:function(e,c,d){var f=null;for(var b in e.actions().system){var a=e.actions().system[b];if(a.objectid==c.id()){f={objectid:d.id(),actionid:a.actionid,handler:a.handler,actions:a.actions};break}}return f},getFileExt:function(a){var c=(a+"").split(".");var b=c[c.length-1].toLowerCase();return b},escapeString:function(a){return(a+"").split("\\").join("\\\\").split('"').join('\\"').split("'").join("\\'")},escapeHTMLtags:function(a){return(a+"").replace(new RegExp("<|>","g"),function(b,c){return(b=="<")?"&lt;":"&gt;"})},isInt:function(a){var b=parseInt(a);if(isNaN(b)){return false}return a==b&&a.toString()==b.toString()},checkForIEandBlock:function(){var a=true;if(jQuery.browser.msie){this.showWarning("",WiziCore.lang().tr("swirl_helper_ie_not_supp"),false);a=false}return a},checkForIE7:function(){if(this._isIE7===null){this._isIE7=($.browser.msie&&parseInt($.browser.version,10)<=7)}return this._isIE7},checkForIE8:function(){if(this._isIE8===null){this._isIE8=($.browser.msie&&parseInt($.browser.version,10)<=8)}return this._isIE8},validateLiveName:function(a){var b=new RegExp("[^a-z0-9A-Z-._ ]+","gi");var c=a.replace(b);return(c===a)},clone:function(b){var a={};jQuery.extend(true,a,{val:b});return a.val},checkFlash:function(){var a=false;try{var b=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");var c=(navigator.mimeTypes&&navigator.mimeTypes["application/x-shockwave-flash"])?navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin:0;if(c||b){a=true}}catch(d){if(navigator.mimeTypes["application/x-shockwave-flash"]!=undefined){a=true}}},getExceptionsString:function(a,b){return a+" '"+b+"' doesn't exist."},trueF:function(){return true},falseF:function(){return false},updateWidgetEventsByName:function(d,c,j){if(j.system!=undefined){var b=j.system;var g=null;for(var h=0,f=b.length;h<f;h++){if(b[h].objectid==d){g=b[h];if(g!=null){var k=this.createFunctionHandler(c,g.actions,"").fHandler;var a=g.handler;var e=new RegExp(a,"g");j.userCode=j.userCode.replace(e,k);if(g.code!=undefined){g.code=g.code.replace(e,k)}g.handler=k}break}}}return j},checkAppName:function(b,c){if(b==undefined){return false}c=(c==undefined||c)?true:false;var g="";var a=true;var h=/[#",.<>']/;var k=h.test(b);var j=/^[0-9]+$/;var f=j.test(b[0]);k=(f==false)?k:f;if(k==false){var d=["break","if","else","function","case","delete","while","repeates","repeat","pages","showPage","showPrevPage","showNextPage","showPageByNum","theme","themeName","findName","find","buildDOMChield","buildDOM","executeActions","actions","level","pagescount","deleteRepeates","addRepeates","deleteItem","deletePage","addItem","addPage","createItem","createPage","project","prop","buildProjectFromJSON","offset","init","createItem","clone","addItem","deleteItem","getAvailableProps","getAvailableMethods","parent","id","name","widgetClass","children","childrencount","form","page","repeat","isRepeatShowOn","wiziHandlerAddEvent","wiziHandlerRemoveEvent","eventsHandles"];for(var e in d){if(b==d[e]){a=false;if(c){g=WiziCore.lang().tr("swirl_console_applocation_dialog_createform_error_name_reserved")}else{g=WiziCore.lang().tr("swirl_console_error_name_reserved")}break}}}else{if(f==true){if(c){g=WiziCore.lang().tr("swirl_console_applocation_dialog_createform_error_name_num_first")}else{g=WiziCore.lang().tr("swirl_console_error_name_num_first")}a=false}else{g=WiziCore.lang().tr("swirl_console_applocation_dialog_createform_error_name_special_chars");a=false}}if(!c){if(b=="application"){g=WiziCore.lang().tr("swirl_console_error_name_reserved");a=false}}if(a==false){WiziCore_Helper.showWarning($(g).text())}return a},createFunctionHandler:function(d,g,c,e){var b=new RegExp("[^\\w]","g"),f=g.params;if(e!=undefined&&e==="WiziCore_Api_Form"){d="application"}else{d=d.replace(b,"_")}var a="handler_"+d;a+="_"+g.funcview;var h="";h+="function "+a+"(";if(f!=undefined){h+=f}if(c==undefined){c="\n\t\n"}h+="){"+c+"}\n";return{fCode:h,fHandler:a}},_getUniqueWidgetName:function(b,f){var a=new RegExp("\\d+$");var g=b.search(a);var e=b;if(g!=-1){e=e.substring(0,g)}var d=e;for(var c=1;c<999999;c++){if(WiziCore_Helper.indexOf(f,d)==-1){b=d;break}d=e+c}return b},getMaxTabOrder:function(a){var b=1;var c=(a.page()!=undefined)?a.page():a.form();c.traverseChildren(function(e){var d=parseInt(e.prop("tabindex"));if(!isNaN(d)&&d>=b){b=d+1}});return b},identifyMaxContainerZIndex:function(a){var b=a.children();var c=0;b.map(function(e){var d=parseInt(e.zindex());if(!isNaN(d)){c=Math.max(c,d)}});return c},getMinZIndexFromProps:function(c,b){var a=0;c.map(function(f){var e=(b!==true)?f.zindex:f.object.object.zindex();var d=parseInt(e);d=(isNaN(d))?0:d;if(a==0){a=d}else{a=Math.min(a,d)}});return a},objectIsEmpty:function(a){for(var b in a){if(Object.prototype.hasOwnProperty.call(a,b)){return false}}return true},objectsAreEqual:function(e,c){if(e==null&&c==null){return true}var b;for(b in e){if(!(b in c)){return false}}for(b in c){if(!(b in e)){return false}}for(b in e){var f=e[b];var a=c[b];var d=typeof(f);if(d!=typeof(a)){return false}switch(d){case"object":if(!WiziCore_Helper.objectsAreEqual(f,a)){return false}break;case"function":if(f.toString()!=a.toString()){return false}break;default:if(f!=a){return false}}}return true},setDocumentTitle:function(a,b){if(a==undefined){return}if(a=="login"){document.title=$(WiziCore.lang().tr("swirl_page_login")).text()}else{if(a=="console"){document.title=$(WiziCore.lang().tr("swirl_page_console")).text()}else{if(a=="application"){document.title=b+" Application - Application Craft"}}}}};function wiziAppCheckClose(){return WiziCore_Helper.closeMessage}function makePropCell(a,b){window[a]=b;window[a].prototype=new eXcellBase}WiziCore_Helper.initIEFixes=function(){var b=Array.prototype.filter;if(!b){b=function(h,g){var d=[],e,f;for(e=0,f=this.length;e<f;e++){if(h.call(g,this[e])){d.push(this[e])}}return d}}WiziCore_Helper.filter=function(f,e,d){return b.apply(f,[e,d])};var c=Array.prototype.map;if(!c){c=function(e){if(this===void 0||this===null){throw new TypeError()}var h=Object(this);var d=h.length>>>0;if(typeof e!=="function"){throw new TypeError()}res=new Array(d);var g=arguments[1];for(var f=0;f<d;f++){if(f in h){res[f]=e.call(g,h[f],f,h)}}return res}}WiziCore_Helper.map=function(f,e,d){return c.apply(f,[e,d])};var a=Array.prototype.indexOf;if(!a){a=function(f){if(this===void 0||this===null){throw new TypeError()}var g=Object(this);var d=g.length>>>0;if(d===0){return -1}var i=0,h=i;if(arguments.length>0){i=Number(arguments[1]);if(i!==i){i=0}else{if(i!==0&&i!==(1/h)&&i!==-(1/h)){i=(i>0||-1)*Math.floor(Math.abs(i))}}}if(i>=d){return -1}var e=i>=0?i:Math.max(d-Math.abs(i),0);for(;e<d;e++){if(e in g&&g[e]===f){return e}}return -1}}WiziCore_Helper.indexOf=function(f,e,d){return a.apply(f,[e,d])}};WiziCore_Helper.initIEFixes();var SwirlLangTr=jQuery.Class.create({_currLang:null,_langObject:null,init:function(a){if(a!=undefined){this._currLang=a}else{this._currLang=SwirlLangTr.ENGLISH}this._langObject={}},use:function(a){if(a!=undefined){jQuery.fn.__useTr=a}return jQuery.fn.__useTr},langName:function(a){if(a!=undefined){this._currLang=a}return this._currLang},lang:function(b,a){if(b!=undefined){this._langObject=$.extend(true,this._langObject,b)}if(a!=undefined){this.langName(a)}return this._langObject},registerWidgetLang:function(c){var b=this.langName();if(b!=undefined&&c!==undefined){var a=c[b];if(a==undefined){a=c.en}if(a!=undefined){this._langObject=$.extend({},a,this._langObject)}}},tr:function(a){if(a!=undefined&&a[0]=="*"){a=a.substring(1,a.length)}var b=this.trText(a);return"<span lang='"+SwirlLangTr.BASE_ATTR+"-"+a+"'>"+b+"</span>"},trText:function(a){if(a!=undefined&&a[0]=="*"){a=a.substring(1,a.length)}var b=(this.lang()[a]!=undefined)?this.lang()[a]:a;return b},trAll:function(){},trValue:function(a,b){if(a[0]=="*"){a=a.substring(1,a.length)}if(this.lang()[a]!=undefined){return this.lang()[a]}else{return b}},trVisible:function(){this.trElement($(document.body))},trElement:function(b){var d=this.lang();if(d==undefined){return}if(b!=undefined){var c=$(b).find("*[lang|="+SwirlLangTr.BASE_ATTR+"]");var a=this;c.each(function(){var e=$(this).attr(SwirlLangTr.BASE_ATTR);e=e.substring(5,e.length);$(this).langtext(a.trValue(e,e))})}}});SwirlLangTr.BASE_ATTR="lang";SwirlLangTr.ENGLISH="En";SwirlLangTr.RUSSIAN="Ru";var WiziCore_ErrorConstants={FOREIGN_INSTANCE_STATUS_ERROR:{code:1000,message:"In mulitple items request some of the items caused error, check detailed error data."},METHOD_NOT_FOUND:{code:1001,message:"Method not found."},WIDGET_NOT_FOUND:{code:1002,message:"Widget not found."},NO_INSTANCE_AVAILABLE:{code:1003,message:"No instance is available."},INSTANCE_STATUS_ERROR:{code:1004,message:"The item caused error, check detailed error data."}};function wiziCoreErrorObject(c){var b=null;var a=WiziCore_ErrorConstants[c];if(a!=undefined){if(typeof a=="object"){b=a}else{b={code:a}}}return b}function raiseWiziCoreError(e){var b=WiziCore_ErrorConstants[e];var d,c;if(b!=undefined){var a=(typeof b=="object");d=(a)?b.message:undefined;c=(a)?b.code:b}throw new WiziCore_Api_Error(d,c)};var WiziCore_RowUserData=jQuery.Class.create({_userDataObject:null,init:function(){},_getUserDataObject:function(){if(this._userDataObject==null){this._userDataObject={}}return this._userDataObject},_getRow:function(c,a){var b=this._getUserDataObject();a=(a===undefined)?true:a;if(a&&b[c]===undefined){b[c]={}}return b[c]},rowData:function(d,a,c){var b=(c!==undefined);var e=this._getRow(d,b);if(b){e[a]=c}return(e==undefined)?undefined:e[a]},rowDataExists:function(a){var b=this._getRow(a,false);return(b===undefined)}});var WiziCore_UserData=jQuery.Class.create({_userDataObject:null,init:function(){},_getUserDataObject:function(){if(this._userDataObject==null){this._userDataObject={}}return this._userDataObject},data:function(a,c){var b=this._getUserDataObject();if(c!==undefined){b[a]=c}return b[a]}});var WiziCore_GlobalDataPool=null;try{WiziCore_GlobalDataPool=parent.WiziCore_GlobalDataPool}catch(e){WiziCore_GlobalDataPool=null}if(!WiziCore_GlobalDataPool){WiziCore_GlobalDataPool={_storage:{},getGlobalData:function(a){var b=WiziCore_GlobalDataPool._storage;return b[a]},setGlobalData:function(a,b){var c=WiziCore_GlobalDataPool._storage;c[a]=b},clearGlobalData:function(a){var b=WiziCore_GlobalDataPool._storage;delete b[a]}}};var WiziCore_Api_TwitterClient=WiziCore_Api_Base.extend({_authString:null,_name:null,_pass:null,_serviceUrl:"http://api.twitter.com/1/",_nc:null,_format:"json",_isAuth:false,init:function(){this._super(this)},auth:function(a,b){this._name=a;this._pass=b;this._authString=btoa(a+":"+b)},isAuth:function(){return this._isAuth},publicTimeline:function(b){var a=this._serviceUrl+"statuses/public_timeline."+this._format;this._sendRequestGet(a,b,false)},statusesShow:function(c,b){var a=this._serviceUrl+"statuses/show/"+c+"."+this._format;this._sendRequestGet(a,b,false)},statusesFrends:function(c,b){var a=this._serviceUrl+"statuses/friends/"+c+"."+this._format;this._sendRequestGet(a,b,false)},friendsIds:function(c,b){var a=this._serviceUrl+"friends/ids/"+c+"."+this._format;this._sendRequestGet(a,b,false)},userShow:function(c,b){var a=this._serviceUrl+"users/show/"+c+"."+this._format;this._sendRequestGet(a,b,false)},userSuggestions:function(b){var a=this._serviceUrl+"users/suggestions."+this._format;this._sendRequestGet(a,b,false)},test:function(b){var a=this._serviceUrl+"help/test.js."+this._format;this._sendRequestGet(a,b,false)},update:function(d,b,c){if(!b){return}var a=this._serviceUrl+"statuses/update."+this._format;a+="?status="+escape(b);a=this._addParamToQueryURL(a,true,c,"in_reply_to_status_id");this._sendRequestPost(a,d,true)},verifyCredentials:function(c){var a=this._serviceUrl+"account/verify_credentials."+this._format;var b=this;this._sendRequestGet(a,function(e,d){b._isAuth=true;if(typeof c=="function"){c.call(b,e,d)}},true)},userTimeline:function(g,c,f,b,e,d){var a;if(c){a=this._serviceUrl+"statuses/user_timeline/"+c+"."+this._format}else{a=this._serviceUrl+"statuses/user_timeline."+this._format}a=this._addParamToQueryURL(a,false,f,"since");a=this._addParamToQueryURL(a,f,b,"since_id");a=this._addParamToQueryURL(a,f||b,e,"count");a=this._addParamToQueryURL(a,f||b||e,d,"page");this._sendRequestGet(a,g,true)},_addParamToQueryURL:function(c,a,e,d){var b=c;if(e){if(a){b+="&"}else{b+="?"}b+=d+"="+escape(e.toString().replace(/ /g,"+"))}return b},_sendRequestGet:function(a,c,b){this._sendRequest("GET",a,c,b)},_sendRequestPost:function(a,d,b,c){this._sendRequest("POST",a,d,b,c)},_sendRequest:function(c,a,g,d,e){if(this._nc==null){var b=this.context();if(b!=undefined&&typeof b.webClient=="function"){this._nc=b.webClient();if(typeof this._nc!="object"){return}}else{return}}var f={};if(d||this._isAuth){f={Authorization:"Basic "+this._authString}}if(c=="GET"){e=undefined}this._nc.httpRequest(a,c,function(i,h){if(typeof g=="function"){g.call(this,i,h)}},e,"json",f)}});$(document).ready(function(){WiziCore.addExtendsToApp("twitterClient",new WiziCore_Api_TwitterClient())});var WiziCore_Api_WeatherClient=WiziCore_Api_Base.extend({_serviceUrl:"http://wsf.cdyne.com/WeatherWS/Weather.asmx",_weatherInformationCached:null,_nc:null,_app:null,init:function(){this._super(this)},app:function(a){if(a!=undefined){this._app=a}return this._app},getWebClient:function(){if(this._nc==null){var a=this.context();if(a!=undefined&&typeof a.webClient=="function"){this._nc=a.webClient();if(typeof this._nc=="object"){return this._nc}}}return this._nc},getWeatherInformation:function(d){if(this._weatherInformationCached!=null){this.onGetWeatherInformation(this._weatherInformationCached,false,d);return}var c=this.getWebClient();if(c!=null){var a=this;var b=this._serviceUrl+"/GetWeatherInformation?";c.httpRequest(b,"GET",function(f,e){var g={};if(e==false){g=c.XML2JSON(f)}a.onGetWeatherInformation(g,e,d)},undefined,"xml")}},onGetWeatherInformation:function(a,b,c){if(c!=undefined){c.call(this,a,b)}if(b==false){this._weatherInformationCached=a}},getCityWeatherByZIP:function(c,e){if(c==undefined){return}var d=this.getWebClient();if(d!=null){var a=this;var b=this._serviceUrl+"/GetCityWeatherByZIP";d.httpRequest(b,"GET",function(g,f){var h={};if(f==false){h=d.XML2JSON(g)}if(e!=undefined){e.call(a,h,f)}},{ZIP:c.toString()},"xml")}},getCityForecastByZIP:function(c,e){if(c==undefined){return}var d=this.getWebClient();if(d!=null){var a=this;var b=this._serviceUrl+"/GetCityForecastByZIP";d.httpRequest(b,"GET",function(g,f){var h={};if(f==false){h=d.XML2JSON(g)}if(e!=undefined){e.call(a,h,f)}},{ZIP:c.toString()},"xml")}},setData:function(b,a){if(typeof b=="string"){var c=this.app();if(c!=null){c.setData(b,a)}}else{if(b&&typeof b.setData=="function"){b.setData(a)}}},fillGrid:function(a,f,c,j){var h={};for(var d in j.WeatherDescription){if(j.WeatherDescription[d]!==undefined){var m=j.WeatherDescription[d];if(m.WeatherID!=-1){h[m.WeatherID]=m}}}var o=[];var l=[];if(f!=null){l=f.split(",");for(var d in l){o.push("")}}var k={rows:[]};var b=1;var e=(c.ForecastResult.Forecast!==undefined)?c.ForecastResult.Forecast:c.ForecastResult;for(var d in e){if(e[d]){var m=e[d];var g="";if(h[m.WeatherID]!=undefined){g=h[m.WeatherID].PictureURL}var n=$.extend(true,[],o);for(var d in n){switch(l[parseInt(d)]){case"date":n[d]=m.Date;break;case"desc":n[d]=m.Desciption;break;case"low":n[d]=m.Temperatures.MorningLow;break;case"high":n[d]=m.Temperatures.DaytimeHigh;break;case"precip":n[d]=m.ProbabilityOfPrecipiation.Nighttime+"/"+m.ProbabilityOfPrecipiation.Daytime;break;case"icon":n[d]=g;break}}k.rows.push({id:b,data:n});b++}}this.setData(a,k)},WeatherForecast:function(h,f,e,c,g,a,d){if(h==undefined){return}var b=this;b.setData(f,"");b.setData(c,"");b.setData(g,"");b.setData(a,{rows:[]});this.getWeatherInformation(function(i,j){if(j==false){b.getCityForecastByZIP(h,function(k,l){if(l==false&&k!=undefined){b.setData(f,k.Success);b.setData(c,k.State);b.setData(g,k.City);if(k.Success=="true"||k.Success===true&&d!=undefined){b.fillGrid(a,d,k,i)}}if(typeof e=="function"){e.call(this,k,l)}})}else{if(typeof e=="function"){e.call(this,i,j)}}})}});$(document).ready(function(){WiziCore.addExtendsToApp("weatherClient",new WiziCore_Api_WeatherClient())});var WiziCore_Api_FacebookLogin=WiziCore_Api_Base.extend({triggerObject:{},_authUrl:"https://graph.facebook.com/oauth/authorize?client_id={clientId}&redirect_uri={redirectUrl}&display=popup",_clientId:"fb79f993dbd82ea7d2bed96ab0ffbf1a",_container:null,_redirectUrl:function(){var a=this.context();if(a!=undefined){var b=a.config().serverApi();b=b.replace("json","");return b+"WiziDataAgent/Facebook/login.php"}},loadClientKey:function(){var a=this.context();if(a!=undefined){var b=a.config().facebookId();if(b!=undefined){this._clientId=b}}},init:function(){this._super(this)},login:function(d,a,c){this.loadClientKey();if(this.checkIsLoggedIn(d)){return}if(this.checkCookieLogin(d)){return}a=(a==undefined)?this._clientId:a;c=(c==undefined)?this._redirectUrl():c;var b=this._authUrl;b=b.replace("{clientId}",a);b=b.replace("{redirectUrl}",c);this._openIframe(b,d)},checkCookieLogin:function(b){var a=WiziCore.cookie().cookie("facebookAppTicket");if(a!=undefined){this.setDataAgentParam(a);b(false,a);return true}return false},checkIsLoggedIn:function(d){var b=this.context();if(b!=undefined){var c=b.getDataAgentParams();for(var a=0;a<c.length;a++){if(c[a].dataAgent=="Facebook"&&c[a].name=="access_key"){d(false,c[a].value);return true}}}return false},_openIframe:function(b,c){this._container=window.open(b,"Facebook Login","menubar=no,location=yes,resizable=no,scrollbars=no,status=no,height=500px,width=500px");this._container.focus();var a=this;$(this.triggerObject).bind(WiziCore_Api_FacebookLogin.onIframeLoginSuccess,function(d,f,e){a.onSuccess(f,e);WiziCore.cookie().cookie("facebookAppTicket",f,{expires:e,path:"/"});c(false,f,e)});$(this.triggerObject).bind(WiziCore_Api_FacebookLogin.onIframeLoginError,function(d,e){a.onFail(e);c(true)})},setDataAgentParam:function(b){var a=this.context();if(a!=undefined&&typeof a.webClient=="function"){a.setDataAgentParam("Facebook","access_key",b)}},onSuccess:function(b,a){this.setDataAgentParam(b);this._container.close();window.focus()},onFail:function(a){alert(a);this._container.close();window.focus()}});WiziCore_Api_FacebookLogin.onIframeLoginSuccess="Event#WiziCore_Api_FacebookLogin#onIframeLoginSuccess";WiziCore_Api_FacebookLogin.onIframeLoginError="Event#WiziCore_Api_FacebookLogin#onIframeLoginError";$(document).ready(function(){WiziCore.addExtendsToApp("facebook",new WiziCore_Api_FacebookLogin());WiziOnFacebookLoginSuccess=function(b,a){$(WiziCore_Api_FacebookLogin.prototype.triggerObject).trigger(WiziCore_Api_FacebookLogin.onIframeLoginSuccess,[b,a])};WiziOnFacebookLoginFail=function(a){$(WiziCore_Api_FacebookLogin.prototype.triggerObject).trigger(WiziCore_Api_FacebookLogin.onIframeLoginError,a)}});function swirlArrayToJsonFormat(c){var b={rows:[]};if(c instanceof Array){var d=1;for(var a in c){if(c[a]){b.rows.push({data:c[a],id:d})}d++}c=b}return b}function swirlJsonFormatToArray(c){var a=[];if(c instanceof Object){for(var b in c.rows){a.push(c.rows[b].data)}}return a}$(document).ready(function(){WiziCore.addExtendsToApp("arrayToAdvanced",swirlArrayToJsonFormat);WiziCore.addExtendsToApp("advancedToArray",swirlJsonFormatToArray)});